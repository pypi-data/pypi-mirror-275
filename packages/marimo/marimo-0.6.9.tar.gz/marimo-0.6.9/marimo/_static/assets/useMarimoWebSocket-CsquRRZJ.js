var e,t=Object.defineProperty,r=(e,r,o)=>(((e,r,o)=>{r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[r]=o})(e,"symbol"!=typeof r?r+"":r,o),o);import{c as o,bA as n,fv as i,fw as a,Y as s,fm as l,r as u,fn as c,fx as d,fy as m,fz as f,fA as p,aE as h,j as g,e as y,dS as b,R as v,fB as w,dC as x,L as N,fq as D,fC as E,az as S,fD as O,bb as k,bc as _,bd as j,X as C,bk as P,b8 as R,b9 as z,bw as M,e7 as T,bo as L,fE as V,aV as I,aW as H,fF as A,fG as W,fH as q,fI as B,m as G,T as F,fJ as U,fK as Y,O as X,w as $,a0 as K,aT as Q,b7 as Z,I as J,b6 as ee,dx as te,bY as re,fL as oe,q as ne,B as ie,at as ae,J as se,aB as le,as as ue,ae as ce,aY as de,o as me,fM as fe,am as pe,dZ as he,af as ge,dU as ye,al as be,el as ve,fN as we,fO as xe,fP as Ne,fQ as De,fR as Ee,fS as Se,fT as Oe,fU as ke,fV as _e,eZ as je,fW as Ce,fX as Pe,bl as Re,fY as ze,fZ as Me,dq as Te,a4 as Le,u as Ve,f_ as Ie,f$ as He,g0 as Ae,g1 as We,g2 as qe,g3 as Be,g4 as Ge,t as Fe,dp as Ue,g5 as Ye,dG as Xe,dF as $e,g6 as Ke,bZ as Qe}from"./index-fAEDBZCg.js";
/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=o("AlignEndVertical",[["rect",{width:"16",height:"6",x:"2",y:"4",rx:"2",key:"10wcwx"}],["rect",{width:"9",height:"6",x:"9",y:"14",rx:"2",key:"4p5bwg"}],["path",{d:"M22 22V2",key:"12ipfv"}]]),Je=o("AlignHorizontalSpaceAround",[["rect",{width:"6",height:"10",x:"9",y:"7",rx:"2",key:"yn7j0q"}],["path",{d:"M4 22V2",key:"tsjzd3"}],["path",{d:"M20 22V2",key:"1bnhr8"}]]),et=o("AlignStartVertical",[["rect",{width:"9",height:"6",x:"6",y:"14",rx:"2",key:"lpm2y7"}],["rect",{width:"16",height:"6",x:"6",y:"4",rx:"2",key:"rdj6ps"}],["path",{d:"M2 2v20",key:"1ivd8o"}]]),tt=o("FolderDown",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"m15 13-3 3-3-3",key:"6j2sf0"}]]),rt=o("GripHorizontal",[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]]),ot=o("Hourglass",[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]]),nt=o("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),it=o("Scroll",[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]),at=o("Unlink",[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]]),st=class e{constructor(t){r(this,"_sendComponentValues"),r(this,"handleReadyEvent",(e=>{const t=e.detail.objectId;if(!this.uiElementRegistry.has(t))return;const r=this.uiElementRegistry.lookupValue(t);void 0!==r&&this.sendComponentValues([{objectId:t,value:r}]).catch((e=>{s.warn(e)}))})),this.uiElementRegistry=t,n(e.INSTANCE,"RuntimeState")}get sendComponentValues(){if(!this._sendComponentValues)throw new Error("sendComponentValues is not set");return this._sendComponentValues}start(e){this._sendComponentValues=e,document.addEventListener(a,this.handleReadyEvent)}stop(){document.removeEventListener(a,this.handleReadyEvent)}};
/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */r(st,"INSTANCE",new st(i));let lt=st;var ut={exports:{}},ct={},dt={exports:{}};!function(e){function t(e){return function(t,r,o,n,i,a,s){return e(t,r,s)}}function r(e){return function(t,r,o,n){if(!t||!r||"object"!=typeof t||"object"!=typeof r)return e(t,r,o,n);var i=n.get(t),a=n.get(r);if(i&&a)return i===r&&a===t;n.set(t,r),n.set(r,t);var s=e(t,r,o,n);return n.delete(t),n.delete(r),s}}function o(e,t){var r={};for(var o in e)r[o]=e[o];for(var o in t)r[o]=t[o];return r}function n(e){return e.constructor===Object||null==e.constructor}function i(e){return"function"==typeof e.then}function a(e,t){return e===t||e!=e&&t!=t}var s="[object Arguments]",l="[object Boolean]",u="[object Date]",c="[object RegExp]",d="[object Map]",m="[object Number]",f="[object Object]",p="[object Set]",h="[object String]",g=Object.prototype.toString;function y(e){var t=e.areArraysEqual,r=e.areDatesEqual,o=e.areMapsEqual,y=e.areObjectsEqual,b=e.areRegExpsEqual,v=e.areSetsEqual,w=(0,e.createIsNestedEqual)(x);function x(e,x,N){if(e===x)return!0;if(!e||!x||"object"!=typeof e||"object"!=typeof x)return e!=e&&x!=x;if(n(e)&&n(x))return y(e,x,w,N);var D=Array.isArray(e),E=Array.isArray(x);if(D||E)return D===E&&t(e,x,w,N);var S=g.call(e);return S===g.call(x)&&(S===u?r(e,x,w,N):S===c?b(e,x,w,N):S===d?o(e,x,w,N):S===p?v(e,x,w,N):S===f||S===s?!i(e)&&!i(x)&&y(e,x,w,N):(S===l||S===m||S===h)&&a(e.valueOf(),x.valueOf()))}return x}function b(e,t,r,o){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r(e[n],t[n],n,n,e,t,o))return!1;return!0}var v=r(b);function w(e,t){return a(e.valueOf(),t.valueOf())}function x(e,t,r,o){var n=e.size===t.size;if(!n)return!1;if(!e.size)return!0;var i={},a=0;return e.forEach((function(s,l){if(n){var u=!1,c=0;t.forEach((function(n,d){u||i[c]||!(u=r(l,d,a,c,e,t,o)&&r(s,n,l,d,e,t,o))||(i[c]=!0),c++})),a++,n=u}})),n}var N=r(x),D="_owner",E=Object.prototype.hasOwnProperty;function S(e,t,r,o){var n,i=Object.keys(e),a=i.length;if(Object.keys(t).length!==a)return!1;for(;a-- >0;){if((n=i[a])===D){var s=!!e.$$typeof,l=!!t.$$typeof;if((s||l)&&s!==l)return!1}if(!E.call(t,n)||!r(e[n],t[n],n,n,e,t,o))return!1}return!0}var O=r(S);function k(e,t){return e.source===t.source&&e.flags===t.flags}function _(e,t,r,o){var n=e.size===t.size;if(!n)return!1;if(!e.size)return!0;var i={};return e.forEach((function(a,s){if(n){var l=!1,u=0;t.forEach((function(n,c){l||i[u]||!(l=r(a,n,s,c,e,t,o))||(i[u]=!0),u++})),n=l}})),n}var j=r(_),C=Object.freeze({areArraysEqual:b,areDatesEqual:w,areMapsEqual:x,areObjectsEqual:S,areRegExpsEqual:k,areSetsEqual:_,createIsNestedEqual:t}),P=Object.freeze({areArraysEqual:v,areDatesEqual:w,areMapsEqual:N,areObjectsEqual:O,areRegExpsEqual:k,areSetsEqual:j,createIsNestedEqual:t}),R=y(C);function z(e,t){return R(e,t,void 0)}var M=y(o(C,{createIsNestedEqual:function(){return a}}));function T(e,t){return M(e,t,void 0)}var L=y(P);function V(e,t){return L(e,t,new WeakMap)}var I=y(o(P,{createIsNestedEqual:function(){return a}}));function H(e,t){return I(e,t,new WeakMap)}function A(e){return y(o(C,e(C)))}function W(e){var t=y(o(P,e(P)));return function(e,r,o){return void 0===o&&(o=new WeakMap),t(e,r,o)}}e.circularDeepEqual=V,e.circularShallowEqual=H,e.createCustomCircularEqual=W,e.createCustomEqual=A,e.deepEqual=z,e.sameValueZeroEqual=a,e.shallowEqual=T,Object.defineProperty(e,"__esModule",{value:!0})}(dt.exports);var mt=dt.exports,ft={exports:{}};function pt(e){var t,r,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(r=pt(e[t]))&&(o&&(o+=" "),o+=r)}else for(r in e)e[r]&&(o&&(o+=" "),o+=r);return o}function ht(){for(var e,t,r=0,o="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=pt(e))&&(o&&(o+=" "),o+=t);return o}ft.exports=ht,ft.exports.clsx=ht;var gt=ft.exports,yt={};Object.defineProperty(yt,"__esModule",{value:!0}),yt.bottom=xt,yt.childrenEqual=function(e,t){return(0,vt.deepEqual)(wt.default.Children.map(e,(e=>null==e?void 0:e.key)),wt.default.Children.map(t,(e=>null==e?void 0:e.key)))&&(0,vt.deepEqual)(wt.default.Children.map(e,(e=>null==e?void 0:e.props["data-grid"])),wt.default.Children.map(t,(e=>null==e?void 0:e.props["data-grid"])))},yt.cloneLayout=Nt,yt.cloneLayoutItem=Et,yt.collides=St,yt.compact=Ot,yt.compactItem=jt,yt.compactType=function(e){const{verticalCompact:t,compactType:r}=e||{};return!1===t?null:r},yt.correctBounds=Ct,yt.fastPositionEqual=function(e,t){return e.left===t.left&&e.top===t.top&&e.width===t.width&&e.height===t.height},yt.fastRGLPropsEqual=void 0,yt.getAllCollisions=zt,yt.getFirstCollision=Rt,yt.getLayoutItem=Pt,yt.getStatics=Mt,yt.modifyLayout=Dt,yt.moveElement=Tt,yt.moveElementAwayFromCollision=Lt,yt.noop=void 0,yt.perc=function(e){return 100*e+"%"},yt.resizeItemInDirection=function(e,t,r,o){const n=Ft[e];return n?n(t,{...t,...r},o):r},yt.setTopLeft=function(e){let{top:t,left:r,width:o,height:n}=e;return{top:`${t}px`,left:`${r}px`,width:`${o}px`,height:`${n}px`,position:"absolute"}},yt.setTransform=function(e){let{top:t,left:r,width:o,height:n}=e;const i=`translate(${r}px,${t}px)`;return{transform:i,WebkitTransform:i,MozTransform:i,msTransform:i,OTransform:i,width:`${o}px`,height:`${n}px`,position:"absolute"}},yt.sortLayoutItems=Ut,yt.sortLayoutItemsByColRow=Xt,yt.sortLayoutItemsByRowCol=Yt,yt.synchronizeLayoutWithChildren=function(e,t,r,o,n){e=e||[];const i=[];wt.default.Children.forEach(t,(t=>{if(null==(null==t?void 0:t.key))return;const r=Pt(e,String(t.key)),o=t.props["data-grid"];r&&null==o?i.push(Et(r)):o?($t([o],"ReactGridLayout.children"),i.push(Et({...o,i:t.key}))):i.push(Et({w:1,h:1,x:0,y:xt(i),i:String(t.key)}))}));const a=Ct(i,{cols:r});return n?a:Ot(a,o,r)},yt.validateLayout=$t,yt.withLayoutItem=function(e,t,r){let o=Pt(e,t);return o?(o=r(Et(o)),[e=Dt(e,o),o]):[e,null]};var bt,vt=mt,wt=(bt=u)&&bt.__esModule?bt:{default:bt};function xt(e){let t,r=0;for(let o=0,n=e.length;o<n;o++)t=e[o].y+e[o].h,t>r&&(r=t);return r}function Nt(e){const t=Array(e.length);for(let r=0,o=e.length;r<o;r++)t[r]=Et(e[r]);return t}function Dt(e,t){const r=Array(e.length);for(let o=0,n=e.length;o<n;o++)t.i===e[o].i?r[o]=t:r[o]=e[o];return r}function Et(e){return{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,minW:e.minW,maxW:e.maxW,minH:e.minH,maxH:e.maxH,moved:Boolean(e.moved),static:Boolean(e.static),isDraggable:e.isDraggable,isResizable:e.isResizable,resizeHandles:e.resizeHandles,isBounded:e.isBounded}}function St(e,t){return e.i!==t.i&&(!(e.x+e.w<=t.x)&&(!(e.x>=t.x+t.w)&&(!(e.y+e.h<=t.y)&&!(e.y>=t.y+t.h))))}function Ot(e,t,r,o){const n=Mt(e),i=Ut(e,t),a=Array(e.length);for(let s=0,l=i.length;s<l;s++){let l=Et(i[s]);l.static||(l=jt(n,l,t,r,i,o),n.push(l)),a[e.indexOf(i[s])]=l,l.moved=!1}return a}yt.fastRGLPropsEqual=function(e,t,r){return e===t||e.className===t.className&&r(e.style,t.style)&&e.width===t.width&&e.autoSize===t.autoSize&&e.cols===t.cols&&e.draggableCancel===t.draggableCancel&&e.draggableHandle===t.draggableHandle&&r(e.verticalCompact,t.verticalCompact)&&r(e.compactType,t.compactType)&&r(e.layout,t.layout)&&r(e.margin,t.margin)&&r(e.containerPadding,t.containerPadding)&&e.rowHeight===t.rowHeight&&e.maxRows===t.maxRows&&e.isBounded===t.isBounded&&e.isDraggable===t.isDraggable&&e.isResizable===t.isResizable&&e.allowOverlap===t.allowOverlap&&e.preventCollision===t.preventCollision&&e.useCSSTransforms===t.useCSSTransforms&&e.transformScale===t.transformScale&&e.isDroppable===t.isDroppable&&r(e.resizeHandles,t.resizeHandles)&&r(e.resizeHandle,t.resizeHandle)&&e.onLayoutChange===t.onLayoutChange&&e.onDragStart===t.onDragStart&&e.onDrag===t.onDrag&&e.onDragStop===t.onDragStop&&e.onResizeStart===t.onResizeStart&&e.onResize===t.onResize&&e.onResizeStop===t.onResizeStop&&e.onDrop===t.onDrop&&r(e.droppingItem,t.droppingItem)&&r(e.innerRef,t.innerRef)};const kt={x:"w",y:"h"};function _t(e,t,r,o){const n=kt[o];t[o]+=1;for(let i=e.map((e=>e.i)).indexOf(t.i)+1;i<e.length;i++){const a=e[i];if(!a.static){if(a.y>t.y+t.h)break;St(t,a)&&_t(e,a,r+t[n],o)}}t[o]=r}function jt(e,t,r,o,n,i){const a="horizontal"===r;if("vertical"===r)for(t.y=Math.min(xt(e),t.y);t.y>0&&!Rt(e,t);)t.y--;else if(a)for(;t.x>0&&!Rt(e,t);)t.x--;let s;for(;(s=Rt(e,t))&&(null!==r||!i);)if(a?_t(n,t,s.x+s.w,"x"):_t(n,t,s.y+s.h,"y"),a&&t.x+t.w>o)for(t.x=o-t.w,t.y++;t.x>0&&!Rt(e,t);)t.x--;return t.y=Math.max(t.y,0),t.x=Math.max(t.x,0),t}function Ct(e,t){const r=Mt(e);for(let o=0,n=e.length;o<n;o++){const n=e[o];if(n.x+n.w>t.cols&&(n.x=t.cols-n.w),n.x<0&&(n.x=0,n.w=t.cols),n.static)for(;Rt(r,n);)n.y++;else r.push(n)}return e}function Pt(e,t){for(let r=0,o=e.length;r<o;r++)if(e[r].i===t)return e[r]}function Rt(e,t){for(let r=0,o=e.length;r<o;r++)if(St(e[r],t))return e[r]}function zt(e,t){return e.filter((e=>St(e,t)))}function Mt(e){return e.filter((e=>e.static))}function Tt(e,t,r,o,n,i,a,s,l){if(t.static&&!0!==t.isDraggable)return e;if(t.y===o&&t.x===r)return e;t.i,String(r),String(o),t.x,t.y;const u=t.x,c=t.y;"number"==typeof r&&(t.x=r),"number"==typeof o&&(t.y=o),t.moved=!0;let d=Ut(e,a);("vertical"===a&&"number"==typeof o?c>=o:"horizontal"===a&&"number"==typeof r&&u>=r)&&(d=d.reverse());const m=zt(d,t),f=m.length>0;if(f&&l)return Nt(e);if(f&&i)return t.i,t.x=u,t.y=c,t.moved=!1,e;for(let p=0,h=m.length;p<h;p++){const r=m[p];t.i,t.x,t.y,r.i,r.x,r.y,r.moved||(e=r.static?Lt(e,r,t,n,a):Lt(e,t,r,n,a))}return e}function Lt(e,t,r,o,n,i){const a="horizontal"===n,s="vertical"===n,l=t.static;if(o){o=!1;const i={x:a?Math.max(t.x-r.w,0):r.x,y:s?Math.max(t.y-r.h,0):r.y,w:r.w,h:r.h,i:"-1"},u=Rt(e,i),c=u&&u.y+u.h>t.y,d=u&&t.x+t.w>u.x;if(!u)return r.i,i.x,i.y,Tt(e,r,a?i.x:void 0,s?i.y:void 0,o,l,n);if(c&&s)return Tt(e,r,void 0,t.y+1,o,l,n);if(c&&null==n)return t.y=r.y,r.y=r.y+r.h,e;if(d&&a)return Tt(e,t,r.x,void 0,o,l,n)}const u=a?r.x+1:void 0,c=s?r.y+1:void 0;return null==u&&null==c?e:Tt(e,r,a?r.x+1:void 0,s?r.y+1:void 0,o,l,n)}const Vt=(e,t,r,o)=>e+r>o?t:r,It=(e,t,r)=>e<0?t:r,Ht=e=>Math.max(0,e),At=e=>Math.max(0,e),Wt=(e,t,r)=>{let{left:o,height:n,width:i}=t;const a=e.top-(n-e.height);return{left:o,width:i,height:It(a,e.height,n),top:At(a)}},qt=(e,t,r)=>{let{top:o,left:n,height:i,width:a}=t;return{top:o,height:i,width:Vt(e.left,e.width,a,r),left:Ht(n)}},Bt=(e,t,r)=>{let{top:o,height:n,width:i}=t;const a=e.left-(i-e.width);return{height:n,width:a<0?e.width:Vt(e.left,e.width,i,r),top:At(o),left:Ht(a)}},Gt=(e,t,r)=>{let{top:o,left:n,height:i,width:a}=t;return{width:a,left:n,height:It(o,e.height,i),top:At(o)}},Ft={n:Wt,ne:function(){return Wt(arguments.length<=0?void 0:arguments[0],qt(...arguments))},e:qt,se:function(){return Gt(arguments.length<=0?void 0:arguments[0],qt(...arguments))},s:Gt,sw:function(){return Gt(arguments.length<=0?void 0:arguments[0],Bt(...arguments))},w:Bt,nw:function(){return Wt(arguments.length<=0?void 0:arguments[0],Bt(...arguments))}};function Ut(e,t){return"horizontal"===t?Xt(e):"vertical"===t?Yt(e):e}function Yt(e){return e.slice(0).sort((function(e,t){return e.y>t.y||e.y===t.y&&e.x>t.x?1:e.y===t.y&&e.x===t.x?0:-1}))}function Xt(e){return e.slice(0).sort((function(e,t){return e.x>t.x||e.x===t.x&&e.y>t.y?1:-1}))}function $t(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Layout";const r=["x","y","w","h"];if(!Array.isArray(e))throw new Error(t+" must be an array!");for(let o=0,n=e.length;o<n;o++){const n=e[o];for(let e=0;e<r.length;e++)if("number"!=typeof n[r[e]])throw new Error("ReactGridLayout: "+t+"["+o+"]."+r[e]+" must be a number!")}}yt.noop=()=>{};var Kt={};function Qt(e){const{margin:t,containerPadding:r,containerWidth:o,cols:n}=e;return(o-t[0]*(n-1)-2*r[0])/n}function Zt(e,t,r){return Number.isFinite(e)?Math.round(t*e+Math.max(0,e-1)*r):e}function Jt(e,t,r){return Math.max(Math.min(e,r),t)}Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.calcGridColWidth=Qt,Kt.calcGridItemPosition=function(e,t,r,o,n,i){const{margin:a,containerPadding:s,rowHeight:l}=e,u=Qt(e),c={};i&&i.resizing?(c.width=Math.round(i.resizing.width),c.height=Math.round(i.resizing.height)):(c.width=Zt(o,u,a[0]),c.height=Zt(n,l,a[1]));i&&i.dragging?(c.top=Math.round(i.dragging.top),c.left=Math.round(i.dragging.left)):i&&i.resizing&&"number"==typeof i.resizing.top&&"number"==typeof i.resizing.left?(c.top=Math.round(i.resizing.top),c.left=Math.round(i.resizing.left)):(c.top=Math.round((l+a[1])*r+s[1]),c.left=Math.round((u+a[0])*t+s[0]));return c},Kt.calcGridItemWHPx=Zt,Kt.calcWH=function(e,t,r,o,n,i){const{margin:a,maxRows:s,cols:l,rowHeight:u}=e,c=Qt(e);let d=Math.round((t+a[0])/(c+a[0])),m=Math.round((r+a[1])/(u+a[1])),f=Jt(d,0,l-o),p=Jt(m,0,s-n);-1!==["sw","w","nw"].indexOf(i)&&(f=Jt(d,0,l));-1!==["nw","n","ne"].indexOf(i)&&(p=Jt(m,0,s));return{w:f,h:p}},Kt.calcXY=function(e,t,r,o,n){const{margin:i,cols:a,rowHeight:s,maxRows:l}=e,u=Qt(e);let c=Math.round((r-i[0])/(u+i[0])),d=Math.round((t-i[1])/(s+i[1]));return c=Jt(c,0,a-o),d=Jt(d,0,l-n),{x:c,y:d}},Kt.clamp=Jt;var er={},tr={exports:{}},rr={};function or(e){var t,r,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=or(e[t]))&&(o&&(o+=" "),o+=r);else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}function nr(){for(var e,t,r=0,o="";r<arguments.length;)(e=arguments[r++])&&(t=or(e))&&(o&&(o+=" "),o+=t);return o}const ir=c(Object.freeze(Object.defineProperty({__proto__:null,clsx:nr,default:nr},Symbol.toStringTag,{value:"Module"})));var ar={},sr={};Object.defineProperty(sr,"__esModule",{value:!0}),sr.dontSetMe=function(e,t,r){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(r," - do not set this, set it on the child."))},sr.findInArray=function(e,t){for(var r=0,o=e.length;r<o;r++)if(t.apply(t,[e[r],r,e]))return e[r]},sr.int=function(e){return parseInt(e,10)},sr.isFunction=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)},sr.isNum=function(e){return"number"==typeof e&&!isNaN(e)};var lr={};Object.defineProperty(lr,"__esModule",{value:!0}),lr.browserPrefixToKey=dr,lr.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},lr.default=void 0,lr.getPrefix=cr;var ur=["Moz","Webkit","O","ms"];function cr(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window)return"";var o=null===(e=window.document)||void 0===e||null===(t=e.documentElement)||void 0===t?void 0:t.style;if(!o)return"";if(r in o)return"";for(var n=0;n<ur.length;n++)if(dr(r,ur[n])in o)return ur[n];return""}function dr(e,t){return t?"".concat(t).concat(function(e){for(var t="",r=!0,o=0;o<e.length;o++)r?(t+=e[o].toUpperCase(),r=!1):"-"===e[o]?r=!0:t+=e[o];return t}(e)):e}var mr=cr();function fr(e){return(fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}lr.default=mr,Object.defineProperty(ar,"__esModule",{value:!0}),ar.addClassName=Dr,ar.addEvent=function(e,t,r,o){if(!e)return;var n=br({capture:!0},o);e.addEventListener?e.addEventListener(t,r,n):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r},ar.addUserSelectStyles=function(e){if(!e)return;var t=e.getElementById("react-draggable-style-el");t||((t=e.createElement("style")).type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t));e.body&&Dr(e.body,"react-draggable-transparent-selection")},ar.createCSSTransform=function(e,t){var r=Nr(e,t,"px");return vr({},(0,hr.browserPrefixToKey)("transform",hr.default),r)},ar.createSVGTransform=function(e,t){return Nr(e,t,"")},ar.getTouch=function(e,t){return e.targetTouches&&(0,pr.findInArray)(e.targetTouches,(function(e){return t===e.identifier}))||e.changedTouches&&(0,pr.findInArray)(e.changedTouches,(function(e){return t===e.identifier}))},ar.getTouchIdentifier=function(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier},ar.getTranslation=Nr,ar.innerHeight=function(e){var t=e.clientHeight,r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,pr.int)(r.paddingTop),t-=(0,pr.int)(r.paddingBottom)},ar.innerWidth=function(e){var t=e.clientWidth,r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,pr.int)(r.paddingLeft),t-=(0,pr.int)(r.paddingRight)},ar.matchesSelector=xr,ar.matchesSelectorAndParentsTo=function(e,t,r){var o=e;do{if(xr(o,t))return!0;if(o===r)return!1;o=o.parentNode}while(o);return!1},ar.offsetXYFromParent=function(e,t,r){var o=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),n=(e.clientX+t.scrollLeft-o.left)/r,i=(e.clientY+t.scrollTop-o.top)/r;return{x:n,y:i}},ar.outerHeight=function(e){var t=e.clientHeight,r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,pr.int)(r.borderTopWidth),t+=(0,pr.int)(r.borderBottomWidth)},ar.outerWidth=function(e){var t=e.clientWidth,r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,pr.int)(r.borderLeftWidth),t+=(0,pr.int)(r.borderRightWidth)},ar.removeClassName=Er,ar.removeEvent=function(e,t,r,o){if(!e)return;var n=br({capture:!0},o);e.removeEventListener?e.removeEventListener(t,r,n):e.detachEvent?e.detachEvent("on"+t,r):e["on"+t]=null},ar.removeUserSelectStyles=function(e){if(!e)return;try{if(e.body&&Er(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{var t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(r){}};var pr=sr,hr=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==fr(e)&&"function"!=typeof e)return{default:e};var r=gr(t);if(r&&r.has(e))return r.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}o.default=e,r&&r.set(e,o);return o}(lr);function gr(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(gr=function(e){return e?r:t})(e)}function yr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function br(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yr(Object(r),!0).forEach((function(t){vr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var wr="";function xr(e,t){return wr||(wr=(0,pr.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(t){return(0,pr.isFunction)(e[t])}))),!!(0,pr.isFunction)(e[wr])&&e[wr](t)}function Nr(e,t,r){var o=e.x,n=e.y,i="translate(".concat(o).concat(r,",").concat(n).concat(r,")");if(t){var a="".concat("string"==typeof t.x?t.x:t.x+r),s="".concat("string"==typeof t.y?t.y:t.y+r);i="translate(".concat(a,", ").concat(s,")")+i}return i}function Dr(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function Er(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}var Sr={};Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},Sr.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},Sr.createCoreData=function(e,t,r){var o=e.state,n=!(0,Or.isNum)(o.lastX),i=_r(e);return n?{node:i,deltaX:0,deltaY:0,lastX:t,lastY:r,x:t,y:r}:{node:i,deltaX:t-o.lastX,deltaY:r-o.lastY,lastX:o.lastX,lastY:o.lastY,x:t,y:r}},Sr.createDraggableData=function(e,t){var r=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/r,y:e.state.y+t.deltaY/r,deltaX:t.deltaX/r,deltaY:t.deltaY/r,lastX:e.state.x,lastY:e.state.y}},Sr.getBoundPosition=function(e,t,r){if(!e.props.bounds)return[t,r];var o=e.props.bounds;o="string"==typeof o?o:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(o);var n=_r(e);if("string"==typeof o){var i,a=n.ownerDocument,s=a.defaultView;if(!((i="parent"===o?n.parentNode:a.querySelector(o))instanceof s.HTMLElement))throw new Error('Bounds selector "'+o+'" could not find an element.');var l=i,u=s.getComputedStyle(n),c=s.getComputedStyle(l);o={left:-n.offsetLeft+(0,Or.int)(c.paddingLeft)+(0,Or.int)(u.marginLeft),top:-n.offsetTop+(0,Or.int)(c.paddingTop)+(0,Or.int)(u.marginTop),right:(0,kr.innerWidth)(l)-(0,kr.outerWidth)(n)-n.offsetLeft+(0,Or.int)(c.paddingRight)-(0,Or.int)(u.marginRight),bottom:(0,kr.innerHeight)(l)-(0,kr.outerHeight)(n)-n.offsetTop+(0,Or.int)(c.paddingBottom)-(0,Or.int)(u.marginBottom)}}(0,Or.isNum)(o.right)&&(t=Math.min(t,o.right));(0,Or.isNum)(o.bottom)&&(r=Math.min(r,o.bottom));(0,Or.isNum)(o.left)&&(t=Math.max(t,o.left));(0,Or.isNum)(o.top)&&(r=Math.max(r,o.top));return[t,r]},Sr.getControlPosition=function(e,t,r){var o="number"==typeof t?(0,kr.getTouch)(e,t):null;if("number"==typeof t&&!o)return null;var n=_r(r),i=r.props.offsetParent||n.offsetParent||n.ownerDocument.body;return(0,kr.offsetXYFromParent)(o||e,i,r.props.scale)},Sr.snapToGrid=function(e,t,r){var o=Math.round(t/e[0])*e[0],n=Math.round(r/e[1])*e[1];return[o,n]};var Or=sr,kr=ar;function _r(e){var t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var jr={},Cr={};function Pr(e){return(Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.default=function(){},Object.defineProperty(jr,"__esModule",{value:!0}),jr.default=void 0;var Rr=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==Pr(e)&&"function"!=typeof e)return{default:e};var r=Ar(t);if(r&&r.has(e))return r.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}o.default=e,r&&r.set(e,o);return o}(u),zr=Hr(d),Mr=Hr(m),Tr=ar,Lr=Sr,Vr=sr,Ir=Hr(Cr);function Hr(e){return e&&e.__esModule?e:{default:e}}function Ar(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(Ar=function(e){return e?r:t})(e)}function Wr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var o,n,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(o=r.next()).done)&&(i.push(o.value),!t||i.length!==t);a=!0);}catch(l){s=!0,n=l}finally{try{a||null==r.return||r.return()}finally{if(s)throw n}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return qr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function Br(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Gr(e,t){return(Gr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=Yr(e);if(t){var n=Yr(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return function(e,t){if(t&&("object"===Pr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ur(e)}(this,r)}}function Ur(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yr(e){return(Yr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $r={start:"touchstart",move:"touchmove",stop:"touchend"},Kr={start:"mousedown",move:"mousemove",stop:"mouseup"},Qr=Kr,Zr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gr(e,t)}(i,Rr.Component);var t,r,o,n=Fr(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return Xr(Ur(e=n.call.apply(n,[this].concat(r))),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),Xr(Ur(e),"mounted",!1),Xr(Ur(e),"handleDragStart",(function(t){if(e.props.onMouseDown(t),!e.props.allowAnyClick&&"number"==typeof t.button&&0!==t.button)return!1;var r=e.findDOMNode();if(!r||!r.ownerDocument||!r.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var o=r.ownerDocument;if(!(e.props.disabled||!(t.target instanceof o.defaultView.Node)||e.props.handle&&!(0,Tr.matchesSelectorAndParentsTo)(t.target,e.props.handle,r)||e.props.cancel&&(0,Tr.matchesSelectorAndParentsTo)(t.target,e.props.cancel,r))){"touchstart"===t.type&&t.preventDefault();var n=(0,Tr.getTouchIdentifier)(t);e.setState({touchIdentifier:n});var i=(0,Lr.getControlPosition)(t,n,Ur(e));if(null!=i){var a=i.x,s=i.y,l=(0,Lr.createCoreData)(Ur(e),a,s);(0,Ir.default)("DraggableCore: handleDragStart: %j",l),(0,Ir.default)("calling",e.props.onStart),!1!==e.props.onStart(t,l)&&!1!==e.mounted&&(e.props.enableUserSelectHack&&(0,Tr.addUserSelectStyles)(o),e.setState({dragging:!0,lastX:a,lastY:s}),(0,Tr.addEvent)(o,Qr.move,e.handleDrag),(0,Tr.addEvent)(o,Qr.stop,e.handleDragStop))}}})),Xr(Ur(e),"handleDrag",(function(t){var r=(0,Lr.getControlPosition)(t,e.state.touchIdentifier,Ur(e));if(null!=r){var o=r.x,n=r.y;if(Array.isArray(e.props.grid)){var i=o-e.state.lastX,a=n-e.state.lastY,s=Wr((0,Lr.snapToGrid)(e.props.grid,i,a),2);if(i=s[0],a=s[1],!i&&!a)return;o=e.state.lastX+i,n=e.state.lastY+a}var l=(0,Lr.createCoreData)(Ur(e),o,n);if((0,Ir.default)("DraggableCore: handleDrag: %j",l),!1!==e.props.onDrag(t,l)&&!1!==e.mounted)e.setState({lastX:o,lastY:n});else try{e.handleDragStop(new MouseEvent("mouseup"))}catch(c){var u=document.createEvent("MouseEvents");u.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.handleDragStop(u)}}})),Xr(Ur(e),"handleDragStop",(function(t){if(e.state.dragging){var r=(0,Lr.getControlPosition)(t,e.state.touchIdentifier,Ur(e));if(null!=r){var o=r.x,n=r.y;if(Array.isArray(e.props.grid)){var i=o-e.state.lastX||0,a=n-e.state.lastY||0,s=Wr((0,Lr.snapToGrid)(e.props.grid,i,a),2);i=s[0],a=s[1],o=e.state.lastX+i,n=e.state.lastY+a}var l=(0,Lr.createCoreData)(Ur(e),o,n);if(!1===e.props.onStop(t,l)||!1===e.mounted)return!1;var u=e.findDOMNode();u&&e.props.enableUserSelectHack&&(0,Tr.removeUserSelectStyles)(u.ownerDocument),(0,Ir.default)("DraggableCore: handleDragStop: %j",l),e.setState({dragging:!1,lastX:NaN,lastY:NaN}),u&&((0,Ir.default)("DraggableCore: Removing handlers"),(0,Tr.removeEvent)(u.ownerDocument,Qr.move,e.handleDrag),(0,Tr.removeEvent)(u.ownerDocument,Qr.stop,e.handleDragStop))}}})),Xr(Ur(e),"onMouseDown",(function(t){return Qr=Kr,e.handleDragStart(t)})),Xr(Ur(e),"onMouseUp",(function(t){return Qr=Kr,e.handleDragStop(t)})),Xr(Ur(e),"onTouchStart",(function(t){return Qr=$r,e.handleDragStart(t)})),Xr(Ur(e),"onTouchEnd",(function(t){return Qr=$r,e.handleDragStop(t)})),e}return t=i,(r=[{key:"componentDidMount",value:function(){this.mounted=!0;var e=this.findDOMNode();e&&(0,Tr.addEvent)(e,$r.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.findDOMNode();if(e){var t=e.ownerDocument;(0,Tr.removeEvent)(t,Kr.move,this.handleDrag),(0,Tr.removeEvent)(t,$r.move,this.handleDrag),(0,Tr.removeEvent)(t,Kr.stop,this.handleDragStop),(0,Tr.removeEvent)(t,$r.stop,this.handleDragStop),(0,Tr.removeEvent)(e,$r.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Tr.removeUserSelectStyles)(t)}}},{key:"findDOMNode",value:function(){var e,t,r;return null!==(e=this.props)&&void 0!==e&&e.nodeRef?null===(t=this.props)||void 0===t||null===(r=t.nodeRef)||void 0===r?void 0:r.current:Mr.default.findDOMNode(this)}},{key:"render",value:function(){return Rr.cloneElement(Rr.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}])&&Br(t.prototype,r),o&&Br(t,o),Object.defineProperty(t,"prototype",{writable:!1}),i}();jr.default=Zr,Xr(Zr,"displayName","DraggableCore"),Xr(Zr,"propTypes",{allowAnyClick:zr.default.bool,disabled:zr.default.bool,enableUserSelectHack:zr.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:zr.default.arrayOf(zr.default.number),handle:zr.default.string,cancel:zr.default.string,nodeRef:zr.default.object,onStart:zr.default.func,onDrag:zr.default.func,onStop:zr.default.func,onMouseDown:zr.default.func,scale:zr.default.number,className:Vr.dontSetMe,style:Vr.dontSetMe,transform:Vr.dontSetMe}),Xr(Zr,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),e.default=void 0;var r=function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var o=g(r);if(o&&o.has(e))return o.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}n.default=e,o&&o.set(e,n);return n}(u),o=h(d),n=h(m),i=h(ir),a=ar,s=Sr,l=sr,c=h(jr),f=h(Cr),p=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function h(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function y(){return y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},y.apply(this,arguments)}function b(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var o,n,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(o=r.next()).done)&&(i.push(o.value),!t||i.length!==t);a=!0);}catch(l){s=!0,n=l}finally{try{a||null==r.return||r.return()}finally{if(s)throw n}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function D(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,n=k(e);if(r){var i=k(this).constructor;o=Reflect.construct(n,arguments,i)}else o=n.apply(this,arguments);return function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}(this,o)}}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(d,e);var t,o,l,u=S(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),_(O(t=u.call(this,e)),"onDragStart",(function(e,r){if((0,f.default)("Draggable: onDragStart: %j",r),!1===t.props.onStart(e,(0,s.createDraggableData)(O(t),r)))return!1;t.setState({dragging:!0,dragged:!0})})),_(O(t),"onDrag",(function(e,r){if(!t.state.dragging)return!1;(0,f.default)("Draggable: onDrag: %j",r);var o=(0,s.createDraggableData)(O(t),r),n={x:o.x,y:o.y};if(t.props.bounds){var i=n.x,a=n.y;n.x+=t.state.slackX,n.y+=t.state.slackY;var l=x((0,s.getBoundPosition)(O(t),n.x,n.y),2),u=l[0],c=l[1];n.x=u,n.y=c,n.slackX=t.state.slackX+(i-n.x),n.slackY=t.state.slackY+(a-n.y),o.x=n.x,o.y=n.y,o.deltaX=n.x-t.state.x,o.deltaY=n.y-t.state.y}if(!1===t.props.onDrag(e,o))return!1;t.setState(n)})),_(O(t),"onDragStop",(function(e,r){if(!t.state.dragging)return!1;if(!1===t.props.onStop(e,(0,s.createDraggableData)(O(t),r)))return!1;(0,f.default)("Draggable: onDragStop: %j",r);var o={dragging:!1,slackX:0,slackY:0};if(Boolean(t.props.position)){var n=t.props.position,i=n.x,a=n.y;o.x=i,o.y=a}t.setState(o)})),t.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:w({},e.position),slackX:0,slackY:0,isElementSVG:!1},!e.position||e.onDrag||e.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),t}return t=d,l=[{key:"getDerivedStateFromProps",value:function(e,t){var r=e.position,o=t.prevPropsPosition;return!r||o&&r.x===o.x&&r.y===o.y?null:((0,f.default)("Draggable: getDerivedStateFromProps %j",{position:r,prevPropsPosition:o}),{x:r.x,y:r.y,prevPropsPosition:w({},r)})}}],(o=[{key:"componentDidMount",value:function(){void 0!==window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var e,t,r;return null!==(e=null===(t=this.props)||void 0===t||null===(r=t.nodeRef)||void 0===r?void 0:r.current)&&void 0!==e?e:n.default.findDOMNode(this)}},{key:"render",value:function(){var e,t=this.props;t.axis,t.bounds;var o=t.children,n=t.defaultPosition,l=t.defaultClassName,u=t.defaultClassNameDragging,d=t.defaultClassNameDragged,m=t.position,f=t.positionOffset;t.scale;var h=b(t,p),g={},v=null,x=!Boolean(m)||this.state.dragging,N=m||n,D={x:(0,s.canDragX)(this)&&x?this.state.x:N.x,y:(0,s.canDragY)(this)&&x?this.state.y:N.y};this.state.isElementSVG?v=(0,a.createSVGTransform)(D,f):g=(0,a.createCSSTransform)(D,f);var E=(0,i.default)(o.props.className||"",l,(_(e={},u,this.state.dragging),_(e,d,this.state.dragged),e));return r.createElement(c.default,y({},h,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),r.cloneElement(r.Children.only(o),{className:E,style:w(w({},o.props.style),g),transform:v}))}}])&&D(t.prototype,o),l&&D(t,l),Object.defineProperty(t,"prototype",{writable:!1}),d}(r.Component);e.default=j,_(j,"displayName","Draggable"),_(j,"propTypes",w(w({},c.default.propTypes),{},{axis:o.default.oneOf(["both","x","y","none"]),bounds:o.default.oneOfType([o.default.shape({left:o.default.number,right:o.default.number,top:o.default.number,bottom:o.default.number}),o.default.string,o.default.oneOf([!1])]),defaultClassName:o.default.string,defaultClassNameDragging:o.default.string,defaultClassNameDragged:o.default.string,defaultPosition:o.default.shape({x:o.default.number,y:o.default.number}),positionOffset:o.default.shape({x:o.default.oneOfType([o.default.number,o.default.string]),y:o.default.oneOfType([o.default.number,o.default.string])}),position:o.default.shape({x:o.default.number,y:o.default.number}),className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe})),_(j,"defaultProps",w(w({},c.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))}(rr);var Jr=rr.default,eo=rr.DraggableCore;tr.exports=Jr,tr.exports.default=Jr,tr.exports.DraggableCore=eo;var to=tr.exports,ro={exports:{}},oo={},no={__esModule:!0,cloneElement:function(e,t){t.style&&e.props.style&&(t.style=so(so({},e.props.style),t.style));t.className&&e.props.className&&(t.className=e.props.className+" "+t.className);return io.default.cloneElement(e,t)}},io=function(e){return e&&e.__esModule?e:{default:e}}(u);function ao(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function so(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ao(Object(r),!0).forEach((function(t){lo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ao(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function lo(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var uo={__esModule:!0,resizableProps:void 0},co=function(e){return e&&e.__esModule?e:{default:e}}(d);var mo={axis:co.default.oneOf(["both","x","y","none"]),className:co.default.string,children:co.default.element.isRequired,draggableOpts:co.default.shape({allowAnyClick:co.default.bool,cancel:co.default.string,children:co.default.node,disabled:co.default.bool,enableUserSelectHack:co.default.bool,offsetParent:co.default.node,grid:co.default.arrayOf(co.default.number),handle:co.default.string,nodeRef:co.default.object,onStart:co.default.func,onDrag:co.default.func,onStop:co.default.func,onMouseDown:co.default.func,scale:co.default.number}),height:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var o,n=t[0];return"both"===n.axis||"y"===n.axis?(o=co.default.number).isRequired.apply(o,t):co.default.number.apply(co.default,t)},handle:co.default.oneOfType([co.default.node,co.default.func]),handleSize:co.default.arrayOf(co.default.number),lockAspectRatio:co.default.bool,maxConstraints:co.default.arrayOf(co.default.number),minConstraints:co.default.arrayOf(co.default.number),onResizeStop:co.default.func,onResizeStart:co.default.func,onResize:co.default.func,resizeHandles:co.default.arrayOf(co.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:co.default.number,width:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var o,n=t[0];return"both"===n.axis||"x"===n.axis?(o=co.default.number).isRequired.apply(o,t):co.default.number.apply(co.default,t)}};uo.resizableProps=mo,oo.__esModule=!0,oo.default=void 0;var fo=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=bo(t);if(r&&r.has(e))return r.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}o.default=e,r&&r.set(e,o);return o}(u),po=to,ho=no,go=uo,yo=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function bo(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(bo=function(e){return e?r:t})(e)}function vo(){return vo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},vo.apply(this,arguments)}function wo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function xo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wo(Object(r),!0).forEach((function(t){No(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function No(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Do(e,t){return(Do=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Eo=function(e){var t,r;function o(){for(var t,r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))||this).handleRefs={},t.lastHandleRect=null,t.slack=null,t}r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,Do(t,r);var n=o.prototype;return n.componentWillUnmount=function(){this.resetData()},n.resetData=function(){this.lastHandleRect=this.slack=null},n.runConstraints=function(e,t){var r=this.props,o=r.minConstraints,n=r.maxConstraints,i=r.lockAspectRatio;if(!o&&!n&&!i)return[e,t];if(i){var a=this.props.width/this.props.height,s=e-this.props.width,l=t-this.props.height;Math.abs(s)>Math.abs(l*a)?t=e/a:e=t*a}var u=e,c=t,d=this.slack||[0,0],m=d[0],f=d[1];return e+=m,t+=f,o&&(e=Math.max(o[0],e),t=Math.max(o[1],t)),n&&(e=Math.min(n[0],e),t=Math.min(n[1],t)),this.slack=[m+(u-e),f+(c-t)],[e,t]},n.resizeHandler=function(e,t){var r=this;return function(o,n){var i=n.node,a=n.deltaX,s=n.deltaY;"onResizeStart"===e&&r.resetData();var l=("both"===r.props.axis||"x"===r.props.axis)&&"n"!==t&&"s"!==t,u=("both"===r.props.axis||"y"===r.props.axis)&&"e"!==t&&"w"!==t;if(l||u){var c=t[0],d=t[t.length-1],m=i.getBoundingClientRect();if(null!=r.lastHandleRect){if("w"===d)a+=m.left-r.lastHandleRect.left;if("n"===c)s+=m.top-r.lastHandleRect.top}r.lastHandleRect=m,"w"===d&&(a=-a),"n"===c&&(s=-s);var f=r.props.width+(l?a/r.props.transformScale:0),p=r.props.height+(u?s/r.props.transformScale:0),h=r.runConstraints(f,p);f=h[0],p=h[1];var g=f!==r.props.width||p!==r.props.height,y="function"==typeof r.props[e]?r.props[e]:null;y&&!("onResize"===e&&!g)&&(null==o.persist||o.persist(),y(o,{node:i,size:{width:f,height:p},handle:t})),"onResizeStop"===e&&r.resetData()}}},n.renderResizeHandle=function(e,t){var r=this.props.handle;if(!r)return fo.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+e,ref:t});if("function"==typeof r)return r(e,t);var o=xo({ref:t},"string"==typeof r.type?{}:{handleAxis:e});return fo.cloneElement(r,o)},n.render=function(){var e=this,t=this.props,r=t.children,o=t.className,n=t.draggableOpts;t.width,t.height,t.handle,t.handleSize,t.lockAspectRatio,t.axis,t.minConstraints,t.maxConstraints,t.onResize,t.onResizeStop,t.onResizeStart;var i=t.resizeHandles;t.transformScale;var a=function(e,t){if(null==e)return{};var r,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(t,yo);return(0,ho.cloneElement)(r,xo(xo({},a),{},{className:(o?o+" ":"")+"react-resizable",children:[].concat(r.props.children,i.map((function(t){var r,o=null!=(r=e.handleRefs[t])?r:e.handleRefs[t]=fo.createRef();return fo.createElement(po.DraggableCore,vo({},n,{nodeRef:o,key:"resizableHandle-"+t,onStop:e.resizeHandler("onResizeStop",t),onStart:e.resizeHandler("onResizeStart",t),onDrag:e.resizeHandler("onResize",t)}),e.renderResizeHandle(t,o))})))}))},o}(fo.Component);oo.default=Eo,Eo.propTypes=go.resizableProps,Eo.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1};var So={__esModule:!0,default:void 0},Oo=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=Ro(t);if(r&&r.has(e))return r.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}o.default=e,r&&r.set(e,o);return o}(u),ko=Po(d),_o=Po(oo),jo=uo,Co=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function Po(e){return e&&e.__esModule?e:{default:e}}function Ro(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(Ro=function(e){return e?r:t})(e)}function zo(){return zo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},zo.apply(this,arguments)}function Mo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function To(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mo(Object(r),!0).forEach((function(t){Lo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Lo(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vo(e,t){return(Vo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Io=function(e){var t,r;function o(){for(var t,r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))||this).state={width:t.props.width,height:t.props.height,propsWidth:t.props.width,propsHeight:t.props.height},t.onResize=function(e,r){var o=r.size;t.props.onResize?(null==e.persist||e.persist(),t.setState(o,(function(){return t.props.onResize&&t.props.onResize(e,r)}))):t.setState(o)},t}return r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,Vo(t,r),o.getDerivedStateFromProps=function(e,t){return t.propsWidth!==e.width||t.propsHeight!==e.height?{width:e.width,height:e.height,propsWidth:e.width,propsHeight:e.height}:null},o.prototype.render=function(){var e=this.props,t=e.handle,r=e.handleSize;e.onResize;var o=e.onResizeStart,n=e.onResizeStop,i=e.draggableOpts,a=e.minConstraints,s=e.maxConstraints,l=e.lockAspectRatio,u=e.axis;e.width,e.height;var c=e.resizeHandles,d=e.style,m=e.transformScale,f=function(e,t){if(null==e)return{};var r,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,Co);return Oo.createElement(_o.default,{axis:u,draggableOpts:i,handle:t,handleSize:r,height:this.state.height,lockAspectRatio:l,maxConstraints:s,minConstraints:a,onResizeStart:o,onResize:this.onResize,onResizeStop:n,resizeHandles:c,transformScale:m,width:this.state.width},Oo.createElement("div",zo({},f,{style:To(To({},d),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},o}(Oo.Component);So.default=Io,Io.propTypes=To(To({},jo.resizableProps),{},{children:ko.default.element}),ro.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")},ro.exports.Resizable=oo.default,ro.exports.ResizableBox=So.default;var Ho=ro.exports,Ao={};Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.resizeHandleType=Ao.resizeHandleAxesType=Ao.default=void 0;var Wo=Bo(d),qo=Bo(u);function Bo(e){return e&&e.__esModule?e:{default:e}}const Go=Ao.resizeHandleAxesType=Wo.default.arrayOf(Wo.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),Fo=Ao.resizeHandleType=Wo.default.oneOfType([Wo.default.node,Wo.default.func]);Ao.default={className:Wo.default.string,style:Wo.default.object,width:Wo.default.number,autoSize:Wo.default.bool,cols:Wo.default.number,draggableCancel:Wo.default.string,draggableHandle:Wo.default.string,verticalCompact:function(e){!1===e.verticalCompact&&console.warn('`verticalCompact` on <ReactGridLayout> is deprecated and will be removed soon. Use `compactType`: "horizontal" | "vertical" | null.')},compactType:Wo.default.oneOf(["vertical","horizontal"]),layout:function(e){var t=e.layout;void 0!==t&&yt.validateLayout(t,"layout")},margin:Wo.default.arrayOf(Wo.default.number),containerPadding:Wo.default.arrayOf(Wo.default.number),rowHeight:Wo.default.number,maxRows:Wo.default.number,isBounded:Wo.default.bool,isDraggable:Wo.default.bool,isResizable:Wo.default.bool,allowOverlap:Wo.default.bool,preventCollision:Wo.default.bool,useCSSTransforms:Wo.default.bool,transformScale:Wo.default.number,isDroppable:Wo.default.bool,resizeHandles:Go,resizeHandle:Fo,onLayoutChange:Wo.default.func,onDragStart:Wo.default.func,onDrag:Wo.default.func,onDragStop:Wo.default.func,onResizeStart:Wo.default.func,onResize:Wo.default.func,onResizeStop:Wo.default.func,onDrop:Wo.default.func,droppingItem:Wo.default.shape({i:Wo.default.string.isRequired,w:Wo.default.number.isRequired,h:Wo.default.number.isRequired}),children:function(e,t){const r=e[t],o={};qo.default.Children.forEach(r,(function(e){if(null!=(null==e?void 0:e.key)){if(o[e.key])throw new Error('Duplicate child key "'+e.key+'" found! This will cause problems in ReactGridLayout.');o[e.key]=!0}}))},innerRef:Wo.default.any},Object.defineProperty(er,"__esModule",{value:!0}),er.default=void 0;var Uo=en(u),Yo=en(d),Xo=to,$o=Ho,Ko=yt,Qo=Kt,Zo=Ao,Jo=en(gt);function en(e){return e&&e.__esModule?e:{default:e}}function tn(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class rn extends Uo.default.Component{constructor(){super(...arguments),tn(this,"state",{resizing:null,dragging:null,className:""}),tn(this,"elementRef",Uo.default.createRef()),tn(this,"onDragStart",((e,t)=>{let{node:r}=t;const{onDragStart:o,transformScale:n}=this.props;if(!o)return;const i={top:0,left:0},{offsetParent:a}=r;if(!a)return;const s=a.getBoundingClientRect(),l=r.getBoundingClientRect(),u=l.left/n,c=s.left/n,d=l.top/n,m=s.top/n;i.left=u-c+a.scrollLeft,i.top=d-m+a.scrollTop,this.setState({dragging:i});const{x:f,y:p}=(0,Qo.calcXY)(this.getPositionParams(),i.top,i.left,this.props.w,this.props.h);return o.call(this,this.props.i,f,p,{e:e,node:r,newPosition:i})})),tn(this,"onDrag",((e,t)=>{let{node:r,deltaX:o,deltaY:n}=t;const{onDrag:i}=this.props;if(!i)return;if(!this.state.dragging)throw new Error("onDrag called before onDragStart.");let a=this.state.dragging.top+n,s=this.state.dragging.left+o;const{isBounded:l,i:u,w:c,h:d,containerWidth:m}=this.props,f=this.getPositionParams();if(l){const{offsetParent:e}=r;if(e){const{margin:t,rowHeight:r,containerPadding:o}=this.props,n=e.clientHeight-(0,Qo.calcGridItemWHPx)(d,r,t[1]);a=(0,Qo.clamp)(a-o[1],0,n);const i=(0,Qo.calcGridColWidth)(f),l=m-(0,Qo.calcGridItemWHPx)(c,i,t[0]);s=(0,Qo.clamp)(s-o[0],0,l)}}const p={top:a,left:s};this.setState({dragging:p});const{containerPadding:h}=this.props,{x:g,y:y}=(0,Qo.calcXY)(f,a-h[1],s-h[0],c,d);return i.call(this,u,g,y,{e:e,node:r,newPosition:p})})),tn(this,"onDragStop",((e,t)=>{let{node:r}=t;const{onDragStop:o}=this.props;if(!o)return;if(!this.state.dragging)throw new Error("onDragEnd called before onDragStart.");const{w:n,h:i,i:a,containerPadding:s}=this.props,{left:l,top:u}=this.state.dragging,c={top:u,left:l};this.setState({dragging:null});const{x:d,y:m}=(0,Qo.calcXY)(this.getPositionParams(),u-s[1],l-s[0],n,i);return o.call(this,a,d,m,{e:e,node:r,newPosition:c})})),tn(this,"onResizeStop",((e,t,r)=>this.onResizeHandler(e,t,r,"onResizeStop"))),tn(this,"onResizeStart",((e,t,r)=>this.onResizeHandler(e,t,r,"onResizeStart"))),tn(this,"onResize",((e,t,r)=>this.onResizeHandler(e,t,r,"onResize")))}shouldComponentUpdate(e,t){if(this.props.children!==e.children)return!0;if(this.props.droppingPosition!==e.droppingPosition)return!0;const r=(0,Qo.calcGridItemPosition)(this.getPositionParams(this.props),this.props.x,this.props.y,this.props.w,this.props.h,this.state),o=(0,Qo.calcGridItemPosition)(this.getPositionParams(e),e.x,e.y,e.w,e.h,t);return!(0,Ko.fastPositionEqual)(r,o)||this.props.useCSSTransforms!==e.useCSSTransforms}componentDidMount(){this.moveDroppingItem({})}componentDidUpdate(e){this.moveDroppingItem(e)}moveDroppingItem(e){const{droppingPosition:t}=this.props;if(!t)return;const r=this.elementRef.current;if(!r)return;const o=e.droppingPosition||{left:0,top:0},{dragging:n}=this.state,i=n&&t.left!==o.left||t.top!==o.top;if(n){if(i){const e=t.left-n.left,o=t.top-n.top;this.onDrag(t.e,{node:r,deltaX:e,deltaY:o})}}else this.onDragStart(t.e,{node:r,deltaX:t.left,deltaY:t.top})}getPositionParams(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return{cols:e.cols,containerPadding:e.containerPadding,containerWidth:e.containerWidth,margin:e.margin,maxRows:e.maxRows,rowHeight:e.rowHeight}}createStyle(e){const{usePercentages:t,containerWidth:r,useCSSTransforms:o}=this.props;let n;return o?n=(0,Ko.setTransform)(e):(n=(0,Ko.setTopLeft)(e),t&&(n.left=(0,Ko.perc)(e.left/r),n.width=(0,Ko.perc)(e.width/r))),n}mixinDraggable(e,t){return Uo.default.createElement(Xo.DraggableCore,{disabled:!t,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,handle:this.props.handle,cancel:".react-resizable-handle"+(this.props.cancel?","+this.props.cancel:""),scale:this.props.transformScale,nodeRef:this.elementRef},e)}curryResizeHandler(e,t){return(r,o)=>t(r,o,e)}mixinResizable(e,t,r){const{cols:o,minW:n,minH:i,maxW:a,maxH:s,transformScale:l,resizeHandles:u,resizeHandle:c}=this.props,d=this.getPositionParams(),m=(0,Qo.calcGridItemPosition)(d,0,0,o,0).width,f=(0,Qo.calcGridItemPosition)(d,0,0,n,i),p=(0,Qo.calcGridItemPosition)(d,0,0,a,s),h=[f.width,f.height],g=[Math.min(p.width,m),Math.min(p.height,1/0)];return Uo.default.createElement($o.Resizable,{draggableOpts:{disabled:!r},className:r?void 0:"react-resizable-hide",width:t.width,height:t.height,minConstraints:h,maxConstraints:g,onResizeStop:this.curryResizeHandler(t,this.onResizeStop),onResizeStart:this.curryResizeHandler(t,this.onResizeStart),onResize:this.curryResizeHandler(t,this.onResize),transformScale:l,resizeHandles:u,handle:c},e)}onResizeHandler(e,t,r,o){let{node:n,size:i,handle:a}=t;const s=this.props[o];if(!s)return;const{x:l,y:u,i:c,maxH:d,minH:m,containerWidth:f}=this.props,{minW:p,maxW:h}=this.props;let g=i;n&&(g=(0,Ko.resizeItemInDirection)(a,r,i,f),this.setState({resizing:"onResizeStop"===o?null:g}));let{w:y,h:b}=(0,Qo.calcWH)(this.getPositionParams(),g.width,g.height,l,u,a);y=(0,Qo.clamp)(y,Math.max(p,1),h),b=(0,Qo.clamp)(b,m,d),s.call(this,c,y,b,{e:e,node:n,size:g,handle:a})}render(){const{x:e,y:t,w:r,h:o,isDraggable:n,isResizable:i,droppingPosition:a,useCSSTransforms:s}=this.props,l=(0,Qo.calcGridItemPosition)(this.getPositionParams(),e,t,r,o,this.state),u=Uo.default.Children.only(this.props.children);let c=Uo.default.cloneElement(u,{ref:this.elementRef,className:(0,Jo.default)("react-grid-item",u.props.className,this.props.className,{static:this.props.static,resizing:Boolean(this.state.resizing),"react-draggable":n,"react-draggable-dragging":Boolean(this.state.dragging),dropping:Boolean(a),cssTransforms:s}),style:{...this.props.style,...u.props.style,...this.createStyle(l)}});return c=this.mixinResizable(c,l,i),c=this.mixinDraggable(c,n),c}}er.default=rn,tn(rn,"propTypes",{children:Yo.default.element,cols:Yo.default.number.isRequired,containerWidth:Yo.default.number.isRequired,rowHeight:Yo.default.number.isRequired,margin:Yo.default.array.isRequired,maxRows:Yo.default.number.isRequired,containerPadding:Yo.default.array.isRequired,x:Yo.default.number.isRequired,y:Yo.default.number.isRequired,w:Yo.default.number.isRequired,h:Yo.default.number.isRequired,minW:function(e,t){const r=e[t];return"number"!=typeof r?new Error("minWidth not Number"):r>e.w||r>e.maxW?new Error("minWidth larger than item width/maxWidth"):void 0},maxW:function(e,t){const r=e[t];return"number"!=typeof r?new Error("maxWidth not Number"):r<e.w||r<e.minW?new Error("maxWidth smaller than item width/minWidth"):void 0},minH:function(e,t){const r=e[t];return"number"!=typeof r?new Error("minHeight not Number"):r>e.h||r>e.maxH?new Error("minHeight larger than item height/maxHeight"):void 0},maxH:function(e,t){const r=e[t];return"number"!=typeof r?new Error("maxHeight not Number"):r<e.h||r<e.minH?new Error("maxHeight smaller than item height/minHeight"):void 0},i:Yo.default.string.isRequired,resizeHandles:Zo.resizeHandleAxesType,resizeHandle:Zo.resizeHandleType,onDragStop:Yo.default.func,onDragStart:Yo.default.func,onDrag:Yo.default.func,onResizeStop:Yo.default.func,onResizeStart:Yo.default.func,onResize:Yo.default.func,isDraggable:Yo.default.bool.isRequired,isResizable:Yo.default.bool.isRequired,isBounded:Yo.default.bool.isRequired,static:Yo.default.bool,useCSSTransforms:Yo.default.bool.isRequired,transformScale:Yo.default.number,className:Yo.default.string,handle:Yo.default.string,cancel:Yo.default.string,droppingPosition:Yo.default.shape({e:Yo.default.object.isRequired,left:Yo.default.number.isRequired,top:Yo.default.number.isRequired})}),tn(rn,"defaultProps",{className:"",cancel:"",handle:"",minH:1,minW:1,maxH:1/0,maxW:1/0,transformScale:1}),Object.defineProperty(ct,"__esModule",{value:!0}),ct.default=void 0;var on=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=mn(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}return o.default=e,r&&r.set(e,o),o}(u),nn=mt,an=dn(gt),sn=yt,ln=Kt,un=dn(er),cn=dn(Ao);function dn(e){return e&&e.__esModule?e:{default:e}}function mn(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(mn=function(e){return e?r:t})(e)}function fn(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const pn="react-grid-layout";let hn=!1;try{hn=/firefox/i.test(navigator.userAgent)}catch(Za){}let gn=class extends on.Component{constructor(){super(...arguments),fn(this,"state",{activeDrag:null,layout:(0,sn.synchronizeLayoutWithChildren)(this.props.layout,this.props.children,this.props.cols,(0,sn.compactType)(this.props),this.props.allowOverlap),mounted:!1,oldDragItem:null,oldLayout:null,oldResizeItem:null,resizing:!1,droppingDOMNode:null,children:[]}),fn(this,"dragEnterCounter",0),fn(this,"onDragStart",((e,t,r,o)=>{let{e:n,node:i}=o;const{layout:a}=this.state,s=(0,sn.getLayoutItem)(a,e);if(!s)return;const l={w:s.w,h:s.h,x:s.x,y:s.y,placeholder:!0,i:e};return this.setState({oldDragItem:(0,sn.cloneLayoutItem)(s),oldLayout:a,activeDrag:l}),this.props.onDragStart(a,s,s,null,n,i)})),fn(this,"onDrag",((e,t,r,o)=>{let{e:n,node:i}=o;const{oldDragItem:a}=this.state;let{layout:s}=this.state;const{cols:l,allowOverlap:u,preventCollision:c}=this.props,d=(0,sn.getLayoutItem)(s,e);if(!d)return;const m={w:d.w,h:d.h,x:d.x,y:d.y,placeholder:!0,i:e};s=(0,sn.moveElement)(s,d,t,r,!0,c,(0,sn.compactType)(this.props),l,u),this.props.onDrag(s,a,d,m,n,i),this.setState({layout:u?s:(0,sn.compact)(s,(0,sn.compactType)(this.props),l),activeDrag:m})})),fn(this,"onDragStop",((e,t,r,o)=>{let{e:n,node:i}=o;if(!this.state.activeDrag)return;const{oldDragItem:a}=this.state;let{layout:s}=this.state;const{cols:l,preventCollision:u,allowOverlap:c}=this.props,d=(0,sn.getLayoutItem)(s,e);if(!d)return;s=(0,sn.moveElement)(s,d,t,r,!0,u,(0,sn.compactType)(this.props),l,c);const m=c?s:(0,sn.compact)(s,(0,sn.compactType)(this.props),l);this.props.onDragStop(m,a,d,null,n,i);const{oldLayout:f}=this.state;this.setState({activeDrag:null,layout:m,oldDragItem:null,oldLayout:null}),this.onLayoutMaybeChanged(m,f)})),fn(this,"onResizeStart",((e,t,r,o)=>{let{e:n,node:i}=o;const{layout:a}=this.state,s=(0,sn.getLayoutItem)(a,e);s&&(this.setState({oldResizeItem:(0,sn.cloneLayoutItem)(s),oldLayout:this.state.layout,resizing:!0}),this.props.onResizeStart(a,s,s,null,n,i))})),fn(this,"onResize",((e,t,r,o)=>{let{e:n,node:i,size:a,handle:s}=o;const{oldResizeItem:l}=this.state,{layout:u}=this.state,{cols:c,preventCollision:d,allowOverlap:m}=this.props;let f,p,h,g=!1;const[y,b]=(0,sn.withLayoutItem)(u,e,(e=>{let o;if(p=e.x,h=e.y,-1!==["sw","w","nw","n","ne"].indexOf(s)&&(-1!==["sw","nw","w"].indexOf(s)&&(p=e.x+(e.w-t),t=e.x!==p&&p<0?e.w:t,p=p<0?0:p),-1!==["ne","n","nw"].indexOf(s)&&(h=e.y+(e.h-r),r=e.y!==h&&h<0?e.h:r,h=h<0?0:h),g=!0),d&&!m){o=(0,sn.getAllCollisions)(u,{...e,w:t,h:r,x:p,y:h}).filter((t=>t.i!==e.i)).length>0,o&&(h=e.y,r=e.h,p=e.x,t=e.w,g=!1)}return e.w=t,e.h=r,e}));if(!b)return;if(f=y,g){const e=!0;f=(0,sn.moveElement)(y,b,p,h,e,this.props.preventCollision,(0,sn.compactType)(this.props),c,m)}const v={w:b.w,h:b.h,x:b.x,y:b.y,static:!0,i:e};this.props.onResize(f,l,b,v,n,i),this.setState({layout:m?f:(0,sn.compact)(f,(0,sn.compactType)(this.props),c),activeDrag:v})})),fn(this,"onResizeStop",((e,t,r,o)=>{let{e:n,node:i}=o;const{layout:a,oldResizeItem:s}=this.state,{cols:l,allowOverlap:u}=this.props,c=(0,sn.getLayoutItem)(a,e),d=u?a:(0,sn.compact)(a,(0,sn.compactType)(this.props),l);this.props.onResizeStop(d,s,c,null,n,i);const{oldLayout:m}=this.state;this.setState({activeDrag:null,layout:d,oldResizeItem:null,oldLayout:null,resizing:!1}),this.onLayoutMaybeChanged(d,m)})),fn(this,"onDragOver",(e=>{var t;if(e.preventDefault(),e.stopPropagation(),hn&&!(null==(t=e.nativeEvent.target)?void 0:t.classList.contains(pn)))return!1;const{droppingItem:r,onDropDragOver:o,margin:n,cols:i,rowHeight:a,maxRows:s,width:l,containerPadding:u,transformScale:c}=this.props,d=null==o?void 0:o(e);if(!1===d)return this.state.droppingDOMNode&&this.removeDroppingPlaceholder(),!1;const m={...r,...d},{layout:f}=this.state,p=e.currentTarget.getBoundingClientRect(),h=e.clientX-p.left,g=e.clientY-p.top,y={left:h/c,top:g/c,e:e};if(this.state.droppingDOMNode){if(this.state.droppingPosition){const{left:e,top:t}=this.state.droppingPosition;(e!=h||t!=g)&&this.setState({droppingPosition:y})}}else{const e={cols:i,margin:n,maxRows:s,rowHeight:a,containerWidth:l,containerPadding:u||n},t=(0,ln.calcXY)(e,g,h,m.w,m.h);this.setState({droppingDOMNode:on.createElement("div",{key:m.i}),droppingPosition:y,layout:[...f,{...m,x:t.x,y:t.y,static:!1,isDraggable:!0}]})}})),fn(this,"removeDroppingPlaceholder",(()=>{const{droppingItem:e,cols:t}=this.props,{layout:r}=this.state,o=(0,sn.compact)(r.filter((t=>t.i!==e.i)),(0,sn.compactType)(this.props),t,this.props.allowOverlap);this.setState({layout:o,droppingDOMNode:null,activeDrag:null,droppingPosition:void 0})})),fn(this,"onDragLeave",(e=>{e.preventDefault(),e.stopPropagation(),this.dragEnterCounter--,0===this.dragEnterCounter&&this.removeDroppingPlaceholder()})),fn(this,"onDragEnter",(e=>{e.preventDefault(),e.stopPropagation(),this.dragEnterCounter++})),fn(this,"onDrop",(e=>{e.preventDefault(),e.stopPropagation();const{droppingItem:t}=this.props,{layout:r}=this.state,o=r.find((e=>e.i===t.i));this.dragEnterCounter=0,this.removeDroppingPlaceholder(),this.props.onDrop(r,o,e)}))}componentDidMount(){this.setState({mounted:!0}),this.onLayoutMaybeChanged(this.state.layout,this.props.layout)}static getDerivedStateFromProps(e,t){let r;if(t.activeDrag)return null;if((0,nn.deepEqual)(e.layout,t.propsLayout)&&e.compactType===t.compactType?(0,sn.childrenEqual)(e.children,t.children)||(r=t.layout):r=e.layout,r){return{layout:(0,sn.synchronizeLayoutWithChildren)(r,e.children,e.cols,(0,sn.compactType)(e),e.allowOverlap),compactType:e.compactType,children:e.children,propsLayout:e.layout}}return null}shouldComponentUpdate(e,t){return this.props.children!==e.children||!(0,sn.fastRGLPropsEqual)(this.props,e,nn.deepEqual)||this.state.activeDrag!==t.activeDrag||this.state.mounted!==t.mounted||this.state.droppingPosition!==t.droppingPosition}componentDidUpdate(e,t){if(!this.state.activeDrag){const e=this.state.layout,r=t.layout;this.onLayoutMaybeChanged(e,r)}}containerHeight(){if(!this.props.autoSize)return;const e=(0,sn.bottom)(this.state.layout),t=this.props.containerPadding?this.props.containerPadding[1]:this.props.margin[1];return e*this.props.rowHeight+(e-1)*this.props.margin[1]+2*t+"px"}onLayoutMaybeChanged(e,t){t||(t=this.state.layout),(0,nn.deepEqual)(t,e)||this.props.onLayoutChange(e)}placeholder(){const{activeDrag:e}=this.state;if(!e)return null;const{width:t,cols:r,margin:o,containerPadding:n,rowHeight:i,maxRows:a,useCSSTransforms:s,transformScale:l}=this.props;return on.createElement(un.default,{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,className:"react-grid-placeholder "+(this.state.resizing?"placeholder-resizing":""),containerWidth:t,cols:r,margin:o,containerPadding:n||o,maxRows:a,rowHeight:i,isDraggable:!1,isResizable:!1,isBounded:!1,useCSSTransforms:s,transformScale:l},on.createElement("div",null))}processGridItem(e,t){if(!e||!e.key)return;const r=(0,sn.getLayoutItem)(this.state.layout,String(e.key));if(!r)return null;const{width:o,cols:n,margin:i,containerPadding:a,rowHeight:s,maxRows:l,isDraggable:u,isResizable:c,isBounded:d,useCSSTransforms:m,transformScale:f,draggableCancel:p,draggableHandle:h,resizeHandles:g,resizeHandle:y}=this.props,{mounted:b,droppingPosition:v}=this.state,w="boolean"==typeof r.isDraggable?r.isDraggable:!r.static&&u,x="boolean"==typeof r.isResizable?r.isResizable:!r.static&&c,N=r.resizeHandles||g,D=w&&d&&!1!==r.isBounded;return on.createElement(un.default,{containerWidth:o,cols:n,margin:i,containerPadding:a||i,maxRows:l,rowHeight:s,cancel:p,handle:h,onDragStop:this.onDragStop,onDragStart:this.onDragStart,onDrag:this.onDrag,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,isDraggable:w,isResizable:x,isBounded:D,useCSSTransforms:m&&b,usePercentages:!b,transformScale:f,w:r.w,h:r.h,x:r.x,y:r.y,i:r.i,minH:r.minH,minW:r.minW,maxH:r.maxH,maxW:r.maxW,static:r.static,droppingPosition:t?v:void 0,resizeHandles:N,resizeHandle:y},e)}render(){const{className:e,style:t,isDroppable:r,innerRef:o}=this.props,n=(0,an.default)(pn,e),i={height:this.containerHeight(),...t};return on.createElement("div",{ref:o,className:n,style:i,onDrop:r?this.onDrop:sn.noop,onDragLeave:r?this.onDragLeave:sn.noop,onDragEnter:r?this.onDragEnter:sn.noop,onDragOver:r?this.onDragOver:sn.noop},on.Children.map(this.props.children,(e=>this.processGridItem(e))),r&&this.state.droppingDOMNode&&this.processGridItem(this.state.droppingDOMNode,!0),this.placeholder())}};ct.default=gn,fn(gn,"displayName","ReactGridLayout"),fn(gn,"propTypes",cn.default),fn(gn,"defaultProps",{autoSize:!0,cols:12,className:"",style:{},draggableHandle:"",draggableCancel:"",containerPadding:null,rowHeight:150,maxRows:1/0,layout:[],margin:[10,10],isBounded:!1,isDraggable:!0,isResizable:!0,allowOverlap:!1,isDroppable:!1,useCSSTransforms:!0,transformScale:1,verticalCompact:!0,compactType:"vertical",preventCollision:!1,droppingItem:{i:"__dropping-elem__",h:1,w:1},resizeHandles:["se"],onLayoutChange:sn.noop,onDragStart:sn.noop,onDrag:sn.noop,onDragStop:sn.noop,onResizeStart:sn.noop,onResize:sn.noop,onResizeStop:sn.noop,onDrop:sn.noop,onDropDragOver:sn.noop});var yn={},bn={};Object.defineProperty(bn,"__esModule",{value:!0}),bn.findOrGenerateResponsiveLayout=function(e,t,r,o,n,i){if(e[r])return(0,vn.cloneLayout)(e[r]);let a=e[o];const s=wn(t),l=s.slice(s.indexOf(r));for(let u=0,c=l.length;u<c;u++){const t=l[u];if(e[t]){a=e[t];break}}return a=(0,vn.cloneLayout)(a||[]),(0,vn.compact)((0,vn.correctBounds)(a,{cols:n}),i,n)},bn.getBreakpointFromWidth=function(e,t){const r=wn(e);let o=r[0];for(let n=1,i=r.length;n<i;n++){const i=r[n];t>e[i]&&(o=i)}return o},bn.getColsFromBreakpoint=function(e,t){if(!t[e])throw new Error("ResponsiveReactGridLayout: `cols` entry for breakpoint "+e+" is missing!");return t[e]},bn.sortBreakpoints=wn;var vn=yt;function wn(e){return Object.keys(e).sort((function(t,r){return e[t]-e[r]}))}Object.defineProperty(yn,"__esModule",{value:!0}),yn.default=void 0;var xn=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=_n(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}return o.default=e,r&&r.set(e,o),o}(u),Nn=kn(d),Dn=mt,En=yt,Sn=bn,On=kn(ct);function kn(e){return e&&e.__esModule?e:{default:e}}function _n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_n=function(e){return e?r:t})(e)}function jn(){return jn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},jn.apply(this,arguments)}function Cn(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Pn=e=>Object.prototype.toString.call(e);function Rn(e,t){return null==e?null:Array.isArray(e)?e:e[t]}class zn extends xn.Component{constructor(){super(...arguments),Cn(this,"state",this.generateInitialState()),Cn(this,"onLayoutChange",(e=>{this.props.onLayoutChange(e,{...this.props.layouts,[this.state.breakpoint]:e})}))}generateInitialState(){const{width:e,breakpoints:t,layouts:r,cols:o}=this.props,n=(0,Sn.getBreakpointFromWidth)(t,e),i=(0,Sn.getColsFromBreakpoint)(n,o),a=!1===this.props.verticalCompact?null:this.props.compactType;return{layout:(0,Sn.findOrGenerateResponsiveLayout)(r,t,n,n,i,a),breakpoint:n,cols:i}}static getDerivedStateFromProps(e,t){if(!(0,Dn.deepEqual)(e.layouts,t.layouts)){const{breakpoint:r,cols:o}=t;return{layout:(0,Sn.findOrGenerateResponsiveLayout)(e.layouts,e.breakpoints,r,r,o,e.compactType),layouts:e.layouts}}return null}componentDidUpdate(e){this.props.width==e.width&&this.props.breakpoint===e.breakpoint&&(0,Dn.deepEqual)(this.props.breakpoints,e.breakpoints)&&(0,Dn.deepEqual)(this.props.cols,e.cols)||this.onWidthChange(e)}onWidthChange(e){const{breakpoints:t,cols:r,layouts:o,compactType:n}=this.props,i=this.props.breakpoint||(0,Sn.getBreakpointFromWidth)(this.props.breakpoints,this.props.width),a=this.state.breakpoint,s=(0,Sn.getColsFromBreakpoint)(i,r),l={...o};if(a!==i||e.breakpoints!==t||e.cols!==r){a in l||(l[a]=(0,En.cloneLayout)(this.state.layout));let e=(0,Sn.findOrGenerateResponsiveLayout)(l,t,i,a,s,n);e=(0,En.synchronizeLayoutWithChildren)(e,this.props.children,s,n,this.props.allowOverlap),l[i]=e,this.props.onLayoutChange(e,l),this.props.onBreakpointChange(i,s),this.setState({breakpoint:i,layout:e,cols:s})}const u=Rn(this.props.margin,i),c=Rn(this.props.containerPadding,i);this.props.onWidthChange(this.props.width,u,s,c)}render(){const{breakpoint:e,breakpoints:t,cols:r,layouts:o,margin:n,containerPadding:i,onBreakpointChange:a,onLayoutChange:s,onWidthChange:l,...u}=this.props;return xn.createElement(On.default,jn({},u,{margin:Rn(n,this.state.breakpoint),containerPadding:Rn(i,this.state.breakpoint),onLayoutChange:this.onLayoutChange,layout:this.state.layout,cols:this.state.cols}))}}yn.default=zn,Cn(zn,"propTypes",{breakpoint:Nn.default.string,breakpoints:Nn.default.object,allowOverlap:Nn.default.bool,cols:Nn.default.object,margin:Nn.default.oneOfType([Nn.default.array,Nn.default.object]),containerPadding:Nn.default.oneOfType([Nn.default.array,Nn.default.object]),layouts(e,t){if("[object Object]"!==Pn(e[t]))throw new Error("Layout property must be an object. Received: "+Pn(e[t]));Object.keys(e[t]).forEach((t=>{if(!(t in e.breakpoints))throw new Error("Each key in layouts must align with a key in breakpoints.");(0,En.validateLayout)(e.layouts[t],"layouts."+t)}))},width:Nn.default.number.isRequired,onBreakpointChange:Nn.default.func,onLayoutChange:Nn.default.func,onWidthChange:Nn.default.func}),Cn(zn,"defaultProps",{breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},containerPadding:{lg:null,md:null,sm:null,xs:null,xxs:null},layouts:{},margin:[10,10],allowOverlap:!1,onBreakpointChange:En.noop,onLayoutChange:En.noop,onWidthChange:En.noop});var Mn={},Tn=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var r=-1;return e.some((function(e,o){return e[0]===t&&(r=o,!0)})),r}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var r=e(this.__entries__,t),o=this.__entries__[r];return o&&o[1]},t.prototype.set=function(t,r){var o=e(this.__entries__,t);~o?this.__entries__[o][1]=r:this.__entries__.push([t,r])},t.prototype.delete=function(t){var r=this.__entries__,o=e(r,t);~o&&r.splice(o,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var r=0,o=this.__entries__;r<o.length;r++){var n=o[r];e.call(t,n[1],n[0])}},t}()}(),Ln="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,Vn="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),In="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(Vn):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var Hn=["top","right","bottom","left","width","height","size","weight"],An="undefined"!=typeof MutationObserver,Wn=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var r=!1,o=!1,n=0;function i(){r&&(r=!1,e()),o&&s()}function a(){In(i)}function s(){var e=Date.now();if(r){if(e-n<2)return;o=!0}else r=!0,o=!1,setTimeout(a,t);n=e}return s}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,r=t.indexOf(e);~r&&t.splice(r,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){Ln&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),An?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){Ln&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,r=void 0===t?"":t;Hn.some((function(e){return!!~r.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),qn=function(e,t){for(var r=0,o=Object.keys(t);r<o.length;r++){var n=o[r];Object.defineProperty(e,n,{value:t[n],enumerable:!1,writable:!1,configurable:!0})}return e},Bn=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||Vn},Gn=Kn(0,0,0,0);function Fn(e){return parseFloat(e)||0}function Un(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce((function(t,r){return t+Fn(e["border-"+r+"-width"])}),0)}function Yn(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return Gn;var o=Bn(e).getComputedStyle(e),n=function(e){for(var t={},r=0,o=["top","right","bottom","left"];r<o.length;r++){var n=o[r],i=e["padding-"+n];t[n]=Fn(i)}return t}(o),i=n.left+n.right,a=n.top+n.bottom,s=Fn(o.width),l=Fn(o.height);if("border-box"===o.boxSizing&&(Math.round(s+i)!==t&&(s-=Un(o,"left","right")+i),Math.round(l+a)!==r&&(l-=Un(o,"top","bottom")+a)),!function(e){return e===Bn(e).document.documentElement}(e)){var u=Math.round(s+i)-t,c=Math.round(l+a)-r;1!==Math.abs(u)&&(s-=u),1!==Math.abs(c)&&(l-=c)}return Kn(n.left,n.top,s,l)}var Xn="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof Bn(e).SVGGraphicsElement}:function(e){return e instanceof Bn(e).SVGElement&&"function"==typeof e.getBBox};function $n(e){return Ln?Xn(e)?function(e){var t=e.getBBox();return Kn(0,0,t.width,t.height)}(e):Yn(e):Gn}function Kn(e,t,r,o){return{x:e,y:t,width:r,height:o}}var Qn=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Kn(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=$n(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),Zn=function(){return function(e,t){var r,o,n,i,a,s,l,u=(o=(r=t).x,n=r.y,i=r.width,a=r.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(s.prototype),qn(l,{x:o,y:n,width:i,height:a,top:n,right:o+i,bottom:a+n,left:o}),l);qn(this,{target:e,contentRect:u})}}(),Jn=function(){function e(e,t,r){if(this.activeObservations_=[],this.observations_=new Tn,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof Bn(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new Qn(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof Bn(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new Zn(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),ei="undefined"!=typeof WeakMap?new WeakMap:new Tn,ti=function(){return function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=Wn.getInstance(),o=new Jn(t,r,this);ei.set(this,o)}}();["observe","unobserve","disconnect"].forEach((function(e){ti.prototype[e]=function(){var t;return(t=ei.get(this))[e].apply(t,arguments)}}));var ri=void 0!==Vn.ResizeObserver?Vn.ResizeObserver:ti;const oi=c(Object.freeze(Object.defineProperty({__proto__:null,default:ri},Symbol.toStringTag,{value:"Module"})));Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.default=function(e){var t;return t=class extends ni.Component{constructor(){super(...arguments),di(this,"state",{width:1280}),di(this,"elementRef",ni.createRef()),di(this,"mounted",!1),di(this,"resizeObserver",void 0)}componentDidMount(){this.mounted=!0,this.resizeObserver=new ai.default((e=>{if(this.elementRef.current instanceof HTMLElement){const t=e[0].contentRect.width;this.setState({width:t})}}));const e=this.elementRef.current;e instanceof HTMLElement&&this.resizeObserver.observe(e)}componentWillUnmount(){this.mounted=!1;const e=this.elementRef.current;e instanceof HTMLElement&&this.resizeObserver.unobserve(e),this.resizeObserver.disconnect()}render(){const{measureBeforeMount:t,...r}=this.props;return t&&!this.mounted?ni.createElement("div",{className:(0,si.default)(this.props.className,mi),style:this.props.style,ref:this.elementRef}):ni.createElement(e,ci({innerRef:this.elementRef},r,this.state))}},di(t,"defaultProps",{measureBeforeMount:!1}),di(t,"propTypes",{measureBeforeMount:ii.default.bool}),t};var ni=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=ui(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=n?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(o,i,a):o[i]=e[i]}return o.default=e,r&&r.set(e,o),o}(u),ii=li(d),ai=li(oi),si=li(gt);function li(e){return e&&e.__esModule?e:{default:e}}function ui(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(ui=function(e){return e?r:t})(e)}function ci(){return ci=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},ci.apply(this,arguments)}function di(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const mi="react-grid-layout";var fi;(fi=ut).exports=ct.default,fi.exports.utils=yt,fi.exports.calculateUtils=Kt,fi.exports.Responsive=yn.default,fi.exports.Responsive.utils=bn,fi.exports.WidthProvider=Mn.default;var pi=ut.exports;const hi=[f(),p({syntaxHighlighting:!0,highlightSpecialChars:!1,history:!1,drawSelection:!1,defaultKeymap:!1,historyKeymap:!1})],gi=u.memo((({code:e,className:t})=>{const{theme:r}=h();return g.jsxDEV("div",{className:y(t,"text-muted-foreground flex flex-col overflow-hidden"),children:g.jsxDEV(b,{minHeight:"10px",theme:"dark"===r?"dark":"light",height:"100%",className:"tiny-code",editable:!1,basicSetup:!1,extensions:hi,value:e},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/cell/TinyCode.tsx",lineNumber:38,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/cell/TinyCode.tsx",lineNumber:32,columnNumber:5},void 0)}));gi.displayName="TinyCode";const yi=pi.WidthProvider(pi.Responsive),bi=[0,0],vi="grid-drag-handle",wi=u.memo((({output:e,cellId:t,status:r,mode:o,code:n,hidden:i,isScrollable:a,side:s,className:l})=>{const u="running"===r||"queued"===r;return(null==e||""===e.data)&&"read"!==o?g.jsxDEV(gi,{className:l,code:n},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:370,columnNumber:14},void 0):g.jsxDEV("div",{className:y(l,"h-full w-full p-2 overflow-x-auto",i&&"invisible",a?"overflow-y-auto":"overflow-y-hidden","top"===s&&"flex items-start","bottom"===s&&"flex items-end","left"===s&&"flex justify-start","right"===s&&"flex justify-end"),children:g.jsxDEV(x,{allowExpand:!1,output:e,cellId:t,stale:u},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:386,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:374,columnNumber:7},void 0)}));wi.displayName="GridCell";const xi=({layout:e,setLayout:t,isLocked:r,setIsLocked:o})=>g.jsxDEV("div",{className:"flex flex-row absolute pl-5 top-8 gap-4 w-full justify-end pr-[350px] pb-3 border-b z-20",children:[g.jsxDEV("div",{className:"flex flex-row items-center gap-2",children:[g.jsxDEV(N,{htmlFor:"columns",children:"Columns"},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:407,columnNumber:9},void 0),g.jsxDEV(D,{"data-testid":"grid-columns-input",id:"columns",value:e.columns,className:"w-[60px]",placeholder:"# of Columns",minValue:1,onChange:r=>{t({...e,columns:r})}},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:408,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:406,columnNumber:7},void 0),g.jsxDEV("div",{className:"flex flex-row items-center gap-2",children:[g.jsxDEV(N,{htmlFor:"rowHeight",children:"Row Height (px)"},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:424,columnNumber:9},void 0),g.jsxDEV(D,{"data-testid":"grid-row-height-input",id:"rowHeight",value:e.rowHeight,className:"w-[60px]",placeholder:"Row Height (px)",minValue:1,onChange:r=>{t({...e,rowHeight:r})}},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:425,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:423,columnNumber:7},void 0),g.jsxDEV("div",{className:"flex flex-row items-center gap-2",children:[g.jsxDEV(N,{htmlFor:"maxWidth",children:"Max Width (px)"},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:441,columnNumber:9},void 0),g.jsxDEV(D,{"data-testid":"grid-max-width-input",id:"maxWidth",value:e.maxWidth,className:"w-[90px]",step:100,placeholder:"Full",onChange:r=>{t({...e,maxWidth:Number.isNaN(r)?void 0:r})}},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:442,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:440,columnNumber:7},void 0),g.jsxDEV("div",{className:"flex flex-row items-center gap-2",children:[g.jsxDEV(N,{className:"flex flex-row items-center gap-1",htmlFor:"lock",children:[g.jsxDEV(E,{className:"h-3 w-3"},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:459,columnNumber:11},void 0),"Bordered"]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:458,columnNumber:9},void 0),g.jsxDEV(S,{"data-testid":"grid-bordered-switch",id:"lock",checked:e.bordered,size:"sm",onCheckedChange:r=>{t({...e,bordered:r})}},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:462,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:457,columnNumber:7},void 0),g.jsxDEV("div",{className:"flex flex-row items-center gap-2",children:[g.jsxDEV(N,{className:"flex flex-row items-center gap-1",htmlFor:"lock",children:[g.jsxDEV(O,{className:"h-3 w-3"},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:477,columnNumber:11},void 0),"Lock Grid"]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:476,columnNumber:9},void 0),g.jsxDEV(S,{"data-testid":"grid-lock-switch",id:"lock",checked:r,size:"sm",onCheckedChange:o},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:480,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:475,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:405,columnNumber:5},void 0),Ni=v.forwardRef((({children:e,isDragging:t,className:r,onDelete:o,isScrollable:n,setIsScrollable:i,side:a,setSide:s,display:l,...c},d)=>{const[m,f]=u.useState();return g.jsxDEV("div",{ref:d,...c,className:y(r,"relative z-10 hover:z-20","bg-background border-transparent hover:border-[var(--sky-8)] border",m&&"border-[var(--sky-8)] z-20",!m&&"hover-actions-parent",t&&"bg-[var(--slate-2)] border-border z-20"),children:[e,g.jsxDEV(Di,{onDelete:o,isScrollable:n,setIsScrollable:i,side:a,setSide:s,display:l,setPopoverOpened:f,popoverOpened:m},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:538,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:525,columnNumber:7},void 0)}));Ni.displayName="EditableGridCell";const Di=({display:e,onDelete:t,side:r,setSide:o,isScrollable:n,setIsScrollable:i,popoverOpened:a,setPopoverOpened:s})=>{const l="h-4 w-4 opacity-60 hover:opacity-100",u="left"===r?et:"right"===r?Ze:void 0;return g.jsxDEV("div",{className:y("absolute right-0 p-1 bg-[var(--sky-8)] text-white h-6 z-10 flex gap-2",!a&&"hover-action","top"===e&&"-top-6 rounded-t","bottom"===e&&"-bottom-6 rounded-b"),children:[g.jsxDEV(k,{open:"side"===a,onOpenChange:e=>s(e?"side":void 0),children:[g.jsxDEV(_,{asChild:!0,children:u?g.jsxDEV(u,{className:l},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:602,columnNumber:13},void 0):g.jsxDEV(Je,{className:l},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:604,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:600,columnNumber:9},void 0),g.jsxDEV(j,{side:"bottom",children:C.entries(Ei).map((([e,t])=>g.jsxDEV(P,{onSelect:()=>o(e),children:[g.jsxDEV(t,{className:"h-4 w-3 mr-2"},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:610,columnNumber:15},void 0),g.jsxDEV("span",{className:"flex-1",children:R(e)},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:611,columnNumber:15},void 0),e===r&&g.jsxDEV(z,{className:"h-4 w-4"},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:612,columnNumber:35},void 0)]},e,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:609,columnNumber:13},void 0)))},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:607,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:596,columnNumber:7},void 0),g.jsxDEV(k,{open:"scroll"===a,onOpenChange:e=>s(e?"scroll":void 0),children:[g.jsxDEV(_,{asChild:!0,children:g.jsxDEV(it,{className:l},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:623,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:622,columnNumber:9},void 0),g.jsxDEV(j,{side:"bottom",children:g.jsxDEV(P,{onSelect:()=>i(!n),children:[g.jsxDEV("span",{className:"flex-1",children:"Scrollable"},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:627,columnNumber:13},void 0),g.jsxDEV(S,{"data-testid":"grid-scrollable-switch",checked:n,size:"sm",onCheckedChange:i},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:628,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:626,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:625,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:618,columnNumber:7},void 0),g.jsxDEV(rt,{className:y(vi,"cursor-move",l)},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:638,columnNumber:7},void 0),g.jsxDEV(M,{className:l,onClick:()=>t()},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:641,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:588,columnNumber:5},void 0)},Ei={left:et,right:Ze},Si={type:"grid",name:"Grid",validator:T.object({columns:T.number().min(1),rowHeight:T.number().min(1),maxWidth:T.number().optional(),bordered:T.boolean().optional(),cells:T.array(T.object({position:T.tuple([T.number(),T.number(),T.number(),T.number()]).nullable(),scrollable:T.boolean().optional(),alignment:T.enum(["top","bottom","left","right"]).optional()}))}),deserializeLayout:(e,t)=>{if(0===e.cells.length)return{columns:e.columns,rowHeight:e.rowHeight,scrollableCells:new Set,cellSide:new Map,cells:[]};e.cells.length!==t.length&&s.warn("Number of cells in layout does not match number of cells in notebook");const r=new Set,o=new Map,n=e.cells.flatMap(((e,n)=>{const i=e.position;if(!i)return[];const a=t[n];return a?(e.scrollable&&r.add(a.id),e.side&&o.set(a.id,e.side),{i:a.id,x:i[0],y:i[1],w:i[2],h:i[3]}):[]}));return{columns:e.columns,rowHeight:e.rowHeight,maxWidth:e.maxWidth,bordered:e.bordered,cells:n,cellSide:o,scrollableCells:r}},serializeLayout:(e,t)=>{const r=w.keyBy(e.cells,(e=>e.i)),o=t.map((t=>{const o=r.get(t.id);if(!o)return{position:null};const n={position:[o.x,o.y,o.w,o.h]};return e.scrollableCells.has(t.id)&&(n.scrollable=!0),e.cellSide.has(t.id)&&(n.side=e.cellSide.get(t.id)),n}));return{columns:e.columns,rowHeight:e.rowHeight,maxWidth:e.maxWidth,bordered:e.bordered,cells:o}},Component:({layout:e,setLayout:t,cells:r,mode:o})=>{const n="read"===o,i=new Set(e.cells.map((e=>e.i))),[a,s]=u.useState(null),[l,c]=u.useState(!1),d=u.useMemo((()=>({lg:e.columns})),[e.columns]);u.useEffect((()=>{const t=document.getElementById("App");return e.bordered?null==t||t.classList.add("grid-bordered"):null==t||t.classList.remove("grid-bordered"),()=>{null==t||t.classList.remove("grid-bordered")}}),[e.bordered]);const{isDragging:m,...f}=function(){const[e,t]=u.useState(!1),[r,o]=v.useState({x:0,y:0}),[n,i]=v.useState(!1);return{isDragging:e&&n,onDragStart:e=>{t(!0),o({x:e.clientX,y:e.clientY})},onDragMove:t=>{if(e){const e=t.clientX-r.x,o=t.clientY-r.y;i(Math.hypot(e,o)>10)}},onDragStop:()=>{t(!1),i(!1)}}}(),p=!n&&!l,h=w.keyBy(e.cells,(e=>e.i)),b=r=>o=>{const n=new Set(e.scrollableCells);o?n.add(r):n.delete(r),t({...e,scrollableCells:n})},x={};e.maxWidth&&(x.maxWidth=`${e.maxWidth}px`),p&&(x.backgroundImage="repeating-linear-gradient(var(--gray-4) 0 1px, transparent 1px 100%), repeating-linear-gradient(90deg, var(--gray-4) 0 1px, transparent 1px 100%)",x.backgroundSize=`calc((100% / ${e.columns})) ${e.rowHeight}px`);let N=g.jsxDEV(yi,{breakpoint:"lg",layouts:{lg:e.cells},style:x,cols:d,allowOverlap:!1,className:y("w-full mx-auto bg-background flex-1 min-h-full",p&&"bg-[var(--slate-2)] border-r",n&&"disable-animation",!e.maxWidth&&"min-w-[800px]"),containerPadding:n?[20,20]:void 0,margin:bi,isBounded:!1,compactType:null,preventCollision:!0,rowHeight:e.rowHeight,onLayoutChange:r=>t({...e,cells:r}),droppingItem:a?{i:a.i,w:a.w||2,h:a.h||2}:void 0,onDrop:(r,o,n)=>{f.onDragStop(),o&&t({...e,cells:[...r,o]})},onDragStart:(e,t,r,o,n)=>{f.onDragStart(n)},onDrag:(e,t,r,o,n)=>{f.onDragMove(n)},onDragStop:()=>{f.onDragStop()},onResizeStop:()=>{window.dispatchEvent(new Event("resize"))},isDraggable:p,isDroppable:p,isResizable:p,draggableHandle:p?`.${vi}`:"noop",children:r.filter((e=>i.has(e.id))).map((r=>{const n=h.get(r.id),i=e.scrollableCells.has(r.id)??!1,a=e.cellSide.get(r.id),s=g.jsxDEV(wi,{code:r.code,mode:o,cellId:r.id,output:r.output,status:r.status,isScrollable:i,side:a,hidden:r.errored||r.interrupted||r.stopped},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:211,columnNumber:13},void 0);return p?g.jsxDEV(Ni,{id:r.id,isDragging:m,side:a,setSide:(l=r.id,r=>{const o=new Map(e.cellSide);r===o.get(l)?o.delete(l):o.set(l,r),t({...e,cellSide:o})}),isScrollable:i,setIsScrollable:b(r.id),display:0===(null==n?void 0:n.y)?"bottom":"top",onDelete:()=>{t({...e,cells:e.cells.filter((e=>e.i!==r.id))})},children:s},r.id,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:225,columnNumber:15},void 0):g.jsxDEV("div",{children:s},r.id,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:246,columnNumber:18},void 0);var l}))},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:137,columnNumber:5},void 0);if(n)return e.bordered&&(N=g.jsxDEV("div",{className:"flex flex-1 flex-col items-center",children:g.jsxDEV("div",{style:x,className:"bg-background flex-1 border-t border-x rounded-t shadow-sm w-full overflow-hidden",children:N},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:255,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:254,columnNumber:9},void 0)),N;const D=r.filter((e=>!i.has(e.id)));return e.bordered&&(N=g.jsxDEV("div",{style:x,className:"bg-background border-t border-x rounded-t shadow-sm w-full mx-auto mt-4 flex flex-col",children:g.jsxDEV("div",{className:"flex-1 overflow-auto",children:N},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:275,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:271,columnNumber:7},void 0)),g.jsxDEV(g.Fragment,{children:[g.jsxDEV(xi,{layout:e,setLayout:t,isLocked:l,setIsLocked:c},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:282,columnNumber:7},void 0),g.jsxDEV("div",{className:y("relative flex z-10 flex-1 overflow-hidden"),children:[g.jsxDEV("div",{className:y("flex-grow overflow-auto transparent-when-disconnected"),children:N},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:289,columnNumber:9},void 0),g.jsxDEV("div",{className:"flex-none flex flex-col w-[300px] p-2 pb-20 gap-2 overflow-auto bg-[var(--slate-2)] border-t border-x rounded-t shadow-sm transparent-when-disconnected mx-2 mt-4",children:[g.jsxDEV("div",{className:"text font-bold text-[var(--slate-20)] flex-shrink-0",children:"Outputs"},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:297,columnNumber:11},void 0),D.map((t=>g.jsxDEV("div",{draggable:!0,unselectable:"on","data-cell-id":t.id,onDragStart:r=>{const o=r.currentTarget.offsetHeight;s({i:t.id,w:e.columns/4,h:Math.ceil(o/e.rowHeight)||1}),r.dataTransfer.setData("text/plain","")},className:y(vi,"droppable-element bg-background border-border border overflow-hidden p-2 rounded flex-shrink-0"),children:g.jsxDEV(wi,{code:t.code,className:"select-none pointer-events-none",mode:o,cellId:t.id,output:t.output,isScrollable:!1,status:t.status,hidden:!1},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:325,columnNumber:15},void 0)},t.id,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:301,columnNumber:13},void 0)))]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:296,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:288,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/grid-layout/grid-layout.tsx",lineNumber:281,columnNumber:5},void 0)},getInitialLayout:()=>({columns:24,rowHeight:20,maxWidth:1400,bordered:!0,scrollableCells:new Set,cellSide:new Map,cells:[]})},Oi=({invisible:e,appConfig:t,className:r,children:o})=>g.jsxDEV("div",{className:y("px-1 sm:px-16 md:px-32",r),children:g.jsxDEV("div",{className:y("m-auto pb-24 sm:pb-12","normal"===t.width&&"max-w-contentWidth min-w-[400px]","medium"===t.width&&"max-w-contentWidthMedium min-w-[400px]",e&&"invisible"),children:o},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/vertical-layout-wrapper.tsx",lineNumber:20,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/vertical-layout-wrapper.tsx",lineNumber:19,columnNumber:5},void 0);function ki(e,t){const[r,o]=u.useState(!0);return u.useEffect((()=>{const r=Math.max(Math.min(15*(e-1),100),0),n=setTimeout((()=>{o(!1),"read"!==t&&requestAnimationFrame((()=>{!function(){const e=L();e.length>0&&e[0].focus()}()}))}),r);return()=>clearTimeout(n)}),[]),{invisible:r}}const _i=({value:e,onChange:t,placeholder:r,...o})=>{const n=u.useRef(null),i=Ci(e,t);return V((()=>{const e=i.onBlur,t=n.current;if(t)return t.addEventListener("blur",e),()=>{t.removeEventListener("blur",e)}})),g.jsxDEV(I,{"data-testid":"cell-name-input",value:i.value,onChange:i.onChange,ref:n,placeholder:r,className:"shadow-none! hover:shadow-none focus:shadow-none focus-visible:shadow-none",onKeyDown:H.onEnter(H.stopPropagation()),...o},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/actions/name-cell-input.tsx",lineNumber:48,columnNumber:5},void 0)},ji=({value:e,cellId:t,className:r})=>{const{updateCellName:o}=G(),n=Ci(e,(e=>o({cellId:t,name:e})));return e===A?null:g.jsxDEV(F,{content:"Click to rename",children:g.jsxDEV("span",{className:y("outline-none border hover:border-cyan-500/40 focus:border-cyan-500/40",r),contentEditable:!0,suppressContentEditableWarning:!0,onChange:n.onChange,onBlur:n.onBlur,onKeyDown:H.onEnter((e=>{e.target instanceof HTMLElement&&e.target.blur()})),children:e},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/actions/name-cell-input.tsx",lineNumber:78,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/actions/name-cell-input.tsx",lineNumber:77,columnNumber:5},void 0)};function Ci(e,t){const[r,o]=u.useState(e),n=r=>{if(r===e)return;if(!r||r===A)return void t(r);const o=q(r,B());t(o)};return{value:r===A?"":r,onChange:e=>{const t=e.target.value,r=W(t);o(r)},onBlur:e=>{if(e.target instanceof HTMLInputElement){const t=e.target.value;n(W(t))}else if(e.target instanceof HTMLSpanElement){const t=e.target.innerText.trim();n(W(t))}}}}const Pi=new U,Ri=e=>{const t=v.useRef(null),{consoleOutputs:r,stale:o,cellName:n,cellId:i,onSubmitDebugger:a}=e,s=r.length>0;if(u.useLayoutEffect((()=>{const e=t.current;if(!e)return;const r=e.scrollHeight-e.clientHeight;r-e.scrollTop<120&&(e.scrollTop=r)})),!s&&n===A)return null;const l=e=>g.jsxDEV("span",{dangerouslySetInnerHTML:{__html:Pi.ansi_to_html(e)}},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/output/ConsoleOutput.tsx",lineNumber:68,columnNumber:7},void 0),c=[...r].reverse();return g.jsxDEV("div",{title:o?"This console output is stale":void 0,"data-testid":"console-output-area",ref:t,className:y("console-output-area overflow-hidden rounded-b-lg flex flex-col-reverse w-full",o&&"marimo-output-stale",s?"p-5":"p-3"),children:[c.map(((e,t)=>{if("pdb"===e.channel)return null;const o=r.length-t-1;return"stdin"===e.channel?null==e.response?g.jsxDEV("div",{className:"flex gap-2 items-center",children:[l(e.data),g.jsxDEV(I,{"data-testid":"console-input",type:"text",autoComplete:"off",autoFocus:!0,className:"m-0",placeholder:"stdin",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||a(e.currentTarget.value,o)}},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/output/ConsoleOutput.tsx",lineNumber:96,columnNumber:17},void 0)]},t,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/output/ConsoleOutput.tsx",lineNumber:94,columnNumber:15},void 0):g.jsxDEV("div",{className:"flex gap-2 items-center",children:[l(e.data),g.jsxDEV("span",{className:"text-[var(--sky-11)]",children:e.response},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/output/ConsoleOutput.tsx",lineNumber:115,columnNumber:15},void 0)]},t,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/output/ConsoleOutput.tsx",lineNumber:113,columnNumber:13},void 0):g.jsxDEV(v.Fragment,{children:g.jsxDEV(Y,{message:e},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/output/ConsoleOutput.tsx",lineNumber:122,columnNumber:13},void 0)},t,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/output/ConsoleOutput.tsx",lineNumber:121,columnNumber:11},void 0)})),g.jsxDEV(ji,{value:n,cellId:i,className:"bg-[var(--slate-4)] border-[var(--slate-4)] hover:bg-[var(--slate-5)] dark:bg-[var(--sky-5)] dark:border-[var(--sky-5)] dark:bg-[var(--sky-6)] dark:text-[var(--sky-12)] text-[var(--slate-12)] rounded-tl rounded-br-lg absolute right-0 bottom-0 text-xs px-1.5 py-0.5 font-mono"},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/output/ConsoleOutput.tsx",lineNumber:126,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/output/ConsoleOutput.tsx",lineNumber:75,columnNumber:5},void 0)},zi=X($());function Mi(){return K(zi)}const Ti=/\/@file\/([^\s/]+)\.([\dA-Za-z]+)/g,Li=class e{constructor(){r(this,"virtualFiles",new Map),n(e.INSTANCE,"VirtualFileTracker")}track(e){const{cell_id:t,output:r}=e;if(r)switch(r.mimetype){case"application/json":case"text/html":{const e=this.virtualFiles.get(t),o=function(e){if(!e)return new Set;const t=new Set,r=("string"==typeof e?e:JSON.stringify(e)).match(Ti);if(r)for(const o of r)t.add(o);return t}(r.data);return null==e||e.forEach((e=>o.add(e))),void this.virtualFiles.set(t,o)}default:return}}filenames(){const e=new Set;for(const t of this.virtualFiles.values())t.forEach((t=>e.add(t)));return[...e]}removeForCellId(e){this.virtualFiles.delete(e)}};r(Li,"INSTANCE",new Li);let Vi=Li;async function Ii(e){const{filename:t}=e,r=await Q({download:!0,includeCode:!0,files:Vi.INSTANCE.filenames()}),o=Z.basename(t)??"notebook.py";J(new Blob([r],{type:"text/html"}),ee.toHTML(o))}const Hi=({canShowCode:e,showCode:t,onToggleShowCode:r})=>{const[o]=Mi();return g.jsxDEV("div",{className:y("right-0 top-0 z-50 m-4 no-print flex gap-2",ne()?"absolute":"fixed"),children:[e&&g.jsxDEV(ie,{variant:"secondary",onClick:r,size:"xs","data-testid":"show-code",children:[g.jsxDEV(ae,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/vertical-layout.tsx",lineNumber:134,columnNumber:11},void 0),t?"Hide code":"Show code"]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/vertical-layout.tsx",lineNumber:128,columnNumber:9},void 0),g.jsxDEV(k,{modal:!1,children:[g.jsxDEV(_,{asChild:!0,children:g.jsxDEV(ie,{variant:"secondary",size:"xs","data-testid":"download-as",children:[g.jsxDEV(se,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/vertical-layout.tsx",lineNumber:141,columnNumber:13},void 0),"Download as",g.jsxDEV(le,{className:"w-4 h-4 ml-2"},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/vertical-layout.tsx",lineNumber:143,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/vertical-layout.tsx",lineNumber:140,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/vertical-layout.tsx",lineNumber:139,columnNumber:9},void 0),g.jsxDEV(j,{align:"end",className:"no-print w-[220px]",children:[g.jsxDEV(P,{onSelect:async()=>{document.getElementById("App")&&await Ii({filename:o||"app"})},children:[g.jsxDEV(tt,{className:"mr-2",size:14,strokeWidth:1.5},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/vertical-layout.tsx",lineNumber:148,columnNumber:13},void 0),"Download as HTML"]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/vertical-layout.tsx",lineNumber:147,columnNumber:11},void 0),g.jsxDEV(P,{onSelect:async()=>{const e=document.getElementById("App");e&&await ce(e,o||"screenshot.png")},children:[g.jsxDEV(ue,{className:"mr-2",size:14,strokeWidth:1.5},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/vertical-layout.tsx",lineNumber:152,columnNumber:13},void 0),"Download as PNG"]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/vertical-layout.tsx",lineNumber:151,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/vertical-layout.tsx",lineNumber:146,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/vertical-layout.tsx",lineNumber:138,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/vertical-layout.tsx",lineNumber:118,columnNumber:5},void 0)},Ai=u.memo((({output:e,consoleOutputs:t,cellId:r,status:o,stopped:n,errored:i,config:a,interrupted:s,staleInputs:l,runStartTimestamp:c,code:d,showCode:m,mode:f,name:p})=>{const h=u.useRef(null),b=te({status:o,output:e,interrupted:s,runStartTimestamp:c,staleInputs:l},!1),v=y("Cell","hover-actions-parent",{published:!m,interactive:"edit"===f,"has-error":i,stopped:n}),w=re.create(r),N=i||s||n;return"read"===f&&m?g.jsxDEV("div",{tabIndex:-1,id:w,ref:h,className:v,children:[g.jsxDEV(x,{allowExpand:!0,output:e,className:"output-area",cellId:r,stale:b},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/vertical-layout.tsx",lineNumber:225,columnNumber:11},void 0),g.jsxDEV("div",{className:"tray",children:g.jsxDEV(oe,{initiallyHideCode:a.hide_code,code:d},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/vertical-layout.tsx",lineNumber:233,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/vertical-layout.tsx",lineNumber:232,columnNumber:11},void 0),g.jsxDEV(Ri,{consoleOutputs:t,stale:b,cellName:p,onSubmitDebugger:()=>null,cellId:r,debuggerActive:!1},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/vertical-layout.tsx",lineNumber:238,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/vertical-layout.tsx",lineNumber:224,columnNumber:9},void 0):N?null:g.jsxDEV("div",{tabIndex:-1,id:w,ref:h,className:v,children:g.jsxDEV(x,{allowExpand:"edit"===f,output:e,className:"output-area",cellId:r,stale:b},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/vertical-layout.tsx",lineNumber:252,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/vertical-layout.tsx",lineNumber:251,columnNumber:7},void 0)}));Ai.displayName="VerticalCell";const Wi=[Si,{type:"vertical",name:"Vertical",validator:T.any(),Component:({cells:e,appConfig:t,mode:r})=>{const{invisible:o}=ki(e.length,r),[n,i]=u.useState((()=>ne())),a=(()=>{const t=e.some((e=>Boolean(e.code))),o=new URLSearchParams(window.location.search).get("include-code");return"read"===r&&"false"!==o&&t})();return g.jsxDEV(Oi,{invisible:o,appConfig:t,children:[e.map((e=>g.jsxDEV(Ai,{cellId:e.id,output:e.output,consoleOutputs:e.consoleOutputs,status:e.status,code:e.code,config:e.config,stopped:e.stopped,showCode:n&&a,errored:e.errored,mode:r,runStartTimestamp:e.runStartTimestamp,interrupted:e.interrupted,staleInputs:e.staleInputs,name:e.name},e.id,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/vertical-layout.tsx",lineNumber:66,columnNumber:9},void 0))),"read"===r&&g.jsxDEV(Hi,{canShowCode:a,showCode:n,onToggleShowCode:()=>i((e=>!e))},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/vertical-layout.tsx",lineNumber:85,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/vertical-layout.tsx",lineNumber:64,columnNumber:5},void 0)},deserializeLayout:e=>e,serializeLayout:e=>e,getInitialLayout:()=>null}];function qi(){return{selectedLayout:"vertical",layoutData:{}}}const{valueAtom:Bi,useActions:Gi}=de(qi,{setLayoutView:(e,t)=>({...e,selectedLayout:t}),setLayoutData:(e,t)=>({...e,selectedLayout:t.layoutView,layoutData:{...e.layoutData,[t.layoutView]:t.data}}),setCurrentLayoutData:(e,t)=>({...e,layoutData:{...e.layoutData,[e.selectedLayout]:t}})}),Fi=()=>me(Bi),Ui=()=>Gi();function Yi(){const e=fe(),{layoutData:t,selectedLayout:r}=pe.get(Bi);if("vertical"===r)return;if(void 0===t)return;const o=t[r],n=Wi.find((e=>e.type===r));if(void 0!==n)return{type:r,data:n.serializeLayout(o,he(e))};s.error(`Unknown layout type: ${r}`)}const Xi=u.memo((({appConfig:e,mode:t,children:r})=>{const o=ge(),{selectedLayout:n,layoutData:i}=Fi(),{setCurrentLayoutData:a}=Ui();if("edit"===t)return r;const s=Wi.find((e=>e.type===n));if(!s)return r;const l=ye(o),u=s.Component;return g.jsxDEV(u,{appConfig:e,mode:t,cells:l,layout:i[n]||s.getInitialLayout(l),setLayout:a},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/cells-renderer.tsx",lineNumber:36,columnNumber:7},void 0)}));Xi.displayName="CellsRenderer";var $i=(e=>(e.CONNECTING="CONNECTING",e.OPEN="CONNECTED",e.CLOSING="CLOSING",e.CLOSED="CLOSED",e))($i||{}),Ki=(e=>(e.KERNEL_DISCONNECTED="KERNEL_DISCONNECTED",e.ALREADY_RUNNING="ALREADY_RUNNING",e.MALFORMED_QUERY="MALFORMED_QUERY",e))(Ki||{});function Qi(){const{cellRuntime:e}=pe.get(be),t=C.entries(e).find((([e,t])=>"running"===t.status));t&&ve(t[0],"focus")}const Zi=({state:e,isRunning:t})=>g.jsxDEV(g.Fragment,{children:[e===$i.OPEN&&t&&g.jsxDEV(ta,{},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/header/status.tsx",lineNumber:14,columnNumber:54},void 0),e===$i.CLOSED&&g.jsxDEV(ra,{},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/header/status.tsx",lineNumber:15,columnNumber:43},void 0),e===$i.CLOSED&&g.jsxDEV(ea,{},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/header/status.tsx",lineNumber:16,columnNumber:43},void 0)]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/header/status.tsx",lineNumber:13,columnNumber:5},void 0),Ji="absolute top-4 left-4 m-0 flex items-center space-x-3 min-h-[28px] no-print pointer-events-auto z-50 hover:cursor-pointer",ea=()=>g.jsxDEV(F,{content:"App disconnected",children:g.jsxDEV("div",{className:Ji,children:g.jsxDEV(at,{className:"closed-app-icon"},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/header/status.tsx",lineNumber:27,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/header/status.tsx",lineNumber:26,columnNumber:5},void 0)},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/header/status.tsx",lineNumber:25,columnNumber:3},void 0),ta=()=>g.jsxDEV(F,{content:"Jump to running cell",side:"right",children:g.jsxDEV("div",{className:Ji,"data-testid":"loading-indicator",onClick:Qi,children:g.jsxDEV(ot,{className:"running-app-icon",size:30,strokeWidth:1},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/header/status.tsx",lineNumber:39,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/header/status.tsx",lineNumber:34,columnNumber:5},void 0)},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/header/status.tsx",lineNumber:33,columnNumber:3},void 0),ra=()=>g.jsxDEV(g.Fragment,{children:[g.jsxDEV("div",{className:"noise"},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/header/status.tsx",lineNumber:46,columnNumber:5},void 0),g.jsxDEV("div",{className:"disconnected-gradient"},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/header/status.tsx",lineNumber:47,columnNumber:5},void 0)]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/header/status.tsx",lineNumber:45,columnNumber:3},void 0),oa=Oe,na=ke,ia=_e,aa=v.forwardRef((({className:e,...t},r)=>g.jsxDEV(we,{className:y("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/ui/sheet.tsx",lineNumber:20,columnNumber:3},void 0)));aa.displayName=we.displayName;const sa=je("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),la=v.forwardRef((({side:e="right",className:t,children:r,...o},n)=>g.jsxDEV(ia,{children:[g.jsxDEV(aa,{},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/ui/sheet.tsx",lineNumber:59,columnNumber:5},void 0),g.jsxDEV(xe,{ref:n,className:y(sa({side:e}),t),...o,children:[r,g.jsxDEV(Ne,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[g.jsxDEV(De,{className:"h-4 w-4"},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/ui/sheet.tsx",lineNumber:67,columnNumber:9},void 0),g.jsxDEV("span",{className:"sr-only",children:"Close"},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/ui/sheet.tsx",lineNumber:68,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/ui/sheet.tsx",lineNumber:66,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/ui/sheet.tsx",lineNumber:60,columnNumber:5},void 0)]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/ui/sheet.tsx",lineNumber:58,columnNumber:3},void 0)));la.displayName=xe.displayName;v.forwardRef((({className:e,...t},r)=>g.jsxDEV(Ee,{ref:r,className:y("text-lg font-semibold text-foreground",e),...t},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/ui/sheet.tsx",lineNumber:107,columnNumber:3},void 0))).displayName=Ee.displayName;v.forwardRef((({className:e,...t},r)=>g.jsxDEV(Se,{ref:r,className:y("text-sm text-muted-foreground",e),...t},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/ui/sheet.tsx",lineNumber:119,columnNumber:3},void 0))).displayName=Se.displayName;const ua=u.memo((()=>g.jsxDEV(Ce,{name:Pe.SIDEBAR},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/sidebar/sidebar-slot.tsx",lineNumber:7,columnNumber:10},void 0)));ua.displayName="SidebarSlot";const ca=()=>g.jsxDEV(oa,{children:[g.jsxDEV(na,{className:"lg:hidden",asChild:!0,children:g.jsxDEV(ie,{variant:"ghost",className:"bg-background",children:g.jsxDEV(nt,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/sidebar/sheet-sidebar.tsx",lineNumber:13,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/sidebar/sheet-sidebar.tsx",lineNumber:12,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/sidebar/sheet-sidebar.tsx",lineNumber:11,columnNumber:7},void 0),g.jsxDEV(la,{className:"w-full max-w-72 px-3 h-full flex flex-col",side:"left",children:g.jsxDEV(ua,{},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/sidebar/sheet-sidebar.tsx",lineNumber:20,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/sidebar/sheet-sidebar.tsx",lineNumber:16,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/sidebar/sheet-sidebar.tsx",lineNumber:10,columnNumber:5},void 0),da=Re({isOpen:!0},((e,t)=>t&&"toggle"===t.type?{...e,isOpen:t.isOpen}:e)),ma=({isOpen:e,toggle:t})=>g.jsxDEV("div",{className:"invisible lg:visible absolute top-[12px] right-[16px] z-20",children:g.jsxDEV(ie,{onClick:t,className:"w-10 h-8",variant:"ghost",size:"icon",children:g.jsxDEV(ze,{className:y("h-5 w-5 transition-transform ease-in-out duration-700",e?"rotate-0":"rotate-180")},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/sidebar/toggle.tsx",lineNumber:16,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/sidebar/toggle.tsx",lineNumber:15,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/sidebar/toggle.tsx",lineNumber:14,columnNumber:5},void 0),fa=({isOpen:e,toggle:t})=>g.jsxDEV("aside",{"data-expanded":e,className:y("app-sidebar auto-collapse-nav","absolute top-0 left-0 z-20 h-full -translate-x-full lg:translate-x-0 transition-[width] ease-in-out duration-300",e?"w-72":"w-[68px]"),children:[g.jsxDEV(ma,{isOpen:e,toggle:t},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/sidebar/sidebar.tsx",lineNumber:23,columnNumber:7},void 0),g.jsxDEV("div",{className:"relative h-full flex flex-col px-3 pb-16 pt-14 overflow-y-auto shadow-sm border-l",children:g.jsxDEV(ua,{},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/sidebar/sidebar.tsx",lineNumber:25,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/sidebar/sidebar.tsx",lineNumber:24,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/sidebar/sidebar.tsx",lineNumber:14,columnNumber:5},void 0),pa=({children:e})=>{const[{isOpen:t},r]=K(da);return 0===Me(Pe.SIDEBAR).length?e:g.jsxDEV(g.Fragment,{children:[g.jsxDEV(fa,{isOpen:t,toggle:()=>r({type:"toggle",isOpen:!t})},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/sidebar/wrapped-with-sidebar.tsx",lineNumber:25,columnNumber:7},void 0),g.jsxDEV("main",{className:y("h-full transition-[margin-left] ease-in-out duration-300 overflow-hidden relative",t?"lg:ml-72":"lg:ml-[68px]"),children:[g.jsxDEV("div",{className:"absolute top-3 left-4 flex items-center z-50",children:g.jsxDEV(ca,{},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/sidebar/wrapped-with-sidebar.tsx",lineNumber:37,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/sidebar/wrapped-with-sidebar.tsx",lineNumber:36,columnNumber:9},void 0),e]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/sidebar/wrapped-with-sidebar.tsx",lineNumber:29,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/renderers/vertical-layout/sidebar/wrapped-with-sidebar.tsx",lineNumber:24,columnNumber:5},void 0)},ha=()=>g.jsxDEV("div",{className:"flex flex-col h-full flex-1 items-center justify-center p-4",children:[g.jsxDEV(Te,{className:"size-20 animate-spin text-primary",strokeWidth:1},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/icons/large-spinner.tsx",lineNumber:7,columnNumber:7},void 0),g.jsxDEV("div",{className:"mt-2 text-muted-foreground font-semibold text-lg",children:"Initializing..."},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/icons/large-spinner.tsx",lineNumber:11,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/icons/large-spinner.tsx",lineNumber:6,columnNumber:5},void 0),ga=({children:e})=>{if(!Le())return e;const{loading:t,error:r}=Ve((async()=>(await Ie.INSTANCE.initialized.promise,!0)),[]);if(t)return g.jsxDEV(ha,{},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/core/pyodide/PyodideLoader.tsx",lineNumber:24,columnNumber:12},void 0);if(r)throw r;return e},ya=({width:e,connectionState:t,isRunning:r,children:o})=>g.jsxDEV(g.Fragment,{children:[g.jsxDEV(Zi,{state:t,isRunning:r},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/app-container.tsx",lineNumber:25,columnNumber:7},void 0),g.jsxDEV(ga,{children:g.jsxDEV(pa,{children:g.jsxDEV("div",{id:"App",className:y(t===$i.CLOSED&&"disconnected","bg-background w-full h-full text-textColor","flex flex-col overflow-y-auto overflow-x-hidden","full"===e&&"config-width-full"),children:o},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/app-container.tsx",lineNumber:28,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/app-container.tsx",lineNumber:27,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/app-container.tsx",lineNumber:26,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/app-container.tsx",lineNumber:24,columnNumber:5},void 0),ba=e=>g.jsxDEV("div",{id:"Disconnected",children:g.jsxDEV("p",{children:e.reason},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/Disconnected.tsx",lineNumber:6,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/Disconnected.tsx",lineNumber:5,columnNumber:5},void 0),va=({connection:e,className:t,children:r})=>g.jsxDEV("div",{className:t,children:[r,e.state===$i.CLOSED&&g.jsxDEV(ba,{reason:e.reason},void 0,!1,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/header/app-header.tsx",lineNumber:20,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/runner/work/marimo/marimo/frontend/src/components/editor/header/app-header.tsx",lineNumber:17,columnNumber:5},void 0),wa=X({state:$i.CONNECTING});globalThis.EventTarget&&globalThis.Event||console.error("\n  PartySocket requires a global 'EventTarget' class to be available!\n  You can polyfill this global by adding this to your code before any partysocket imports: \n  \n  ```\n  import 'partysocket/event-target-polyfill';\n  ```\n  Please file an issue at https://github.com/partykit/partykit if you're still having trouble.\n");var xa=class extends Event{constructor(e,t){super("error",t),r(this,"message"),r(this,"error"),this.message=e.message,this.error=e}},Na=class extends Event{constructor(e=1e3,t="",o){super("close",o),r(this,"code"),r(this,"reason"),r(this,"wasClean",!0),this.code=e,this.reason=t}},Da=(Event,xa),Ea=Na;var Sa="undefined"!=typeof process&&void 0!==(null==(e=process.versions)?void 0:e.node)&&"undefined"==typeof document?function(e){if("data"in e){return new MessageEvent(e.type,e)}if("code"in e||"reason"in e){return new Na(e.code||1999,e.reason||"unknown reason",e)}if("error"in e){return new xa(e.error,e)}return new Event(e.type,e)}:function(e){return new e.constructor(e.type,e)},Oa={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+4e3*Math.random(),minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0,startClosed:!1,debug:!1},ka=!1,_a=class e extends EventTarget{constructor(e,t,o={}){super(),r(this,"_ws"),r(this,"_retryCount",-1),r(this,"_uptimeTimeout"),r(this,"_connectTimeout"),r(this,"_shouldReconnect",!0),r(this,"_connectLock",!1),r(this,"_binaryType","blob"),r(this,"_closeCalled",!1),r(this,"_messageQueue",[]),r(this,"_debugLogger",console.log.bind(console)),r(this,"_url"),r(this,"_protocols"),r(this,"_options"),r(this,"onclose",null),r(this,"onerror",null),r(this,"onmessage",null),r(this,"onopen",null),r(this,"_handleOpen",(e=>{this._debug("open event");const{minUptime:t=Oa.minUptime}=this._options;clearTimeout(this._connectTimeout),this._uptimeTimeout=setTimeout((()=>this._acceptOpen()),t),function(e,t){if(!e)throw new Error(t)}(this._ws,"WebSocket is not defined"),this._ws.binaryType=this._binaryType,this._messageQueue.forEach((e=>{var t;return null==(t=this._ws)?void 0:t.send(e)})),this._messageQueue=[],this.onopen&&this.onopen(e),this.dispatchEvent(Sa(e))})),r(this,"_handleMessage",(e=>{this._debug("message event"),this.onmessage&&this.onmessage(e),this.dispatchEvent(Sa(e))})),r(this,"_handleError",(e=>{this._debug("error event",e.message),this._disconnect(void 0,"TIMEOUT"===e.message?"timeout":void 0),this.onerror&&this.onerror(e),this._debug("exec error listeners"),this.dispatchEvent(Sa(e)),this._connect()})),r(this,"_handleClose",(e=>{this._debug("close event"),this._clearTimeouts(),this._shouldReconnect&&this._connect(),this.onclose&&this.onclose(e),this.dispatchEvent(Sa(e))})),this._url=e,this._protocols=t,this._options=o,this._options.startClosed&&(this._shouldReconnect=!1),this._options.debugLogger&&(this._debugLogger=this._options.debugLogger),this._connect()}static get CONNECTING(){return 0}static get OPEN(){return 1}static get CLOSING(){return 2}static get CLOSED(){return 3}get CONNECTING(){return e.CONNECTING}get OPEN(){return e.OPEN}get CLOSING(){return e.CLOSING}get CLOSED(){return e.CLOSED}get binaryType(){return this._ws?this._ws.binaryType:this._binaryType}set binaryType(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)}get retryCount(){return Math.max(this._retryCount,0)}get bufferedAmount(){return this._messageQueue.reduce(((e,t)=>("string"==typeof t?e+=t.length:t instanceof Blob?e+=t.size:e+=t.byteLength,e)),0)+(this._ws?this._ws.bufferedAmount:0)}get extensions(){return this._ws?this._ws.extensions:""}get protocol(){return this._ws?this._ws.protocol:""}get readyState(){return this._ws?this._ws.readyState:this._options.startClosed?e.CLOSED:e.CONNECTING}get url(){return this._ws?this._ws.url:""}get shouldReconnect(){return this._shouldReconnect}close(e=1e3,t){this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),this._ws?this._ws.readyState!==this.CLOSED?this._ws.close(e,t):this._debug("close: already closed"):this._debug("close enqueued: no ws instance")}reconnect(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,this._ws&&this._ws.readyState!==this.CLOSED?(this._disconnect(e,t),this._connect()):this._connect()}send(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{const{maxEnqueuedMessages:t=Oa.maxEnqueuedMessages}=this._options;this._messageQueue.length<t&&(this._debug("enqueue",e),this._messageQueue.push(e))}}_debug(...e){this._options.debug&&this._debugLogger("RWS>",...e)}_getNextDelay(){const{reconnectionDelayGrowFactor:e=Oa.reconnectionDelayGrowFactor,minReconnectionDelay:t=Oa.minReconnectionDelay,maxReconnectionDelay:r=Oa.maxReconnectionDelay}=this._options;let o=0;return this._retryCount>0&&(o=t*Math.pow(e,this._retryCount-1),o>r&&(o=r)),this._debug("next delay",o),o}_wait(){return new Promise((e=>{setTimeout(e,this._getNextDelay())}))}_getNextProtocols(e){if(!e)return Promise.resolve(null);if("string"==typeof e||Array.isArray(e))return Promise.resolve(e);if("function"==typeof e){const t=e();if(!t)return Promise.resolve(null);if("string"==typeof t||Array.isArray(t))return Promise.resolve(t);if(t.then)return t}throw Error("Invalid protocols")}_getNextUrl(e){if("string"==typeof e)return Promise.resolve(e);if("function"==typeof e){const t=e();if("string"==typeof t)return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")}_connect(){if(this._connectLock||!this._shouldReconnect)return;this._connectLock=!0;const{maxRetries:e=Oa.maxRetries,connectionTimeout:t=Oa.connectionTimeout}=this._options;this._retryCount>=e?this._debug("max retries reached",this._retryCount,">=",e):(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),this._wait().then((()=>Promise.all([this._getNextUrl(this._url),this._getNextProtocols(this._protocols||null)]))).then((([e,r])=>{if(this._closeCalled)return void(this._connectLock=!1);this._options.WebSocket||"undefined"!=typeof WebSocket||ka||(console.error("‼️ No WebSocket implementation available. You should define options.WebSocket. \n\nFor example, if you're using node.js, run `npm install ws`, and then in your code:\n\nimport PartySocket from 'partysocket';\nimport WS from 'ws';\n\nconst partysocket = new PartySocket({\n  host: \"127.0.0.1:1999\",\n  room: \"test-room\",\n  WebSocket: WS\n});\n\n"),ka=!0);const o=this._options.WebSocket||WebSocket;this._debug("connect",{url:e,protocols:r}),this._ws=r?new o(e,r):new o(e),this._ws.binaryType=this._binaryType,this._connectLock=!1,this._addListeners(),this._connectTimeout=setTimeout((()=>this._handleTimeout()),t)})).catch((e=>{this._connectLock=!1,this._handleError(new Da(Error(e.message),this))})))}_handleTimeout(){this._debug("timeout event"),this._handleError(new Da(Error("TIMEOUT"),this))}_disconnect(e=1e3,t){if(this._clearTimeouts(),this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new Ea(e,t,this))}catch(r){}}}_acceptOpen(){this._debug("accept open"),this._retryCount=0}_removeListeners(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))}_addListeners(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))}_clearTimeouts(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)}};
/*!
 * Reconnecting WebSocket
 * by Pedro Ladaria <pedro.ladaria@gmail.com>
 * https://github.com/pladaria/reconnecting-websocket
 * License MIT
 */
class ja{constructor(){r(this,"CONNECTING",WebSocket.CONNECTING),r(this,"OPEN",WebSocket.OPEN),r(this,"CLOSING",WebSocket.CLOSING),r(this,"CLOSED",WebSocket.CLOSED),r(this,"binaryType","blob"),r(this,"bufferedAmount",0),r(this,"extensions",""),r(this,"protocol",""),r(this,"url",""),r(this,"onclose",null),r(this,"onerror",null),r(this,"onmessage",null),r(this,"onopen",null),r(this,"readyState",WebSocket.OPEN),r(this,"retryCount",0),r(this,"shouldReconnect",!1)}addEventListener(e,t,r){}removeEventListener(e,t,r){}dispatchEvent(e){return!1}reconnect(e,t){}send(e){}close(){}}const{reducer:Ca,createActions:Pa,valueAtom:Ra,useActions:za}=de((function(){return{}}),{setVariables:(e,t)=>{const r={...e},o={};for(const n of t)o[n.name]={...r[n.name],...n};return o},addVariables:(e,t)=>{const r={...e};for(const o of t)r[o.name]={...r[o.name],...o};return r},setMetadata:(e,t)=>{const r={...e};for(const{name:o,value:n,dataType:i}of t)r[o]&&(r[o]={...r[o],value:n,dataType:i});return r}}),Ma=()=>me(Ra);const{valueAtom:Ta,useActions:La}=de((()=>({banners:[]})),{addBanner:(e,t)=>({...e,banners:[...e.banners,t]}),removeBanner:(e,t)=>({...e,banners:e.banners.filter((e=>e.id!==t))}),clearBanners:e=>({...e,banners:[]})}),Va=()=>me(Ta);function Ia(){return La()}function Ha(e){return"missing"===e.kind}function Aa(e){return"installing"===e.kind}const{valueAtom:Wa,useActions:qa}=de((()=>({packageAlert:null})),{addPackageAlert:(e,t)=>({...e,packageAlert:{id:Ae(),...t}}),clearPackageAlert:(e,t)=>null!==e.packageAlert&&e.packageAlert.id===t?{...e,packageAlert:null}:e}),Ba=()=>me(Wa);function Ga(){return qa()}function Fa(e){const t=document.baseURI,r=new URL(t),o="https:"===r.protocol?"wss":"ws";r.protocol=o,r.pathname=`${function(e){return e.endsWith("/")?e.slice(0,-1):e}(r.pathname)}/ws`;const n=new URLSearchParams(window.location.search);return n.set("session_id",e),r.search=n.toString(),r.toString()}function Ua(e,t){const{autoInstantiate:r,setCells:o,setLayoutData:n,onError:a,setAppConfig:s}=t,{codes:l,names:u,layout:c,configs:d,resumed:m,ui_values:f,cell_ids:p,last_executed_code:h={},app_config:g}=e,y=l.map(((e,t)=>{const o=p[t];let n=!1;if(r||m){const t=h[o];t&&(n=t!==e)}else n=!0;return We({id:o,code:e,edited:n,name:u[t],lastCodeRun:h[o]??null,config:d[t]})})),b={selectedLayout:"vertical",layoutData:{}};if(c){const e=function(e,t,r){const o=Wi.find((t=>t.type===e));if(void 0===o)throw new Error(`Unknown layout type: ${e}`);return o.deserializeLayout(t,r)}(c.type,c.data,y);b.selectedLayout=c.type,b.layoutData[c.type]=e,n({layoutView:c.type,data:e})}if(o(y,b),s(g),m){for(const[e,t]of C.entries(f||{}))i.set(e,t);return}const v=[],w=[];i.entries.forEach(((e,t)=>{v.push(t),w.push(e.value)})),r&&qe({objectIds:v,values:w}).catch((e=>{a(new Error("Failed to instantiate",{cause:e}))}))}const Ya=e=>{const t=new URL(window.location.href);t.searchParams.append(e.key,e.value),window.history.pushState({},"",`${t.pathname}${t.search}`)},Xa=e=>{const t=new URL(window.location.href);Array.isArray(e.value)?(t.searchParams.delete(e.key),e.value.forEach((r=>t.searchParams.append(e.key,r)))):t.searchParams.set(e.key,e.value),window.history.pushState({},"",`${t.pathname}${t.search}`)},$a=e=>{const t=new URL(window.location.href);null==e.value?t.searchParams.delete(e.key):t.searchParams.delete(e.key,e.value),window.history.pushState({},"",`${t.pathname}${t.search}`)},Ka=()=>{const e=new URL(window.location.href);e.search="",window.history.pushState({},"",`${e.pathname}${e.search}`)};function Qa(e){const t=u.useRef(!0),{autoInstantiate:r,sessionId:o,setCells:n}=e,{showBoundary:a}=Be(),{handleCellMessage:l}=G(),c=Ge(),{setVariables:d,setMetadata:m}=za(),{setLayoutData:f}=Ui(),[p,h]=K(wa),{addBanner:g}=Ia(),{addPackageAlert:y}=Ga(),b=e=>{const t=Ye(e.data);switch(t.op){case"reload":return void window.location.reload();case"kernel-ready":return void Ua(t.data,{autoInstantiate:r,setCells:n,setLayoutData:f,setAppConfig:c,onError:a});case"completed-run":case"interrupted":return;case"remove-ui-elements":return void function(e){const{cell_id:t}=e;i.removeElementsByCell(t),Vi.INSTANCE.removeForCellId(t)}(t.data);case"completion-result":return void Qe.resolve(t.data.completion_id,t.data);case"function-call-result":return void Ke.resolve(t.data.function_call_id,t.data);case"cell-op":return void function(e,t){t(e),Vi.INSTANCE.track(e)}(t.data,l);case"variables":return void d(t.data.variables.map((e=>({name:e.name,declaredBy:e.declared_by,usedBy:e.used_by}))));case"variable-values":return void m(t.data.variables.map((e=>({name:e.name,dataType:e.datatype,value:e.value}))));case"alert":return void Fe({title:t.data.title,description:$e({html:t.data.description}),variant:t.data.variant});case"banner":return void g({...t.data,id:Ae()});case"missing-package-alert":return void y({...t.data,kind:"missing"});case"installing-package-alert":return void y({...t.data,kind:"installing"});case"query-params-append":return void Ya(t.data);case"query-params-set":return void Xa(t.data);case"query-params-delete":return void $a(t.data);case"query-params-clear":return void Ka();default:Xe(t)}},v=(e,r)=>{t.current&&(t.current=!1,w.reconnect(e,r))},w=function(e){const{onOpen:t,onMessage:r,onClose:o,onError:n,...i}=e,[a]=u.useState((()=>{const a=Le()?new He(Ie.INSTANCE):e.static?new ja:new _a(i.url,void 0,{maxRetries:10,debug:!1,startClosed:!0});return t&&a.addEventListener("open",t),o&&a.addEventListener("close",o),n&&a.addEventListener("error",n),r&&a.addEventListener("message",r),a}));return u.useEffect((()=>(a.readyState===WebSocket.CLOSED&&a.reconnect(),()=>{s.warn("useWebSocket is unmounting. This likely means there is a bug."),a.close(),t&&a.removeEventListener("open",t),o&&a.removeEventListener("close",o),n&&a.removeEventListener("error",n),r&&a.removeEventListener("message",r)})),[a]),a}({static:ne(),url:Fa(o),onOpen:()=>{t.current=!0,h({state:$i.OPEN})},onMessage:e=>{try{b(e)}catch(t){Fe({title:"Failed to handle message",description:Ue(t),variant:"danger"})}},onClose:e=>{switch(e.reason){case"MARIMO_ALREADY_CONNECTED":return h({state:$i.CLOSED,code:Ki.ALREADY_RUNNING,reason:"another browser tab is already connected to the kernel"}),void w.close();case"MARIMO_WRONG_KERNEL_ID":case"MARIMO_SHUTDOWN":return s.warn("WebSocket closed",e.reason),h({state:$i.CLOSED,code:Ki.KERNEL_DISCONNECTED,reason:"kernel not found"}),void w.close();case"MARIMO_MALFORMED_QUERY":return void h({state:$i.CLOSED,code:Ki.MALFORMED_QUERY,reason:"the kernel did not recognize a request; please file a bug with marimo"});default:h({state:$i.CONNECTING}),v(e.code,e.reason)}},onError:e=>{s.warn("WebSocket error",e),h({state:$i.CLOSED,code:Ki.KERNEL_DISCONNECTED,reason:"kernel not found"}),v()}});return{connection:p}}export{ya as A,Xi as C,tt as F,nt as M,_i as N,lt as R,gi as T,Vi as V,$i as W,va as a,Fi as b,Ui as c,wa as d,Mi as e,Ii as f,Ri as g,Va as h,Ia as i,Ba as j,Ga as k,Ha as l,Aa as m,ki as n,Oi as o,Yi as p,Ma as q,Qa as u,Ra as v};
