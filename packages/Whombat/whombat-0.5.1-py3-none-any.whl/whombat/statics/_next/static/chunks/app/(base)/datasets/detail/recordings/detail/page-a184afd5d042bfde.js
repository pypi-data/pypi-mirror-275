(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3300],{94991:function(e,t,n){Promise.resolve().then(n.bind(n,1718))},19985:function(e,t,n){"use strict";let s=(0,n(2265).createContext)({id:"",username:"",email:""});t.Z=s},1718:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var s=n(57437),a=n(16463),l=n(2265),r=n(88726),i=n(19985),o=n(40918),c=n(82517),d=n(75761),u=n(12098),x=n(14088),m=n(15964),f=n(83192);function h(e){let{onDelete:t}=e;return(0,s.jsx)(d.Z,{title:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.aN,{className:"inline-block w-8 h-8 mr-2 text-red-500"}),"Are you sure you want to delete this recording?"]}),button:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.pJ,{className:"inline-block w-5 h-5 mr-2"}),"Delete Recording"]}),mode:"text",variant:"danger",children:e=>{let{close:n}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("p",{children:"This action cannot be undone. This will permanently delete the recording from the database and remove the metadata and all associated files. This includes any annotations, notes, and tags associated with the recording."}),(0,s.jsx)("p",{className:"font-semibold dark:text-red-400 text-red-600",children:"It is not recommended to delete a recording that has been annotated."}),(0,s.jsx)("p",{children:"Do you want to proceed?"})]}),(0,s.jsxs)("div",{className:"flex flex-row justify-end gap-2 mt-4",children:[(0,s.jsxs)(u.Z,{tabIndex:0,mode:"text",variant:"danger",onClick:t,children:[(0,s.jsx)(x.pJ,{className:"h-5 w-5 inline-block mr-2"}),"Delete"]}),(0,s.jsxs)(u.Z,{tabIndex:1,mode:"outline",variant:"primary",onClick:n,children:[(0,s.jsx)(x.Tw,{className:"h-5 w-5 inline-block mr-2"}),"Cancel"]})]})]})}})}function j(e){let{recording:t,onDelete:n}=e,{downloadURL:a,delete:l}=(0,f.Z)({uuid:t.uuid,recording:t,onDelete:n});return(0,s.jsxs)("div",{className:"flex flex-row gap-2 justify-center",children:[(0,s.jsxs)(m.Z,{mode:"text",variant:"primary",href:a||"","aria-disabled":null==a,download:!0,children:[(0,s.jsx)(x._8,{className:"h-5 w-5 inline-block mr-2"})," Download"]}),(0,s.jsx)(h,{onDelete:()=>l.mutate()})]})}var v=n(35414),p=n(57818),g=n(71672);let b=(0,p.default)(()=>Promise.all([n.e(8755),n.e(4212),n.e(6126)]).then(n.bind(n,56126)),{loadableGenerated:{webpack:()=>[56126]},ssr:!1}),N=(0,p.default)(()=>Promise.all([n.e(8755),n.e(4212),n.e(378)]).then(n.bind(n,378)),{loadableGenerated:{webpack:()=>[378]},ssr:!1});function w(e){var t,n,a,l;let{recording:r}=e,i=null!=r.latitude&&null!=r.longitude;return(0,s.jsxs)(g.Z,{children:[(0,s.jsxs)("div",{className:"flex flex-row justify-center items-center",children:[(0,s.jsx)(x.Zl,{className:"inline-block mr-1 w-5 h-5 text-stone-500"}),"Recorded at"]}),i?(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)(b,{className:"h-64",center:{lat:null!==(t=r.latitude)&&void 0!==t?t:0,lng:null!==(n=r.longitude)&&void 0!==n?n:0},scrollWheelZoom:!0,zoom:14,children:(0,s.jsx)(N,{draggable:!1,updateOnChange:!0,center:{lat:null!==(a=r.latitude)&&void 0!==a?a:0,lng:null!==(l=r.longitude)&&void 0!==l?l:0}})})}):(0,s.jsx)("div",{className:"text-sm text-stone-400 dark:text-stone-600",children:"No location provided."})]})}function Z(e){let{label:t}=e;return(0,s.jsx)("div",{className:"font-thin text-sm text-stone-500 mr-2",children:t})}function y(e){let{units:t}=e;return(0,s.jsx)("span",{className:"ml-1 text-stone-500",children:t})}function k(e){let{recording:t}=e;return(0,s.jsxs)(g.Z,{children:[(0,s.jsxs)("div",{className:"inline-flex items-center",children:[(0,s.jsx)(x.wZ,{className:"h-5 w-5 inline-block text-stone-500 mr-1"}),(0,s.jsx)(Z,{label:"Duration"}),t.duration.toFixed(3),(0,s.jsx)(y,{units:"s"})]}),(0,s.jsxs)("div",{className:"inline-flex items-center",children:[(0,s.jsx)(x.QE,{className:"h-5 w-5 inline-block text-stone-500 mr-1"}),(0,s.jsx)(Z,{label:"Channels"}),t.channels]}),(0,s.jsxs)("div",{className:"inline-flex items-center",children:[(0,s.jsx)(x.Dd,{className:"h-5 w-5 inline-block text-stone-500 mr-1"}),(0,s.jsx)(Z,{label:"Sample rate"}),t.samplerate.toLocaleString(),(0,s.jsx)(y,{units:"Hz"})]}),(0,s.jsxs)("div",{className:"inline-flex items-center",children:[(0,s.jsx)(x.i5,{className:"h-5 w-5 inline-block text-stone-500 mr-1"}),(0,s.jsx)(Z,{label:"Time expansion"}),t.time_expansion]})]})}var C=n(68e3),F=n(95683),T=n(94401);function S(){return(0,s.jsx)("div",{className:"p-4 w-full",children:(0,s.jsxs)("div",{className:"flex flex-col justify-center items-center p-8 w-full rounded-lg border border-dashed border-stone-500 bg-stone-300 dark:bg-stone-800",children:[(0,s.jsxs)("span",{className:"text-stone-700 dark:text-stone-300",children:[(0,s.jsx)(x.uH,{className:"inline-block mr-1 w-5 h-5"})," No notes"]}),(0,s.jsx)("span",{className:"text-sm text-stone-500",children:"Create a note above to start a conversation about this recording."})]})})}function D(e){let{recording:t,currentUser:n}=e,{data:a,addNote:r,set:i}=(0,f.Z)({uuid:t.uuid,recording:t,enabled:!1}),o=(0,l.useCallback)(e=>{var t;null!=a&&i({...a,notes:null===(t=a.notes)||void 0===t?void 0:t.map(t=>t.uuid===e.uuid?e:t)})},[a,i]),c=(0,l.useCallback)(e=>{var t;null!=a&&i({...a,notes:null===(t=a.notes)||void 0===t?void 0:t.filter(t=>t.uuid!==e.uuid)})},[a,i]),d=(0,l.useMemo)(()=>t.notes||[],[t.notes]);return(0,s.jsxs)(g.Z,{children:[(0,s.jsxs)(C.H3,{children:[(0,s.jsx)(x.uH,{className:"inline-block mr-1 w-5 h-5"}),"Notes"]}),0===d.length?(0,s.jsx)(S,{}):(0,s.jsx)(T.Z,{notes:d,currentUser:n,onUpdate:o,onDelete:c}),(0,s.jsx)(F.Z,{onCreate:r.mutate})]})}var E=n(80021),P=n(57485);function _(e){let{recording:t,currentUser:n,parameters:a=c._z,onParameterSave:l,onDelete:r}=e;return(0,s.jsxs)("div",{className:"flex flex-col gap-4 pb-4",children:[(0,s.jsx)(v.ZP,{recording:t}),(0,s.jsxs)("div",{className:"flex flex-row flex-wrap gap-8 justify-between lg:flex-nowrap w-100",children:[(0,s.jsx)("div",{className:"grow",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-8",children:[(0,s.jsx)("div",{className:"col-span-2",children:(0,s.jsx)(P.Z,{recording:t})}),(0,s.jsx)("div",{className:"col-span-2",children:(0,s.jsx)(E.Z,{parameters:a,onParameterSave:l,recording:t})}),(0,s.jsx)("div",{className:"col-span-2",children:(0,s.jsx)(D,{recording:t,currentUser:n})})]})}),(0,s.jsxs)("div",{className:"flex flex-col flex-none gap-4 max-w-sm",children:[(0,s.jsx)(j,{recording:t,onDelete:r}),(0,s.jsx)(k,{recording:t}),(0,s.jsx)(w,{recording:t})]})]})]})}var z=n(75728);function I(){let e=(0,l.useContext)(i.Z),t=(0,a.useRouter)(),n=(0,a.useSearchParams)(),c=n.get("recording_uuid"),d=n.get("dataset_uuid"),u=(0,z.Z)(e=>e.spectrogramSettings),x=(0,z.Z)(e=>e.setSpectrogramSettings),m=(0,l.useCallback)(()=>{null==d&&t.push("/datasets/"),t.push("/datasets/detail/recordings/?dataset_uuid=".concat(d))},[t,d]),h=(0,l.useCallback)(e=>{var t;(null===(t=e.response)||void 0===t?void 0:t.status)===404&&(r.ZP.error("Recording not found"),m())},[m]),j=(0,l.useCallback)(e=>{r.ZP.success("Parameters saved"),x(e)},[x]),v=(0,l.useCallback)(()=>{r.ZP.success("Recording deleted"),m()},[m]);null==c&&(0,a.notFound)();let p=(0,f.Z)({uuid:c,onError:h});return p.isLoading?(0,s.jsx)(o.Z,{}):p.isError||null==p.data?h(p.error):(0,s.jsx)(_,{recording:p.data,currentUser:e,onDelete:v,parameters:u,onParameterSave:j})}},40918:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var s=n(57437),a=n(4933);function l(){return(0,s.jsx)("div",{className:"w-full h-full flex flex-row justify-center items-center",children:(0,s.jsx)(a.Z,{})})}},75761:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var s=n(57437),a=n(57605);function l(e){let{children:t,title:n,button:l="Open",...r}=e;return(0,s.jsx)(a.Z,{title:n,label:l,...r,children:t})}},71672:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var s=n(57437),a=n(56800),l=n.n(a);function r(e){let{children:t,className:n,...a}=e;return(0,s.jsx)("div",{className:l()("border flex flex-col gap-3 p-4 rounded-md border-stone-200 dark:border-stone-800 text-stone-700 dark:text-stone-300",n),...a,children:t})}},57605:function(e,t,n){"use strict";n.d(t,{Z:function(){return c},t:function(){return d}});var s=n(57437),a=n(59226),l=n(24880),r=n(2265),i=n(12098),o=n(14088);function c(e){let{title:t,children:n,label:a,open:l=!1,width:o="max-w-md",...c}=e,[u,x]=(0,r.useState)(l);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.Z,{type:"button",onClick:()=>x(!0),...c,children:a}),(0,s.jsx)(d,{title:(0,s.jsx)("div",{children:t}),isOpen:u,onClose:()=>x(!1),children:e=>{let{close:t}=e;return(0,s.jsx)("div",{className:o,children:n({close:t})})}})]})}function d(e){let{title:t,children:n,onClose:c,isOpen:d=!0}=e;return(0,s.jsx)(a.u,{appear:!0,show:d,as:r.Fragment,children:(0,s.jsxs)(l.V,{as:"div",className:"relative z-50",onClose:()=>null==c?void 0:c(),children:[(0,s.jsx)(a.u.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,s.jsx)("div",{className:"overflow-y-auto fixed inset-0",children:(0,s.jsx)("div",{className:"flex justify-center items-center p-4 min-h-full text-center",children:(0,s.jsx)(a.u.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,s.jsxs)(l.V.Panel,{className:"overflow-hidden p-6 w-full text-left align-middle rounded-2xl shadow-xl transition-all transform max-w-fit bg-stone-50 text-stone-700 z-[99999] dark:bg-stone-700 dark:text-stone-300",children:[(0,s.jsxs)(l.V.Title,{as:"div",className:"mb-4 flex flex-row justify-between items-center gap-4",children:[null!=t&&(0,s.jsx)("h3",{className:"text-lg font-medium leading-6 text-stone-900 dark:text-stone-100",children:t}),(0,s.jsx)(i.Z,{onClick:()=>null==c?void 0:c(),variant:"secondary",mode:"text",children:(0,s.jsx)(o.Tw,{className:"w-5 h-5"})})]}),(0,s.jsx)("div",{className:"mt-2",children:n({close:()=>null==c?void 0:c()})})]})})})})]})})}},68e3:function(e,t,n){"use strict";n.d(t,{H1:function(){return r},H2:function(){return i},H3:function(){return o},H4:function(){return c}});var s=n(57437),a=n(56800),l=n.n(a);function r(e){let{children:t,className:n,...a}=e;return(0,s.jsx)("h1",{className:l()("text-2xl font-bold text-stone-800 dark:text-stone-300",n),...a,children:t})}function i(e){let{children:t,className:n,...a}=e;return(0,s.jsx)("h2",{className:l()("text-xl font-bold text-stone-800 dark:text-stone-300",n),...a,children:t})}function o(e){let{children:t,className:n,...a}=e;return(0,s.jsx)("h3",{className:l()("text-lg font-semibold leading-7 items-center text-stone-800 dark:text-stone-300",n),...a,children:t})}function c(e){let{children:t,className:n,...a}=e;return(0,s.jsx)("h4",{className:l()(n,"text-md font-semibold leading-6 text-stone-800 dark:text-stone-300"),...a,children:t})}},15964:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var s=n(57437),a=n(56800),l=n.n(a),r=n(87138),i=n(12098);function o(e){let{children:t,variant:n="primary",mode:a="filled",padding:o="p-2.5",className:c,...d}=e,u=(0,i.y)({variant:n,mode:a,padding:o});return(0,s.jsx)(r.default,{...d,className:l()(u,c),children:t})}},87576:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var s=n(57437),a=n(49896),l=n(35933);function r(e){let{button:t,children:n,placement:r="bottom",offset:i=4,autoPlacement:o=!1}=e;return(0,s.jsx)(a.J,{as:"div",className:"inline-block text-left",children:(0,s.jsxs)(l.bv,{zIndex:10,placement:r,offset:i,enter:"transition duration-200 ease-out",enterFrom:"scale-95 opacity-0",enterTo:"scale-100 opacity-100",leave:"transition duration-150 ease-in",leaveFrom:"scale-100 opacity-100",leaveTo:"scale-95 opacity-0",portal:!0,autoPlacement:o,children:[(0,s.jsx)(a.J.Button,{as:"div",children:t}),(0,s.jsx)(a.J.Panel,{className:"w-72",focus:!0,unmount:!0,children:e=>{let{close:t}=e;return n({close:t})}})]})})}},95683:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var s=n(57437),a=n(2265),l=n(12098),r=n(14088),i=n(93847);function o(e){let{onCreate:t}=e,[n,o]=(0,a.useState)("");return(0,s.jsxs)("div",{className:"flex flex-col p-4 w-full",children:[(0,s.jsx)(i.BZ,{label:"Add a note",name:"message",help:"Write the note message and click on the type of note you want to create.",children:(0,s.jsx)(i.Kx,{name:"message",value:n,placeholder:"Type your note here...",onChange:e=>o(e.target.value)})}),(0,s.jsxs)("div",{className:"flex flex-row gap-4 justify-end",children:[(0,s.jsxs)(l.Z,{variant:"danger",mode:"text",onClick:()=>{o(""),null==t||t({message:n,is_issue:!0})},children:[(0,s.jsx)(r.uN,{className:"inline-block mr-1 w-5 h-5"}),"Add Issue"]}),(0,s.jsxs)(l.Z,{variant:"primary",mode:"text",onClick:()=>{o(""),null==t||t({message:n,is_issue:!1})},children:[(0,s.jsx)(r.uH,{className:"inline-block mr-1 w-5 h-5"}),"Add Note"]})]})]})}},94401:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var s=n(57437);n(2265);var a=n(46033);function l(e){let{notes:t,currentUser:n,onUpdate:l,onDelete:r}=e;return(0,s.jsx)("ul",{"aria-label":"feed",role:"feed",className:"flex relative flex-col gap-12 py-12 pl-6 before:absolute before:top-0 before:left-6 before:h-full before:-translate-x-1/2 before:border before:border-dashed before:border-stone-200 before:dark:border-stone-700 after:absolute after:top-6 after:left-6 after:bottom-6 after:-translate-x-1/2 after:border after:border-stone-200 after:dark:border-stone-700",children:t.map(e=>(0,s.jsx)(a.Z,{note:e,currentUser:n,onUpdate:l,onDelete:r},e.uuid))})}},46033:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var s=n(57437),a=n(12098),l=n(14088),r=n(2857),i=n(37051),o=n(26731);function c(e){var t,n;let{note:c,currentUser:d,actions:u,onUpdate:x,onDelete:m}=e,f=function(e){let{uuid:t,note:n,onUpdate:s,onDelete:a,enabled:l=!0}=e;if(void 0!==n&&n.uuid!==t)throw Error("Note uuid does not match");let{query:r,useMutation:c}=(0,o.ZP)({uuid:t,initial:n,name:"note",enabled:l,getFn:i.Z.notes.get}),d=c({mutationFn:i.Z.notes.update,onSuccess:s}),u=c({mutationFn:i.Z.notes.delete,onSuccess:a});return{...r,update:d,delete:u}}({uuid:c.uuid,note:c,onUpdate:x});return f.isLoading||null==f.data?(0,s.jsx)(r.Z,{}):(0,s.jsx)("li",{role:"article",className:"relative p-2 pl-6",children:(0,s.jsxs)("div",{className:"flex flex-col flex-1 gap-2",children:[(0,s.jsx)("div",{className:"flex absolute -left-3 z-10 flex-row justify-center items-center w-6 h-6 rounded-full bg-stone-100 dark:bg-stone-900",children:f.data.is_issue?(0,s.jsx)(l.uN,{className:"inline-block w-5 h-5 text-red-500"}):(0,s.jsx)(l.Zi,{className:"inline-block w-5 h-5 text-ston-500"})}),(0,s.jsxs)("h4",{className:"flex flex-col items-start text-base font-medium leading-6 md:flex-row lg:items-center text-stone-700 dark:text-stone-300",children:[(0,s.jsx)("span",{className:"flex-1",children:(null===(t=c.created_by)||void 0===t?void 0:t.username)||"anonymous"}),(0,s.jsxs)("span",{className:"text-xs font-normal text-stone-400",children:[" ",f.data.created_on.toLocaleString()]})]}),(0,s.jsx)("p",{className:"text-sm text-stone-500",children:f.data.message}),(0,s.jsxs)("div",{className:"flex flex-row gap-4 justify-end",children:[u,f.data.is_issue&&(0,s.jsxs)(a.Z,{mode:"text",variant:"warning",className:"text-xs",onClick:()=>f.update.mutate({is_issue:!1}),children:[(0,s.jsx)(l.uN,{className:"inline-block mr-1 w-4 h-4"}),"Resolve"]}),(null==d?void 0:d.id)===(null===(n=f.data.created_by)||void 0===n?void 0:n.id)?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(a.Z,{mode:"text",variant:"danger",className:"text-xs",onClick:()=>null==m?void 0:m(f.data),children:[(0,s.jsx)(l.pJ,{className:"inline-block mr-1 w-4 h-4"}),"Remove"]})}):null]})]})})}},68148:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var s=n(57437),a=n(2265),l=n(39343),r=n(59772),i=n(12098),o=n(71672),c=n(14088),d=n(93847),u=n(87576),x=n(42503);function m(e){let{date:t,disabled:n}=e;return(0,s.jsxs)(i.Z,{mode:"text",variant:"secondary",padding:"py-1",disabled:n,children:[(0,s.jsx)(c.IH,{className:"inline-block mr-1 w-5 h-5 text-stone-500"}),null!=t?t.toLocaleDateString():(0,s.jsx)("span",{className:"text-sm text-stone-400 dark:text-stone-600",children:"-"})]})}let f=r.z.object({date:r.z.coerce.date().nullish()});function h(e){let{date:t,onChange:n,disabled:r=!1}=e,{register:h,handleSubmit:j,watch:v}=(0,l.cI)({mode:"onChange",values:{date:null==t?"":t.toISOString().split("T")[0]},disabled:r}),p=(0,a.useCallback)(e=>{let{date:t}=f.parse({date:""===e.date?null:e.date});null==n||n({date:t})},[n]);(0,x.Z)({onSubmit:p,watch:v,handleSubmit:j});let[g]=v(["date"]);return r?(0,s.jsx)(m,{date:t,disabled:!0}):(0,s.jsx)(u.Z,{button:(0,s.jsx)(m,{date:t}),children:()=>(0,s.jsxs)(o.Z,{className:"bg-stone-800",children:[(0,s.jsx)(d.BZ,{name:"date",label:"Date",help:"Change date of recording. Format: YYYY-MM-DD",children:(0,s.jsx)(d.II,{type:"date",...h("date"),value:g})}),(0,s.jsxs)(i.Z,{mode:"text",variant:"danger",onClick:()=>null==n?void 0:n({date:null}),children:[(0,s.jsx)(c.Tw,{className:"inline-block mr-1 w-5 h-5"}),"Clear"]})]})})}},35414:function(e,t,n){"use strict";n.d(t,{ZP:function(){return f},eb:function(){return x},yZ:function(){return m}});var s=n(57437),a=n(88726),l=n(68e3),r=n(14088),i=n(237),o=n(83192),c=n(68148),d=n(3347),u=n(57581);function x(e){var t;return null===(t=e.split("\\").pop())||void 0===t?void 0:t.split("/").pop()}function m(e){return e.split(".").slice(0,-1).join(".")}function f(e){var t;let{recording:n}=e,{path:f}=n,h=m(null!==(t=x(f))&&void 0!==t?t:""),{data:j,update:v}=(0,o.Z)({uuid:n.uuid,recording:n,enabled:!0});return(0,s.jsxs)("div",{className:"flex overflow-x-auto flex-row gap-x-6 items-center w-full",children:[(0,s.jsxs)("div",{className:"inline-flex items-center",children:[(0,s.jsx)(r.He,{className:"inline-block mr-1 w-5 h-5 text-stone-500"}),(0,s.jsx)(l.H3,{className:"max-w-xl whitespace-nowrap",children:(0,s.jsx)(i.Z,{tooltip:(0,s.jsxs)("div",{className:"w-96 text-sm font-thin tracking-tighter whitespace-normal break-all dark:bg-stone-700 dark:border-stone-800",children:[(0,s.jsx)("span",{className:"font-normal text-blue-500",children:"Full path:"})," ",f]}),placement:"bottom",children:(0,s.jsxs)("button",{type:"button",className:"overflow-hidden w-full text-ellipsis",onClick:()=>{navigator.clipboard.writeText(f),a.ZP.success("Copied full path to clipboard")},children:[h,(0,s.jsx)("span",{className:"text-sm text-stone-500",children:".WAV"})]})})})]}),(0,s.jsx)(d.Z,{latitude:null==j?void 0:j.latitude,longitude:null==j?void 0:j.longitude,onChange:v.mutate}),(0,s.jsx)(u.Z,{time:null==j?void 0:j.time,onChange:v.mutate}),(0,s.jsx)(c.Z,{date:null==j?void 0:j.date,onChange:v.mutate})]})}},3347:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var s=n(57437),a=n(12098),l=n(71672),r=n(14088),i=n(30482),o=n(87576);function c(e){let{latitude:t,longitude:n,disabled:l}=e,o=null!=t&&null!=n;return(0,s.jsxs)(a.Z,{mode:"text",variant:"secondary",padding:"py-1",disabled:l,children:[(0,s.jsx)(r._t,{className:"inline-block mr-1 w-5 h-5 text-stone-500"}),o?(0,i.T)({latitude:t,longitude:n}):(0,s.jsx)("span",{className:"text-sm text-stone-400 dark:text-stone-600",children:"No location"})]})}function d(e){let{latitude:t,longitude:n,onChange:d,disabled:u}=e;return(null==t||null==n)&&u?(0,s.jsx)(c,{latitude:t,longitude:n,disabled:!0}):(0,s.jsx)(o.Z,{button:(0,s.jsx)(c,{latitude:t,longitude:n}),children:()=>(0,s.jsxs)(l.Z,{className:"bg-stone-800 w-80",children:[(0,s.jsx)(i.Z,{value:{latitude:t,longitude:n},onChange:d,disabled:u}),!u&&(0,s.jsxs)(a.Z,{mode:"text",variant:"danger",onClick:()=>null==d?void 0:d({latitude:null,longitude:null}),children:[(0,s.jsx)(r.Tw,{className:"inline-block mr-1 w-5 h-5"}),"Clear"]})]})})}},80021:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var s=n(57437),a=n(2265),l=n(82517),r=n(24729),i=n(71672),o=n(58992),c=n(36305),d=n(25648),u=n(19551),x=n(26140),m=n(87697),f=n(2803);function h(e){var t,n;let{recording:h,height:j=384,withBar:v=!0,withControls:p=!0,withSettings:g=!0,withPlayer:b=!0,parameters:N=l._z,onParameterSave:w}=e,Z=(0,a.useRef)(null),y=null!==(n=null===(t=Z.current)||void 0===t?void 0:t.getBoundingClientRect())&&void 0!==n?n:{width:0,height:0},k=(0,a.useMemo)(()=>({time:{min:0,max:h.duration},freq:{min:0,max:h.samplerate/2}}),[h.duration,h.samplerate]),C=(0,a.useMemo)(()=>({time:{min:0,max:Math.min(5,h.duration)},freq:{min:0,max:h.samplerate/2}}),[h.samplerate,h.duration]),F=(0,u.Z)({recording:h,endTime:k.time.max,startTime:k.time.min}),T=(0,m.Z)({dimensions:y,recording:h,bounds:k,initial:C,parameters:N,enabled:!F.isPlaying}),{centerOn:S}=T,D=(0,a.useCallback)(e=>S({time:e}),[S]),{draw:E}=(0,f.Z)({viewport:T.viewport,currentTime:F.currentTime,isPlaying:F.isPlaying,onTimeChange:D}),{props:P,draw:_,isLoading:z}=T,I=(0,a.useCallback)(e=>{e.canvas.style.cursor="wait",z||(_(e),E(e))},[_,E,z]);return(0,x.Z)({ref:Z,draw:I}),(0,s.jsxs)(i.Z,{children:[(0,s.jsxs)("div",{className:"flex flex-row gap-4",children:[p&&(0,s.jsx)(c.Z,{canDrag:T.canDrag,canZoom:T.canZoom,onReset:T.reset,onDrag:T.enableDrag,onZoom:T.enableZoom}),g&&(0,s.jsx)(d.Z,{samplerate:h.samplerate,settings:T.parameters,onChange:T.setParameters,onReset:T.resetParameters,onSave:()=>null==w?void 0:w(T.parameters)}),b&&(0,s.jsx)(r.Z,{...F})]}),(0,s.jsx)("div",{className:"overflow-hidden rounded-md",style:{height:j},children:(0,s.jsx)("canvas",{ref:Z,...P,className:"w-full h-full"})}),v&&(0,s.jsx)(o.Z,{bounds:T.bounds,viewport:T.viewport,onMove:T.zoom})]})}},57485:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var s=n(57437),a=n(2265),l=n(14088),r=n(49660),i=n(6922),o=n(83192),c=n(75728);function d(e){let{recording:t,label:n="Tags",onAddTag:d,onTagClick:u,onRemoveTag:x,disabled:m=!1}=e,f=(0,c.Z)(e=>e.getTagColor),{data:{tags:h}={},addTag:{mutate:j},removeTag:{mutate:v}}=(0,o.Z)({uuid:t.uuid,recording:t,onAddTag:d,onRemoveTag:x}),{handleAddTag:p,handleRemoveTag:g}=(0,a.useMemo)(()=>m?{}:{handleAddTag:j,handleRemoveTag:v},[j,m,v]);return(0,s.jsxs)("div",{className:"flex flex-row gap-2 items-center",children:[(0,s.jsxs)("div",{className:"inline-flex",children:[(0,s.jsx)(l.lO,{className:"inline-block mr-1 w-5 h-5 text-stone-400 dark:text-stone-600"}),(0,s.jsx)("span",{className:"text-sm text-stone-500 font-medium",children:n})]}),(0,s.jsxs)("div",{className:"flex flex-row flex-wrap gap-2",children:[null==h?void 0:h.map(e=>(0,s.jsx)(i.ZP,{tag:e,...f(e),onClick:()=>null==u?void 0:u(e),onClose:()=>null==g?void 0:g(e)},"".concat(e.key,"-").concat(e.value))),(null==h?void 0:h.length)===0&&(0,s.jsx)("span",{className:"text-stone-400 dark:text-stone-600 text-sm",children:"No tags"}),!m&&(0,s.jsx)(r.Z,{variant:"primary",onAdd:p})]})]})}},57581:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var s=n(57437),a=n(31014),l=n(2265),r=n(39343),i=n(59772),o=n(12098),c=n(71672),d=n(14088),u=n(93847),x=n(87576),m=n(42503);function f(e){let{time:t,disabled:n}=e;return(0,s.jsxs)(o.Z,{mode:"text",variant:"secondary",padding:"py-1",disabled:n,children:[(0,s.jsx)(d.wZ,{className:"inline-block mr-1 w-5 h-5 text-stone-500"}),null!=t?t:(0,s.jsx)("span",{className:"text-sm text-stone-400 dark:text-stone-600",children:"-"})]})}function h(e){let{time:t,onChange:n,disabled:h=!1}=e,{register:j,handleSubmit:v,watch:p,formState:{errors:g}}=(0,r.cI)({disabled:h,mode:"onBlur",values:{time:t},resolver:(0,a.F)(i.z.object({time:i.z.string().regex(/^\d{2}:\d{2}(:\d{2}(\.\d+)?)?$/,{message:"Time must be in hh:mm:ss.ddd format"}).nullable().optional()}))}),b=(0,l.useCallback)(e=>{null==n||n({time:""===e.time?null:e.time})},[n]);return((0,m.Z)({onSubmit:b,watch:p,handleSubmit:v}),h)?(0,s.jsx)(f,{time:t,disabled:!0}):(0,s.jsx)(x.Z,{button:(0,s.jsx)(f,{time:t}),children:()=>{var e;return(0,s.jsxs)(c.Z,{className:"bg-stone-800",children:[(0,s.jsx)(u.BZ,{name:"time",label:"Time",error:null===(e=g.time)||void 0===e?void 0:e.message,children:(0,s.jsx)(u.II,{type:"text",...j("time"),pattern:"^([0-9]{2}:)?[0-9]{2}:[0-9]{2}(\\.[0-9]{3})?$"})}),(0,s.jsxs)(o.Z,{mode:"text",variant:"danger",onClick:()=>null==n?void 0:n({time:null}),children:[(0,s.jsx)(d.Tw,{className:"inline-block mr-1 w-5 h-5"}),"Clear"]})]})}})}},49660:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var s=n(57437),a=n(49896),l=n(35933),r=n(12098),i=n(14088),o=n(48423);function c(e){let{onClose:t,onCreate:n,onAdd:a,filter:l,...r}=e;return(0,s.jsx)(o.Z,{onSelect:e=>{null==a||a(e)},onCreate:e=>{null==n||n(e),null==a||a(e)},autoFocus:!0,onKeyDown:e=>{"Escape"===e.key?null==t||t():"Enter"===e.key&&(null==t||t())},initialFilter:l,...r})}function d(e){let{onAdd:t,onCreate:n,text:o="add",variant:d="secondary",filter:u,...x}=e;return(0,s.jsx)(a.J,{as:"div",className:"inline-block text-left",children:(0,s.jsxs)(l.bv,{zIndex:20,placement:"bottom",offset:4,enter:"transition duration-200 ease-out",enterFrom:"scale-95 opacity-0",enterTo:"scale-100 opacity-100",leave:"transition duration-150 ease-in",leaveFrom:"scale-100 opacity-100",leaveTo:"scale-95 opacity-0",portal:!0,children:[(0,s.jsx)(a.J.Button,{as:"div",children:(0,s.jsxs)(r.Z,{mode:"text",variant:d,padding:"py-1",children:[(0,s.jsx)(i.dt,{className:"inline-block w-5 h-5 align-middle"}),o]})}),(0,s.jsx)(a.J.Panel,{className:"w-72",focus:!0,unmount:!0,children:e=>{let{close:a}=e;return(0,s.jsx)(c,{onClose:a,onAdd:t,onCreate:n,filter:u,...x})}})]})})}},83192:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var s=n(2265),a=n(37051),l=n(26731);function r(e){let{uuid:t,recording:n,enabled:r=!0,onUpdate:i,onDelete:o,onAddTag:c,onAddNote:d,onRemoveTag:u,onAddFeature:x,onRemoveFeature:m,onUpdateFeature:f,onError:h}=e;if(void 0!==n&&n.uuid!==t)throw Error("Recording uuid does not match");let{query:j,useMutation:v,setData:p}=(0,l.ZP)({uuid:t,initial:n,name:"dataset",enabled:r,getFn:a.Z.recordings.get,onError:h}),g=v({mutationFn:a.Z.recordings.update,onSuccess:i}),b=v({mutationFn:a.Z.recordings.addTag,onSuccess:c}),N=v({mutationFn:a.Z.recordings.removeTag,onSuccess:u}),w=v({mutationFn:a.Z.recordings.addNote,onSuccess:d}),Z=v({mutationFn:a.Z.recordings.addFeature,onSuccess:x}),y=v({mutationFn:a.Z.recordings.removeFeature,onSuccess:m}),k=v({mutationFn:a.Z.recordings.updateFeature,onSuccess:f}),C=v({mutationFn:a.Z.recordings.delete,onSuccess:o}),F=(0,s.useMemo)(()=>null==j.data?null:a.Z.audio.getDownloadUrl({recording:j.data}),[j.data]);return{...j,update:g,addTag:b,removeTag:N,addNote:w,addFeature:Z,removeFeature:y,updateFeature:k,delete:C,set:p,downloadURL:F}}},26731:function(e,t,n){"use strict";n.d(t,{ZP:function(){return i}});var s=n(25524),a=n(40932),l=n(93191),r=n(2265);function i(e){let{uuid:t,initial:n,name:i,enabled:o=!0,getFn:c,onError:d}=e,u=(0,l.NL)(),x=(0,r.useCallback)(async()=>{if(null==t)throw Error("No uuid provided for object of type ".concat(i));return await c(t)},[t,i,c]),m=(0,a.a)({queryKey:[i,t],queryFn:x,retry:(e,t)=>{var n;if(null==t)return e<3;let s=null==t?void 0:null===(n=t.response)||void 0===n?void 0:n.status;return null==s?e<3:(!(s>=400)||!(s<500))&&e<3},initialData:n,staleTime:3e5,enabled:o&&null!=t}),f=(0,r.useCallback)(e=>{u.setQueryData([i,t],e)},[u,t,i]),{error:h,isError:j}=m;return(0,r.useEffect)(()=>{j&&(null==d||d(h))},[h,j,d]),{query:m,client:u,setData:f,useQuery:e=>{let{queryFn:n,name:s,enabled:l=!1}=e;return function(e){let{uuid:t,query:n,queryFn:s,name:l,secondaryName:i,enabled:o=!1}=e,{status:c,data:d}=n,u=(0,r.useCallback)(async()=>{if("pending"===c)throw Error("No data for object of type ".concat(l," (uuid=").concat(t,"). ")+"Either the query is not enabled or the query is still loading.");if("error"===c)throw Error("Error while loading object of type ".concat(l," (uuid=").concat(t,"), cannot mutate"));return await s(d)},[c,d,s,l,t]);return(0,a.a)({queryFn:u,queryKey:[l,t,i],enabled:"pending"!==c&&"error"!==c&&o})}({uuid:t,query:m,queryFn:n,secondaryName:s,name:i,enabled:l})},useMutation:e=>{let{mutationFn:n,onSuccess:a,onError:l,withUpdate:o=!0}=e;return function(e){let{uuid:t,query:n,client:a,mutationFn:l,name:i,onSuccess:o,onError:c,withUpdate:d=!0}=e,{status:u,data:x}=n,m=(0,r.useCallback)(async e=>{if(null==t)throw Error("No uuid provided for object of type ".concat(i));if("pending"===u)throw Error("No data for object of type ".concat(i," (uuid=").concat(t,"). ")+"Either the query is not enabled or the query is still loading.");if("error"===u)throw Error("Error while loading object of type ".concat(i," (uuid=").concat(t,"), cannot mutate"));return await l(x,e)},[u,x,l,i,t]);return(0,s.D)({mutationFn:m,onSuccess:e=>{d&&a.setQueryData([i,t],e),null==o||o(e)},onError:c})}({uuid:t,query:m,client:u,mutationFn:n,name:i,onSuccess:a,onError:l,withUpdate:o})},useDestruction:e=>{let{mutationFn:n,onSuccess:a,onError:l}=e;return function(e){let{uuid:t,query:n,client:a,mutationFn:l,name:i,onSuccess:o,onError:c}=e,{status:d,data:u}=n,x=(0,r.useCallback)(async()=>{if(null==t)throw Error("No uuid provided for object of type ".concat(i));if("pending"===d)throw Error("No data for object of type ".concat(i," (uuid=").concat(t,"). ")+"Either the query is not enabled or the query is still loading.");if("error"===d)throw Error("Error while loading object of type ".concat(i," (uuid=").concat(t,"), cannot mutate"));return await l(u)},[d,u,l,i,t]);return(0,s.D)({mutationFn:x,onSuccess:e=>{a.removeQueries({queryKey:[i,t]}),null==o||o(e)},onError:c})}({uuid:t,query:m,client:u,mutationFn:n,name:i,onSuccess:a,onError:l})}}}}},function(e){e.O(0,[8173,8083,5790,3277,231,932,9226,4898,3215,8726,4880,8026,6151,873,8164,7051,3847,2302,1479,2971,7023,1744],function(){return e(e.s=94991)}),_N_E=e.O()}]);