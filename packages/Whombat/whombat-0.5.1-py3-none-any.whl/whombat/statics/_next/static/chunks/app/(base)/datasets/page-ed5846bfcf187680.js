(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5198],{86395:function(e,t,s){Promise.resolve().then(s.bind(s,29669))},29669:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return y}});var a=s(57437),n=s(16463),l=s(2265),r=s(88726),i=s(82155),d=s(31014),o=s(25524),c=s(39343),u=s(30613),x=s(37051),m=s(93847);function h(e){var t,s,n;let{onCreate:r}=e,{mutateAsync:i}=(0,o.D)({mutationFn:x.Z.datasets.create}),{register:h,handleSubmit:f,formState:{errors:j}}=(0,c.cI)({resolver:(0,d.F)(u.SR),mode:"onChange"}),p=(0,l.useCallback)(async e=>{let t=i(e);null==r||r(t)},[i,r]);return(0,a.jsxs)("form",{className:"flex flex-col gap-4",onSubmit:f(p),children:[(0,a.jsx)(m.BZ,{name:"name",label:"Name",help:"Please provide a name for the dataset.",error:null===(t=j.name)||void 0===t?void 0:t.message,children:(0,a.jsx)(m.II,{...h("name")})}),(0,a.jsx)(m.BZ,{name:"description",label:"Description",help:"Describe the dataset.",error:null===(s=j.description)||void 0===s?void 0:s.message,children:(0,a.jsx)(m.Kx,{...h("description")})}),(0,a.jsx)(m.BZ,{name:"audio_dir",label:"Audio Directory",help:"Provide the path to the folder where the dataset recordings reside.",error:null===(n=j.name)||void 0===n?void 0:n.message,children:(0,a.jsx)(m.II,{...h("audio_dir")})}),(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsx)(m.k4,{children:"Create Dataset"})})]})}var f=s(14088);function j(e){var t,s;let{onCreate:n}=e,{register:r,handleSubmit:i,setError:d,formState:{errors:u}}=(0,c.cI)({mode:"onChange"}),{mutateAsync:h}=(0,o.D)({mutationFn:x.Z.datasets.import,onError:e=>{var t;(null===(t=e.response)||void 0===t?void 0:t.status)===422&&e.response.data.detail.forEach(e=>{d(e.loc[1],{message:e.msg})})}}),j=(0,l.useCallback)(async e=>{let t=new FormData,s=e.dataset[0];t.append("dataset",s),t.append("audio_dir",e.audio_dir);let a=h(t);null==n||n(a)},[h,n]);return(0,a.jsxs)("form",{className:"flex flex-col gap-4",onSubmit:i(j),children:[(0,a.jsx)(m.BZ,{name:"dataset",label:"Select a dataset file to import",help:"The file must be in AOEF format",error:null===(t=u.file)||void 0===t?void 0:t.message,children:(0,a.jsx)(m.II,{type:"file",...r("dataset"),required:!0})}),(0,a.jsx)(m.BZ,{name:"audio_dir",label:"Audio directory",help:"Folder where all the dataset recordings are stored",error:null===(s=u.audio_dir)||void 0===s?void 0:s.message,children:(0,a.jsx)(m.II,{...r("audio_dir"),placeholder:"Path to audio directory...",required:!0})}),(0,a.jsxs)(m.k4,{children:[(0,a.jsx)(f.rG,{className:"inline-block mr-2 w-6 h-6 align-middle"}),"Import"]})]})}var p=s(57605),v=s(94776),g=s(16315),b=s(63425),N=s(38875),Z=s(2857),k=s(28857);function w(){return(0,a.jsxs)(v.Z,{children:[(0,a.jsx)(f.aN,{className:"w-8 h-8 text-stone-500"}),(0,a.jsx)("p",{children:"No datasets found."}),(0,a.jsxs)("p",{children:["To create a dataset, click on the",(0,a.jsxs)("span",{className:"text-emerald-500",children:[(0,a.jsx)(f.dt,{className:"inline-block mr-1 ml-2 w-4 h-4"}),"Create"," "]})," ","button above."]})]})}function _(e){let{onCreate:t}=e,s=(0,k.Z)();return(0,a.jsxs)("div",{className:"flex flex-col p-8 space-y-2 w-full",children:[(0,a.jsxs)("div",{className:"flex flex-row space-x-4",children:[(0,a.jsx)("div",{className:"flex-grow",children:(0,a.jsx)(g.Z,{label:"Search",placeholder:"Search dataset...",value:s.filter.get("search"),onChange:e=>s.filter.set("search",e),onSubmit:()=>s.filter.submit(),icon:(0,a.jsx)(f.lQ,{})})}),(0,a.jsx)("div",{className:"h-full",children:(0,a.jsx)(p.Z,{mode:"text",title:"Create Dataset",label:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.dt,{className:"inline-block w-4 h-4 align-middle"})," Create"]}),children:()=>(0,a.jsx)(h,{onCreate:t})})}),(0,a.jsx)("div",{className:"h-full",children:(0,a.jsx)(p.Z,{mode:"text",title:"Import a Dataset",label:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.rG,{className:"inline-block w-4 h-4 align-middle"})," ","Import"]}),children:()=>(0,a.jsx)(j,{onCreate:t})})})]}),s.isLoading?(0,a.jsx)(Z.Z,{}):(0,a.jsxs)(a.Fragment,{children:[0===s.items.length&&(0,a.jsx)(w,{}),(0,a.jsx)(N.Z,{items:s.items.map(e=>(0,a.jsx)(i.Z,{dataset:e},e.uuid))}),s.pagination.numPages>1&&(0,a.jsx)(b.Z,{...s.pagination})]})]})}var C=s(92814);function y(){let e=(0,n.useRouter)(),t=(0,l.useCallback)(t=>{r.ZP.promise(t,{loading:"Creating dataset. Please wait as this may take a while...",success:"Dataset created.",error:"Failed to create dataset."}),t.then(t=>{e.push("/datasets/detail/?dataset_uuid=".concat(t.uuid))})},[e]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.Z,{text:"Datasets"}),(0,a.jsx)(_,{onCreate:t})]})}},56341:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(57437);function n(e){let{children:t}=e;return(0,a.jsx)("header",{className:"bg-stone-50 shadow dark:bg-stone-800",children:(0,a.jsx)("div",{className:"max-w-7xl px-2 py-3 sm:px-3 lg:px-6",children:t})})}},68e3:function(e,t,s){"use strict";s.d(t,{H1:function(){return r},H2:function(){return i},H3:function(){return d},H4:function(){return o}});var a=s(57437),n=s(56800),l=s.n(n);function r(e){let{children:t,className:s,...n}=e;return(0,a.jsx)("h1",{className:l()("text-2xl font-bold text-stone-800 dark:text-stone-300",s),...n,children:t})}function i(e){let{children:t,className:s,...n}=e;return(0,a.jsx)("h2",{className:l()("text-xl font-bold text-stone-800 dark:text-stone-300",s),...n,children:t})}function d(e){let{children:t,className:s,...n}=e;return(0,a.jsx)("h3",{className:l()("text-lg font-semibold leading-7 items-center text-stone-800 dark:text-stone-300",s),...n,children:t})}function o(e){let{children:t,className:s,...n}=e;return(0,a.jsx)("h4",{className:l()(s,"text-md font-semibold leading-6 text-stone-800 dark:text-stone-300"),...n,children:t})}},92814:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(57437),n=s(56341),l=s(68e3);function r(e){let{text:t}=e;return(0,a.jsx)(n.Z,{children:(0,a.jsx)(l.H1,{children:t})})}},82155:function(e,t,s){"use strict";s.d(t,{Z:function(){return i},h:function(){return r}});var a=s(57437),n=s(87138),l=s(14088);function r(e){let{label:t,value:s}=e;return(0,a.jsxs)("div",{className:"flex flex-row mx-4 space-x-1",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-stone-500",children:t}),(0,a.jsx)("div",{className:"text-sm text-stone-700 dark:text-stone-300",children:s})]})}function i(e){let{dataset:t}=e;return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{className:"px-4 sm:px-0",children:[(0,a.jsxs)("h3",{className:"text-base font-semibold leading-7 text-stone-900 dark:text-stone-100",children:[(0,a.jsx)("span",{className:"inline-block w-6 h-6 align-middle text-stone-500",children:(0,a.jsx)(l.lQ,{})})," ",(0,a.jsx)(n.default,{className:"hover:font-bold hover:text-emerald-500",href:{pathname:"/datasets/detail/",query:{dataset_uuid:t.uuid}},children:t.name})]}),(0,a.jsx)("p",{className:"mt-1 w-full text-sm leading-5 text-stone-600 dark:text-stone-400",children:t.description})]}),(0,a.jsxs)("div",{className:"flex flex-row py-4",children:[(0,a.jsx)(r,{label:(0,a.jsx)(l.se,{className:"w-4 h-4 align-middle"}),value:t.recording_count.toString()}),(0,a.jsx)(r,{label:(0,a.jsx)(l.Qu,{className:"w-4 h-4 align-middle"}),value:t.created_on.toDateString()})]})]})}},28857:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var a=s(25524),n=s(37051),l=s(33833),r=s(30635);let i={},d=[];function o(){let{filter:e=i,fixed:t=d,pageSize:s=10,enabled:o=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=(0,l.Z)({defaults:e,fixed:t}),{query:u,pagination:x,items:m,total:h}=(0,r.Z)({name:"datasets",queryFn:n.Z.datasets.getMany,pageSize:s,filter:c.filter,enabled:o}),f=(0,a.D)({mutationFn:n.Z.datasets.create,onSuccess:()=>{u.refetch()}});return{...u,filter:c,pagination:x,items:m,total:h,create:f}}}},function(e){e.O(0,[8173,8083,5790,3277,231,932,9226,4898,3215,8726,6845,4880,7051,3847,3127,2971,7023,1744],function(){return e(e.s=86395)}),_N_E=e.O()}]);