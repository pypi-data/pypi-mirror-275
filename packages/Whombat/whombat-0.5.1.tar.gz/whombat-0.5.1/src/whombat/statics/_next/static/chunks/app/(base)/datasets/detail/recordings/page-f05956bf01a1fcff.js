(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7507],{56065:function(e,t,n){Promise.resolve().then(n.bind(n,9242))},13504:function(e,t,n){"use strict";let a=(0,n(2265).createContext)(null);t.Z=a},9242:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Y}});var a=n(57437),l=n(16463),r=n(2265),s=n(40918),i=n(23635),o=n(35103),c=n(93525),d=n(16315),u=n(63425),m=n(12098),x=n(14088),f=n(87576),h=n(48423);function g(e){let{selected:t,onDelete:n,onTag:l}=e;return 0===t?null:(0,a.jsxs)("ul",{className:"flex flex-row items-center space-x-2",children:[(0,a.jsxs)("li",{className:"px-2",children:[(0,a.jsx)("span",{className:"mr-1 font-bold text-blue-500",children:t}),"selected"]}),(0,a.jsx)("li",{children:(0,a.jsxs)(m.Z,{mode:"text",variant:"danger",onClick:n,children:[(0,a.jsx)(x.pJ,{className:"inline-block mr-1 w-5 h-5 align-middle"}),"delete selected"]})}),(0,a.jsx)("li",{children:(0,a.jsx)(f.Z,{button:(0,a.jsxs)(m.Z,{mode:"text",variant:"primary",children:[(0,a.jsx)(x.lO,{className:"inline-block mr-1 w-5 h-5 align-middle"}),"tag selected"]}),children:()=>(0,a.jsx)(h.Z,{onSelect:l})})})]})}var j=n(90394),p=n(33514);function v(e){let{table:t,onCellKeyDown:n}=e,{listeners:{onKeyUp:l,onKeyDown:r}}=(0,j.T)();return(0,a.jsxs)("table",{className:"relative min-w-full rounded-lg border border-collapse table-fixed border-stone-300 text-stone-700 dark:border-stone-700 dark:text-stone-300",onKeyUp:e=>{e.target instanceof HTMLInputElement||l()},onKeyDown:e=>{e.target instanceof HTMLInputElement||r(e)},style:{width:t.getCenterTotalSize()},children:[(0,a.jsx)("thead",{className:"z-10 sticky top-0",children:t.getHeaderGroups().map(e=>(0,a.jsx)("tr",{className:"bg-stone-200 text-stone-700 dark:bg-stone-700 dark:text-stone-300",children:e.headers.map(e=>(0,a.jsxs)("th",{className:"overflow-x-auto relative py-1 px-2 whitespace-nowrap border border-stone-400 dark:border-stone-500",colSpan:e.colSpan,style:{width:e.getSize()},children:[e.isPlaceholder?null:(0,p.ie)(e.column.columnDef.header,e.getContext()),(0,a.jsx)("div",{onMouseDown:e.getResizeHandler(),onTouchStart:e.getResizeHandler(),className:"resizer ".concat(e.column.getIsResizing()?"isResizing":"")})]},e.id))},e.id))}),(0,a.jsx)("tbody",{className:"z-0 text-sm text-stone-800 dark:text-stone-300",children:t.getRowModel().rows.map(e=>(0,a.jsx)("tr",{className:"hover:dark:bg-stone-800 hover:bg-stone-200 max-h-40 h-min",children:e.getVisibleCells().map(t=>(0,a.jsx)("td",{role:"gridcell",className:"border outline-none focus:ring-1 focus:ring-emerald-500 focus:ring-offset-1 focus:ring-offset-transparent border-stone-300 dark:border-stone-600 max-h-40",tabIndex:-1,onKeyDown:a=>{a.target instanceof HTMLInputElement||null==n||n({data:e.original,row:e.index,column:t.column.id,value:e.getValue(t.column.id),event:a})},style:{width:t.column.getSize()},children:(0,p.ie)(t.column.columnDef.cell,t.getContext())},t.id))},e.id))})]})}var b=n(49896),w=n(35933),y=n(30482);function N(e){let{value:t,onChange:n}=e;return(0,a.jsx)(b.J,{className:"flex relative flex-row w-100",children:(0,a.jsxs)(w.bv,{enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",placement:"bottom",offset:4,portal:!0,children:[(0,a.jsxs)(b.J.Button,{className:"flex flex-row gap-2 justify-between items-center px-1 text-center grow",children:[(0,a.jsx)("span",{children:(0,y.T)(t)}),(0,a.jsx)(x.dY,{className:"inline-block flex-none w-5 h-5 text-stone-500"})]}),(0,a.jsx)(b.J.Panel,{unmount:!0,className:"absolute left-1/2 z-40 px-4 mt-3 transform -translate-x-1/2 sm:px-0 lg:max-w-3xl",children:(0,a.jsx)("div",{className:"dark:bg-stone-800 bg-stone-200 w-80 border border-stone-300 dark:border-stone-700 border-1 p-2 rounded-md",children:(0,a.jsx)(y.Z,{value:t,onChange:n})})})]})})}var k=n(62608),C=n(54175),Z=n(87138),S=n(56800),R=n.n(S);function F(e){let{children:t,editable:n=!1,className:l,...r}=e;return"tabIndex"in r||!n||(r.tabIndex=0),(0,a.jsxs)("div",{...r,className:R()("m-0 flex w-full flex-row items-center justify-between gap-2 px-1",l),children:[(0,a.jsx)("span",{className:"grow overflow-x-auto",children:t}),n?(0,a.jsx)(x.dY,{className:"inline-block h-5 w-5 text-stone-500"}):null]})}var T=n(61683);function D(e){let{children:t}=e;return(0,a.jsx)("span",{className:"inline-block whitespace-nowrap align-middle w-full overflow-x-auto",children:t})}function E(e){let{value:t,onChange:n,...l}=e,s=(0,r.useRef)(null),[i,o]=(0,r.useState)(t),[c,d]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{o(t)},[t]),(0,r.useEffect)(()=>{if(c){var e;null===(e=s.current)||void 0===e||e.focus()}},[c]),c)?(0,a.jsx)("input",{ref:s,className:"block w-full border-transparent bg-inherit px-2 outline-transparent focus:border-gray-500 focus:ring-0 hover:dark:bg-stone-700",value:i,placeholder:t,onChange:e=>o(e.target.value),onKeyDown:e=>{var a,l,r,c;"Escape"===e.key?(d(!1),o(t),null===(l=s.current)||void 0===l||null===(a=l.parentElement)||void 0===a||a.focus()):"Enter"===e.key&&(d(!1),null==n||n(i),null===(c=s.current)||void 0===c||null===(r=c.parentElement)||void 0===r||r.focus())},onBlur:()=>d(!1),...l}):(0,a.jsx)(F,{editable:!0,onFocus:()=>{d(!0)},onClick:()=>d(!0),children:i})}var z=n(49660),_=n(6922),V=n(75728);function I(e){let{tags:t,onAdd:n,onRemove:l,onClick:r,...s}=e,i=(0,V.Z)(e=>e.getTagColor);return(0,a.jsxs)("div",{className:"flex overflow-auto flex-row flex-wrap gap-2 items-center px-1 m-0 w-full max-h-40",children:[t.map(e=>(0,a.jsx)(_.ZP,{tag:e,...i(e),onClick:()=>null==r?void 0:r(e),onClose:()=>null==l?void 0:l(e)},"".concat(e.key,":").concat(e.value))),(0,a.jsx)(z.Z,{variant:"primary",onAdd:n,...s})]})}let P=e=>e,M=["date","time","location","tags"];function L(e){var t;let{filter:n,fixed:l,getRecordingLink:m,pathFormatter:f}=e,h=(0,k.Z)({filter:n,fixed:l}),j=function(e){let{data:t,pathFormatter:n=P,getRecordingLink:l,onUpdate:s,onAddTag:i,onRemoveTag:o}=e,[c,d]=(0,r.useState)({}),u=(0,r.useMemo)(()=>[{id:"select",maxSize:33,enableResizing:!1,header:e=>{let{table:t}=e;return(0,a.jsx)(T.Z,{checked:t.getIsAllRowsSelected(),indeterminate:t.getIsSomeRowsSelected(),onChange:t.getToggleAllRowsSelectedHandler()})},cell:e=>{let{row:t}=e;return(0,a.jsx)("div",{className:"flex justify-center px-1",children:(0,a.jsx)(T.Z,{checked:t.getIsSelected(),disabled:!t.getCanSelect(),indeterminate:t.getIsSomeSelected(),onChange:t.getToggleSelectedHandler()})})}},{accessorFn:e=>e.path,id:"path",header:()=>(0,a.jsx)(D,{children:"Path"}),size:200,enableResizing:!0,footer:e=>e.column.id,cell:e=>{let{row:t}=e,r=t.getValue("path");return(0,a.jsx)(F,{children:(0,a.jsx)(Z.default,{className:"hover:font-bold hover:text-emerald-500 focus:ring focus:ring-emerald-500 focus:outline-none",href:(null==l?void 0:l(t.original))||"#",children:n(r)})})}},{id:"duration",header:()=>(0,a.jsx)(D,{children:"Duration"}),enableResizing:!0,size:100,accessorFn:e=>e.duration.toFixed(2),cell:e=>{let{row:t}=e,n=t.getValue("duration");return(0,a.jsx)(F,{children:n})}},{id:"samplerate",accessorKey:"samplerate",header:()=>(0,a.jsx)(D,{children:"Sample Rate"}),enableResizing:!0,size:120,footer:e=>e.column.id,cell:e=>{let{row:t}=e,n=t.getValue("samplerate");return(0,a.jsx)(F,{children:n})}},{id:"time_expansion",accessorKey:"time_expansion",header:()=>(0,a.jsx)(D,{children:"Time Expansion"}),enableResizing:!0,size:120,footer:e=>e.column.id,cell:e=>{let{row:t}=e,n=t.getValue("time_expansion");return(0,a.jsx)(E,{onChange:e=>{null!==e&&s({recording:t.original,data:{time_expansion:parseFloat(e)},index:t.index})},type:"number",value:n})}},{id:"date",enableResizing:!0,size:140,header:()=>(0,a.jsxs)(D,{children:[(0,a.jsx)(x.IH,{className:"inline-block mr-2 w-5 h-5 align-middle text-stone-500"}),"Date"]}),cell:e=>{let{row:t}=e,n=t.getValue("date");return(0,a.jsx)(E,{onChange:e=>{null!==e&&s({recording:t.original,data:{date:new Date(e)},index:t.index})},type:"date",value:n})},accessorFn:e=>{var t;return null===(t=e.date)||void 0===t?void 0:t.toLocaleDateString("en-CA")}},{id:"time",enableResizing:!0,size:120,header:()=>(0,a.jsxs)(D,{children:[(0,a.jsx)(x.wZ,{className:"inline-block mr-2 w-5 h-5 align-middle text-stone-500"}),"Time"]}),cell:e=>{let{row:t}=e,n=t.getValue("time");return(0,a.jsx)(E,{onChange:e=>{null!==e&&s({recording:t.original,data:{time:e},index:t.index})},type:"time",value:n,step:"1"})},accessorFn:e=>e.time},{id:"location",enableResizing:!0,header:()=>(0,a.jsxs)(D,{children:[(0,a.jsx)(x._t,{className:"inline-block mr-2 w-5 h-5 align-middle text-stone-500"}),"Location"]}),accessorFn:e=>({latitude:e.latitude,longitude:e.longitude}),cell:e=>{let{row:t}=e,n=t.getValue("location");return(0,a.jsx)(N,{onChange:e=>{null!==e&&s({recording:t.original,data:e,index:t.index})},value:n})}},{id:"tags",enableResizing:!0,header:()=>(0,a.jsxs)(D,{children:[(0,a.jsx)(x.lO,{className:"inline-block mr-2 w-5 h-5 align-middle text-stone-500"}),"Tags"]}),accessorFn:e=>e.tags,cell:e=>{let{row:t}=e,n=t.getValue("tags");return(0,a.jsx)(I,{tags:n,onAdd:e=>i({recording:t.original,tag:e,index:t.index}),onRemove:e=>o({recording:t.original,tag:e,index:t.index})})}},{id:"notes",enableResizing:!0,header:()=>(0,a.jsxs)(D,{children:[(0,a.jsx)(x.uH,{className:"inline-block mr-2 w-5 h-5 align-middle text-stone-500"}),"Notes"]}),accessorFn:e=>e.notes,cell:e=>{let{row:t}=e,n=t.getValue("notes");return 0==(n||[]).length?null:(0,a.jsxs)("span",{className:"ms-2",children:[(0,a.jsx)(x.NW,{className:"inline-block mr-2 w-5 h-5 text-blue-500 align-middle"}),n.length," notes"]})}}],[i,o,s,l,n]);return(0,p.b7)({data:t,columns:u,state:{rowSelection:c},enableRowSelection:!0,onRowSelectionChange:d,columnResizeMode:"onChange",getCoreRowModel:(0,C.sC)()})}({data:h.items,getRecordingLink:m,pathFormatter:f,onUpdate:h.updateRecording.mutate,onAddTag:h.addTag.mutate,onRemoveTag:h.removeTag.mutate}),b=function(e){let{onUpdate:t,onAddTag:n,onRemoveTag:a}=e,l=(0,V.Z)(e=>e.clipboard),s=(0,V.Z)(e=>e.copy);return(0,r.useMemo)(()=>{let e=(e,t)=>{s({context:"recordings_table",column:e,value:t})},r=e=>{let{recording:a,column:l,value:r,row:s}=e;if("location"===l){let{position:e,isComplete:n}=function(e){let t={lat:0,lng:0};if(null==e)return{position:t,isComplete:!1};let n=e.split(",");if(2!==n.length)return{position:t,isComplete:!1};let a=parseFloat(n[0].trim()),l=parseFloat(n[1].trim());return{position:{lat:a,lng:l},isComplete:!isNaN(a)&&!isNaN(l)}}(r);if(!n)return;t({recording:a,data:{latitude:e.lat,longitude:e.lng},index:s});return}if("tags"===l)try{r.forEach(e=>{n({recording:a,tag:e,index:s})})}catch(e){return}t({recording:a,data:{[l]:r},index:s})},i=e=>{let{recording:n,column:l,row:r}=e;if("location"===l){t({recording:n,data:{latitude:null,longitude:null},index:r});return}if("time_expansion"===l){t({recording:n,data:{time_expansion:1},index:r});return}"tags"===l&&(n.tags||[]).forEach(e=>{a({recording:n,tag:e,index:r})}),t({recording:n,data:{[l]:null},index:r})};return t=>{let{event:n,data:a,value:s,column:o,row:c}=t;if(M.includes(o)){if("c"===n.key&&n.ctrlKey&&(e(o,s),navigator.clipboard.writeText(s)),"v"===n.key&&n.ctrlKey){if(null==l||"object"!=typeof l||"recordings_table"!==l.context||l.column!==o)return;r({recording:a,column:o,value:l.value,row:c})}("Delete"===n.key||"Backspace"===n.key)&&i({recording:a,column:o,row:c})}}},[l,t,n,a,s])}({onUpdate:h.updateRecording.mutate,onAddTag:h.addTag.mutate,onRemoveTag:h.removeTag.mutate}),{rowSelection:w}=j.options.state,y=(0,r.useCallback)(async e=>{if(null!=w)for(let t of Object.keys(w)){if(!w[t])continue;let n=h.items[Number(t)];await h.addTag.mutateAsync({recording:n,tag:e,index:Number(t)})}},[w,h.addTag,h.items]),S=(0,r.useCallback)(async()=>{if(null!=w)for(let e of Object.keys(w)){if(!w[e])continue;let t=h.items[Number(e)];await h.deleteRecording.mutateAsync({recording:t,index:Number(e)})}},[w,h.items,h.deleteRecording]);return h.isLoading||null==h.data?(0,a.jsx)(s.Z,{}):(0,a.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-row justify-between space-x-4",children:[(0,a.jsxs)("div",{className:"flex flex-row space-x-3 basis-1/2",children:[(0,a.jsx)("div",{className:"grow",children:(0,a.jsx)(d.Z,{label:"Search",placeholder:"Search recordings...",value:null!==(t=h.filter.get("search"))&&void 0!==t?t:"",onChange:e=>h.filter.set("search",e)})}),(0,a.jsx)(o.Z,{filter:h.filter,filterDef:c.Z})]}),(0,a.jsx)(g,{selected:Object.keys(null!=w?w:{}).length,onTag:y,onDelete:S})]}),(0,a.jsx)(i.Z,{filter:h.filter,total:h.total,filterDef:c.Z}),(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)("div",{className:"overflow-x-auto overflow-y-auto w-full max-h-screen rounded-md outline outline-1 outline-stone-200 dark:outline-stone-800",children:(0,a.jsx)(v,{table:j,onCellKeyDown:b})})}),(0,a.jsx)(u.Z,{...h.pagination})]})}function K(e){let{dataset:t,getRecordingLink:n}=e,l=(0,r.useCallback)(e=>{let n=t.audio_dir;return null==n?e:e.startsWith(n)?e.slice(n.length):e},[t.audio_dir]),s=(0,r.useMemo)(()=>{if(null!=n)return e=>{let a=n(e);return"".concat(a,"&dataset_uuid=").concat(t.uuid)}},[n,t.uuid]),i=(0,r.useMemo)(()=>({dataset:t}),[t]);return(0,a.jsx)(L,{filter:i,fixed:["dataset"],getRecordingLink:s,pathFormatter:l})}var O=n(71672),q=n(15964),H=n(96930);function J(e){let{dataset:t}=e,{download:n}=(0,H.Z)({uuid:t.uuid,dataset:t});return(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)("p",{className:"text-stone-700 dark:text-stone-300",children:"Download the metadata of the recordings in this dataset. Please choose the format for downloading the metadata:"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)(O.Z,{className:"h-full",children:[(0,a.jsx)(q.Z,{href:n.csv||"",className:"block mt-2 text-center",download:!0,target:"_blank",children:"Download CSV"}),(0,a.jsx)("p",{className:"text-sm text-stone-600 dark:text-stone-400",children:"Download recording metadata in CSV format. Convenient for editing in tabular software."})]}),(0,a.jsxs)(O.Z,{className:"h-full",children:[(0,a.jsx)(q.Z,{href:n.json||"",className:"block mt-2 text-center",download:!0,target:"_blank",children:"Download JSON"}),(0,a.jsx)("p",{className:"text-sm text-stone-600 dark:text-stone-400",children:"Download recording metadata in JSON format. Data is structured in AEOF format; refer to our website for more details."})]})]})]})}var A=n(57605);function Q(e){let{dataset:t}=e;return(0,a.jsxs)("div",{className:"flex flex-row justify-between items-center mb-3 space-x-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(x.se,{className:"inline-block mr-1 w-5 h-5 align-middle text-stone-500"}),(0,a.jsx)("span",{className:"mr-1 font-semibold text-stone-500",children:null==t?void 0:t.recording_count}),(0,a.jsx)("span",{className:"font-thin",children:"Recordings"})]}),(0,a.jsxs)("ul",{className:"flex flex-row space-x-3",children:[(0,a.jsx)("li",{children:(0,a.jsxs)(m.Z,{mode:"text",variant:"secondary",children:[(0,a.jsx)(x.rG,{className:"inline-block mr-1 w-5 h-5 text-emerald-500 align-middle"}),"import"]})}),(0,a.jsx)("li",{children:(0,a.jsx)(A.Z,{title:"Export Recording Metadata",mode:"text",variant:"secondary",label:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x._8,{className:"inline-block mr-1 w-5 h-5 text-emerald-500 align-middle"}),"export"]}),children:()=>(0,a.jsx)(J,{dataset:t})})})]})]})}var U=n(13504);function B(e){return"detail/?recording_uuid=".concat(e.uuid)}function Y(){let e=(0,r.useContext)(U.Z);return null==e?(0,l.notFound)():(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)(Q,{dataset:e}),(0,a.jsx)(K,{dataset:e,getRecordingLink:B})]})}n(15385)},40918:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(57437),l=n(4933);function r(){return(0,a.jsx)("div",{className:"w-full h-full flex flex-row justify-center items-center",children:(0,a.jsx)(l.Z,{})})}},57605:function(e,t,n){"use strict";n.d(t,{Z:function(){return c},t:function(){return d}});var a=n(57437),l=n(59226),r=n(24880),s=n(2265),i=n(12098),o=n(14088);function c(e){let{title:t,children:n,label:l,open:r=!1,width:o="max-w-md",...c}=e,[u,m]=(0,s.useState)(r);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Z,{type:"button",onClick:()=>m(!0),...c,children:l}),(0,a.jsx)(d,{title:(0,a.jsx)("div",{children:t}),isOpen:u,onClose:()=>m(!1),children:e=>{let{close:t}=e;return(0,a.jsx)("div",{className:o,children:n({close:t})})}})]})}function d(e){let{title:t,children:n,onClose:c,isOpen:d=!0}=e;return(0,a.jsx)(l.u,{appear:!0,show:d,as:s.Fragment,children:(0,a.jsxs)(r.V,{as:"div",className:"relative z-50",onClose:()=>null==c?void 0:c(),children:[(0,a.jsx)(l.u.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,a.jsx)("div",{className:"overflow-y-auto fixed inset-0",children:(0,a.jsx)("div",{className:"flex justify-center items-center p-4 min-h-full text-center",children:(0,a.jsx)(l.u.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,a.jsxs)(r.V.Panel,{className:"overflow-hidden p-6 w-full text-left align-middle rounded-2xl shadow-xl transition-all transform max-w-fit bg-stone-50 text-stone-700 z-[99999] dark:bg-stone-700 dark:text-stone-300",children:[(0,a.jsxs)(r.V.Title,{as:"div",className:"mb-4 flex flex-row justify-between items-center gap-4",children:[null!=t&&(0,a.jsx)("h3",{className:"text-lg font-medium leading-6 text-stone-900 dark:text-stone-100",children:t}),(0,a.jsx)(i.Z,{onClick:()=>null==c?void 0:c(),variant:"secondary",mode:"text",children:(0,a.jsx)(o.Tw,{className:"w-5 h-5"})})]}),(0,a.jsx)("div",{className:"mt-2",children:n({close:()=>null==c?void 0:c()})})]})})})})]})})}},15964:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var a=n(57437),l=n(56800),r=n.n(l),s=n(87138),i=n(12098);function o(e){let{children:t,variant:n="primary",mode:l="filled",padding:o="p-2.5",className:c,...d}=e,u=(0,i.y)({variant:n,mode:l,padding:o});return(0,a.jsx)(s.default,{...d,className:r()(u,c),children:t})}},87576:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var a=n(57437),l=n(49896),r=n(35933);function s(e){let{button:t,children:n,placement:s="bottom",offset:i=4,autoPlacement:o=!1}=e;return(0,a.jsx)(l.J,{as:"div",className:"inline-block text-left",children:(0,a.jsxs)(r.bv,{zIndex:10,placement:s,offset:i,enter:"transition duration-200 ease-out",enterFrom:"scale-95 opacity-0",enterTo:"scale-100 opacity-100",leave:"transition duration-150 ease-in",leaveFrom:"scale-100 opacity-100",leaveTo:"scale-95 opacity-0",portal:!0,autoPlacement:o,children:[(0,a.jsx)(l.J.Button,{as:"div",children:t}),(0,a.jsx)(l.J.Panel,{className:"w-72",focus:!0,unmount:!0,children:e=>{let{close:t}=e;return n({close:t})}})]})})}},93525:function(e,t,n){"use strict";var a=n(57437),l=n(98701),r=n(76706),s=n(14088);let i=[{name:"Duration",field:"duration",selector:e=>{let{setFilter:t}=e;return(0,a.jsx)(r.P9,{name:"duration",onChange:e=>t("duration",e)})},render:e=>{let{value:t,clear:n}=e;return(0,a.jsx)(l.V,{field:"Duration",value:t,onRemove:n})},description:"Select recordings by duration. Duration is in seconds.",icon:(0,a.jsx)(s.wZ,{className:"h-5 w-5 inline-block text-stone-500 mr-1 align-middle"})},{name:"Sample Rate",field:"samplerate",render:e=>{let{value:t,clear:n}=e;return(0,a.jsx)(l.V,{field:"Sample Rate",value:t,onRemove:n})},selector:e=>{let{setFilter:t}=e;return(0,a.jsx)(r.P9,{onChange:e=>t("samplerate",e)})},icon:(0,a.jsx)(s.Dd,{className:"h-5 w-5 inline-block text-stone-500 mr-1 align-middle"})},{name:"Channels",field:"channels",render:e=>{let{value:t,clear:n}=e;return(0,a.jsx)(l.V,{field:"Channels",value:t,onRemove:n})},selector:e=>{let{setFilter:t}=e;return(0,a.jsx)(r.P9,{onChange:e=>t("channels",e)})},icon:(0,a.jsx)(s.QE,{className:"h-5 w-5 inline-block text-stone-500 mr-1 align-middle"})},{field:"time_expansion",name:"Time Expansion",render:e=>{let{value:t,clear:n}=e;return(0,a.jsx)(l.V,{field:"Time Expansion",value:t,onRemove:n})},selector:e=>{let{setFilter:t}=e;return(0,a.jsx)(r.P9,{onChange:e=>t("time_expansion",e)})},icon:(0,a.jsx)(s.i5,{className:"h-5 w-5 inline-block text-stone-500 mr-1 align-middle"})},{field:"latitude",name:"Latitude",render:e=>{let{value:t,clear:n}=e;return(0,a.jsx)(l.V,{field:"Latitude",value:t,onRemove:n})},selector:e=>{let{setFilter:t}=e;return(0,a.jsx)(r.f3,{name:"latitude",onChange:e=>t("latitude",e)})},icon:(0,a.jsx)(s.cX,{className:"h-5 w-5 inline-block text-stone-500 mr-1 align-middle"})},{field:"longitude",name:"Longitude",render:e=>{let{value:t,clear:n}=e;return(0,a.jsx)(l.V,{field:"Longitude",value:t,onRemove:n})},selector:e=>{let{setFilter:t}=e;return(0,a.jsx)(r.f3,{name:"longitude",onChange:e=>t("longitude",e)})},icon:(0,a.jsx)(s.nU,{className:"h-5 w-5 inline-block text-stone-500 mr-1 align-middle"})},{field:"tag",name:"Has Tag",render:e=>{let{value:t,clear:n}=e;return(0,a.jsx)(l.Z,{field:"Tag",value:"".concat(t.key,": ").concat(t.value),onRemove:n})},selector:e=>{let{setFilter:t}=e;return(0,a.jsx)(r.D3,{onChange:e=>t("tag",e)})},icon:(0,a.jsx)(s.lO,{className:"h-5 w-5 inline-block text-stone-500 mr-1 align-middle"})},{field:"has_issues",name:"Has Issues",render:e=>{let{value:t,clear:n}=e;return(0,a.jsx)(l.Z,{field:"Has Issues",value:t?"Yes":"No",onRemove:n})},selector:e=>{let{setFilter:t}=e;return(0,a.jsx)(r.vN,{onChange:e=>t("has_issues",e)})},icon:(0,a.jsx)(s.uN,{className:"h-5 w-5 inline-block text-stone-500 mr-1 align-middle"})}];t.Z=i},63425:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var a=n(57437),l=n(12098),r=n(14088),s=n(93847),i=n(61317);let o=[1,5,10,25,50,100];function c(e){let{pageSize:t,setPageSize:n}=e;return(0,a.jsx)(i.Z,{label:"Page Size:",selected:{label:t.toString(),value:t,id:t},onChange:e=>n(e),options:o.map(e=>({label:e.toString(),value:e,id:e}))})}function d(e){let{page:t,numPages:n,nextPage:i,hasNextPage:o,hasPrevPage:d,prevPage:u,setPage:m,pageSize:x,setPageSize:f}=e;return(0,a.jsxs)("div",{className:"flex flex-row space-x-2",children:[(0,a.jsx)(l.Z,{disabled:0===t,onClick:()=>m(0),variant:"secondary",mode:"text",children:(0,a.jsx)(r.Op,{className:"h-5 w-5 fill-transparent stroke-inherit"})}),(0,a.jsx)(l.Z,{onClick:u,disabled:!d,variant:"secondary",mode:"text",children:(0,a.jsx)(r.jJ,{className:"h-5 w-5 fill-transparent stroke-inherit"})}),(0,a.jsx)("div",{className:"w-14",children:(0,a.jsx)(s.II,{disabled:1===n,type:"number",className:"remove-arrow",value:t+1,onChange:e=>m(parseInt(e.target.value)-1)})}),(0,a.jsxs)(l.Z,{disabled:!0,variant:"secondary",mode:"text",children:["/ ",n]}),(0,a.jsx)(l.Z,{onClick:i,disabled:!o,variant:"secondary",mode:"text",children:(0,a.jsx)(r.Ne,{className:"h-5 w-5 fill-transparent stroke-inherit"})}),(0,a.jsx)(l.Z,{disabled:t===n-1,onClick:()=>m(n-1),variant:"secondary",mode:"text",children:(0,a.jsx)(r.OZ,{className:"h-5 w-5 fill-transparent stroke-inherit"})}),(0,a.jsx)(c,{pageSize:x,setPageSize:f})]})}},49660:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var a=n(57437),l=n(49896),r=n(35933),s=n(12098),i=n(14088),o=n(48423);function c(e){let{onClose:t,onCreate:n,onAdd:l,filter:r,...s}=e;return(0,a.jsx)(o.Z,{onSelect:e=>{null==l||l(e)},onCreate:e=>{null==n||n(e),null==l||l(e)},autoFocus:!0,onKeyDown:e=>{"Escape"===e.key?null==t||t():"Enter"===e.key&&(null==t||t())},initialFilter:r,...s})}function d(e){let{onAdd:t,onCreate:n,text:o="add",variant:d="secondary",filter:u,...m}=e;return(0,a.jsx)(l.J,{as:"div",className:"inline-block text-left",children:(0,a.jsxs)(r.bv,{zIndex:20,placement:"bottom",offset:4,enter:"transition duration-200 ease-out",enterFrom:"scale-95 opacity-0",enterTo:"scale-100 opacity-100",leave:"transition duration-150 ease-in",leaveFrom:"scale-100 opacity-100",leaveTo:"scale-95 opacity-0",portal:!0,children:[(0,a.jsx)(l.J.Button,{as:"div",children:(0,a.jsxs)(s.Z,{mode:"text",variant:d,padding:"py-1",children:[(0,a.jsx)(i.dt,{className:"inline-block w-5 h-5 align-middle"}),o]})}),(0,a.jsx)(l.J.Panel,{className:"w-72",focus:!0,unmount:!0,children:e=>{let{close:l}=e;return(0,a.jsx)(c,{onClose:l,onAdd:t,onCreate:n,filter:u,...m})}})]})})}},96930:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(40932),l=n(2265),r=n(37051),s=n(26731);function i(e){let{uuid:t,dataset:n,enabled:i=!0,withState:o=!1,onUpdate:c,onDelete:d,onError:u}=e;if(void 0!==n&&n.uuid!==t)throw Error("Dataset uuid does not match");let{query:m,useMutation:x}=(0,s.ZP)({uuid:t,initial:n,name:"dataset",enabled:i,getFn:r.Z.datasets.get,onError:u}),f=x({mutationFn:r.Z.datasets.update,onSuccess:c}),h=x({mutationFn:r.Z.datasets.delete,onSuccess:d}),g=(0,a.a)({queryKey:["dataset",t,"state"],queryFn:async()=>await r.Z.datasets.getState(t),enabled:o}),{data:j}=m,p=(0,l.useMemo)(()=>{if(null!=j)return r.Z.datasets.getDownloadUrl(j,"json")},[j]),v=(0,l.useMemo)(()=>{if(null!=j)return r.Z.datasets.getDownloadUrl(j,"csv")},[j]);return{...m,update:f,delete:h,state:g,download:{json:p,csv:v}}}},62608:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var a=n(2265),l=n(93191),r=n(25524),s=n(37051),i=n(33833),o=n(30635);let c={},d=[];function u(){let{filter:e=c,fixed:t=d,pageSize:n=20,enabled:u=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},m=(0,l.NL)(),x=(0,i.Z)({defaults:e,fixed:t}),{items:f,total:h,pagination:g,query:j,queryKey:p}=(0,o.Z)({name:"dataset_recordings",queryFn:s.Z.recordings.getMany,pageSize:n,filter:x.filter,enabled:u}),v=(0,a.useCallback)((e,t)=>{let{index:n}=t;m.setQueryData(p,t=>({...t,items:t.items.map((t,a)=>a!==n?t:e)}))},[m,p]),b=(0,a.useCallback)((e,t)=>{let{index:n}=t;m.setQueryData(p,e=>({...e,items:e.items.filter((e,t)=>t!==n)}))},[m,p]),w=(0,r.D)({mutationFn:async e=>{let{recording:t,data:n}=e;return await s.Z.recordings.update(t,n)},onSuccess:v}),y=(0,r.D)({mutationFn:async e=>{let{recording:t,tag:n}=e;return await s.Z.recordings.addTag(t,n)},onSuccess:v}),N=(0,r.D)({mutationFn:async e=>{let{recording:t,tag:n}=e;return await s.Z.recordings.removeTag(t,n)},onSuccess:v}),k=(0,r.D)({mutationFn:async e=>{let{recording:t}=e;return await s.Z.recordings.delete(t)},onSuccess:b});return{...j,items:f,total:h,pagination:g,filter:x,queryKey:p,updateRecording:w,addTag:y,removeTag:N,deleteRecording:k}}},26731:function(e,t,n){"use strict";n.d(t,{ZP:function(){return i}});var a=n(25524),l=n(40932),r=n(93191),s=n(2265);function i(e){let{uuid:t,initial:n,name:i,enabled:o=!0,getFn:c,onError:d}=e,u=(0,r.NL)(),m=(0,s.useCallback)(async()=>{if(null==t)throw Error("No uuid provided for object of type ".concat(i));return await c(t)},[t,i,c]),x=(0,l.a)({queryKey:[i,t],queryFn:m,retry:(e,t)=>{var n;if(null==t)return e<3;let a=null==t?void 0:null===(n=t.response)||void 0===n?void 0:n.status;return null==a?e<3:(!(a>=400)||!(a<500))&&e<3},initialData:n,staleTime:3e5,enabled:o&&null!=t}),f=(0,s.useCallback)(e=>{u.setQueryData([i,t],e)},[u,t,i]),{error:h,isError:g}=x;return(0,s.useEffect)(()=>{g&&(null==d||d(h))},[h,g,d]),{query:x,client:u,setData:f,useQuery:e=>{let{queryFn:n,name:a,enabled:r=!1}=e;return function(e){let{uuid:t,query:n,queryFn:a,name:r,secondaryName:i,enabled:o=!1}=e,{status:c,data:d}=n,u=(0,s.useCallback)(async()=>{if("pending"===c)throw Error("No data for object of type ".concat(r," (uuid=").concat(t,"). ")+"Either the query is not enabled or the query is still loading.");if("error"===c)throw Error("Error while loading object of type ".concat(r," (uuid=").concat(t,"), cannot mutate"));return await a(d)},[c,d,a,r,t]);return(0,l.a)({queryFn:u,queryKey:[r,t,i],enabled:"pending"!==c&&"error"!==c&&o})}({uuid:t,query:x,queryFn:n,secondaryName:a,name:i,enabled:r})},useMutation:e=>{let{mutationFn:n,onSuccess:l,onError:r,withUpdate:o=!0}=e;return function(e){let{uuid:t,query:n,client:l,mutationFn:r,name:i,onSuccess:o,onError:c,withUpdate:d=!0}=e,{status:u,data:m}=n,x=(0,s.useCallback)(async e=>{if(null==t)throw Error("No uuid provided for object of type ".concat(i));if("pending"===u)throw Error("No data for object of type ".concat(i," (uuid=").concat(t,"). ")+"Either the query is not enabled or the query is still loading.");if("error"===u)throw Error("Error while loading object of type ".concat(i," (uuid=").concat(t,"), cannot mutate"));return await r(m,e)},[u,m,r,i,t]);return(0,a.D)({mutationFn:x,onSuccess:e=>{d&&l.setQueryData([i,t],e),null==o||o(e)},onError:c})}({uuid:t,query:x,client:u,mutationFn:n,name:i,onSuccess:l,onError:r,withUpdate:o})},useDestruction:e=>{let{mutationFn:n,onSuccess:l,onError:r}=e;return function(e){let{uuid:t,query:n,client:l,mutationFn:r,name:i,onSuccess:o,onError:c}=e,{status:d,data:u}=n,m=(0,s.useCallback)(async()=>{if(null==t)throw Error("No uuid provided for object of type ".concat(i));if("pending"===d)throw Error("No data for object of type ".concat(i," (uuid=").concat(t,"). ")+"Either the query is not enabled or the query is still loading.");if("error"===d)throw Error("Error while loading object of type ".concat(i," (uuid=").concat(t,"), cannot mutate"));return await r(u)},[d,u,r,i,t]);return(0,a.D)({mutationFn:m,onSuccess:e=>{l.removeQueries({queryKey:[i,t]}),null==o||o(e)},onError:c})}({uuid:t,query:x,client:u,mutationFn:n,name:i,onSuccess:l,onError:r})}}}},15385:function(){}},function(e){e.O(0,[2970,8173,8083,5790,3277,231,932,9226,4898,3215,6845,4880,8026,595,6151,7771,3031,7051,3847,2302,1780,2971,7023,1744],function(){return e(e.s=56065)}),_N_E=e.O()}]);