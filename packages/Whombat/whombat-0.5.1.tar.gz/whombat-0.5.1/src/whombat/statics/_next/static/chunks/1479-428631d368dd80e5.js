"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1479],{237:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(57437),l=t(49896),a=t(35933),i=t(2265),o=t(94880);function u(e){let{children:n,tooltip:t,placement:u="right",autoPlacement:s=!1,offset:c=8}=e,m=(0,r.jsx)("span",{className:"max-w-fit",children:n}),[d,f]=(0,o.Z)(m);return(0,r.jsx)(l.J,{children:(0,r.jsxs)(a.bv,{show:f,placement:u,offset:c,enter:"transition duration-100 ease-out",enterFrom:"scale-95 opacity-0",enterTo:"scale-100 opacity-100",leave:"transition duration-50 ease-in",leaveFrom:"scale-100 opacity-100",leaveTo:"scale-95 opacity-0",portal:!0,autoPlacement:s,children:[(0,r.jsx)(l.J.Button,{as:i.Fragment,children:d}),(0,r.jsx)(l.J.Panel,{static:!0,className:"rounded p-2 shadow-lg bg-stone-50 dark:bg-stone-700 text-stone-600 dark:text-stone-400 text-sm pointer-events-none",children:t})]})})}},24729:function(e,n,t){t.d(n,{Z:function(){return p}});var r=t(57437),l=t(49899),a=t(35933),i=t(56800),o=t.n(i),u=t(2265),s=t(28446),c=t(13389),m=t(13354),d=t(79001),f=t(39160),h=t(26601),x=t(11646),v=t(14088);let g="focus:outline-none focus:ring-4 focus:ring-emerald-500/50 rounded-full";function p(e){let{currentTime:n,startTime:t,endTime:l,isPlaying:a,loop:i,speed:u,speedOptions:s,play:c,pause:m,seek:d,toggleLoop:f,setSpeed:h}=e;return(0,r.jsxs)("div",{className:"flex flex-row gap-2 items-center px-2 max-w-max rounded-md border border-stone-300 bg-stone-100 dark:border-stone-600 dark:bg-stone-700",children:[(0,r.jsx)("button",{type:"button",className:o()("text-stone-600 hover:text-stone-800 dark:text-stone-400 dark:hover:text-stone-200",g),onClick:()=>{if(a)return m();c()},children:a?(0,r.jsx)(v.fp,{className:"w-5 h-5"}):(0,r.jsx)(v.o1,{className:"w-5 h-5"})}),(0,r.jsx)("button",{type:"button",className:o()(g,{"text-emerald-500 dark:hover:text-emerald-300 hover:text-emerald-700":i,"dark:text-stone-400 dark:hover:text-stone-200 text-stone-600 hover:text-stone-800":!i}),onClick:()=>f(),children:(0,r.jsx)(v.Dj,{className:"w-5 h-5"})}),(0,r.jsx)(j,{label:"audio track",value:n,minValue:t,maxValue:l,step:.01,onChange:e=>d(e)}),(0,r.jsx)(w,{speed:u,onChange:e=>h(e),options:s})]})}function b(e){return void 0===e?"00:00.000":new Date(1e3*e).toISOString().substring(11,22).replace(/^00:/,"")}function w(e){let{speed:n,onChange:t,options:i}=e;return(0,r.jsx)(l.R,{value:n,onChange:t,children:(0,r.jsxs)(a.bv,{as:"div",className:"relative",leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",placement:"bottom",offset:4,flip:!0,floatingAs:u.Fragment,children:[(0,r.jsxs)(l.R.Button,{className:o()(g,"text-stone-600 hover:text-stone-800 dark:text-stone-400 dark:hover:text-stone-200","flex flex-row items-center w-full pr-7"),children:[(0,r.jsx)(v.rj,{className:"w-5 h-5"}),(0,r.jsx)("span",{className:"flex absolute inset-y-0 right-0 items-center pr-1 pointer-events-none",children:(0,r.jsx)(v.Qq,{className:"w-5 h-5","aria-hidden":"true"})})]}),(0,r.jsx)(l.R.Options,{className:"overflow-auto py-1 w-full max-h-60 text-base rounded-md ring-1 ring-opacity-5 shadow-lg sm:text-sm focus:outline-none bg-stone-50 ring-stone-900 dark:bg-stone-700 dark:ring-stone-600",children:i.map(e=>(0,r.jsx)(l.R.Option,{value:e.value,className:e=>{let{active:n}=e;return"relative cursor-default select-none p-1 ".concat(n?"bg-emerald-100 text-emerald-900":"text-stone-900 dark:text-stone-300")},children:n=>{let{selected:t}=n;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("span",{className:"block truncate ".concat(t?"text-emerald-500 font-medium":"font-normal"),children:e.label})})}},e.value.toString()))})]})})}function y(e){let{state:n,...t}=e,{index:l,name:a,trackRef:i}=t,f=(0,u.useRef)(null),{thumbProps:h,inputProps:x,isDragging:v}=(0,s.p)({index:l,trackRef:i,inputRef:f,name:a},n),{focusProps:g,isFocusVisible:p}=(0,c.F)();return(0,r.jsx)("div",{...h,className:o()("w-3 h-3 rounded-full shadow cursor-pointer",{"focus:ring-4 focus:outline-none focus:ring-emerald-500/50":p,"bg-emerald-700 dark:bg-emerald-300":v,"bg-emerald-500":!v}),children:(0,r.jsx)(m.T,{children:(0,r.jsx)("input",{ref:f,...(0,d.d)(x,g)})})})}function j(e){let n=(0,u.useRef)(null),t=(0,f.U)({style:"decimal"}),l=(0,x.x)({...e,numberFormatter:t}),{groupProps:a,trackProps:i,labelProps:o,outputProps:s}=(0,h.o)(e,l,n);return(0,r.jsxs)("div",{...a,className:"ml-2 w-36",children:[e.label&&(0,r.jsxs)("div",{className:"flex justify-between text-xs text-stone-600 dark:text-stone-400",children:[(0,r.jsx)(m.T,{children:(0,r.jsx)("label",{...o,children:e.label})}),(0,r.jsx)("output",{...s,children:b(l.getThumbValue(0))}),(0,r.jsx)("output",{children:b(e.maxValue)})]}),(0,r.jsx)("div",{className:"py-1 w-full cursor-pointer",...i,ref:n,children:(0,r.jsxs)("div",{className:"w-full h-1 rounded-full bg-stone-900",children:[(0,r.jsx)("span",{className:"relative h-1 bg-emerald-600 rounded-full dark:bg-emerald-200",style:{width:"".concat(Math.min(l.getThumbPercent(0),100),"%")}}),(0,r.jsx)(y,{index:0,state:l,trackRef:n,name:"currentTime"})]})})]})}},58992:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(57437),l=t(2265),a=t(73733),i=t(99258);function o(e){var n,t;let{bounds:o,viewport:u,onMove:s}=e,c=(0,l.useRef)(null),{width:m,height:d}=null!==(t=null===(n=c.current)||void 0===n?void 0:n.getBoundingClientRect())&&void 0!==t?t:{width:0,height:0},f=(0,l.useMemo)(()=>(0,i.x8)({width:m,height:d,viewport:u,bounds:o}),[u,o,m,d]),[h,x]=(0,l.useState)(u),{moveProps:v}=(0,a.Z)({dimensions:{width:m,height:d},viewport:o,onMoveStart:()=>x(u),onMove:e=>{let{shift:{time:n,freq:t}}=e;null==s||s({time:{min:h.time.min+n,max:h.time.max+n},freq:{min:h.freq.min-t,max:h.freq.max-t}})},onMoveEnd:()=>x(u)});return(0,r.jsx)("div",{draggable:!1,className:"flex relative flex-row items-center w-full h-8 rounded-md cursor-pointer select-none group outline outline-1 outline-stone-300 bg-stone-200 dark:bg-stone-800 dark:outline-stone-700",ref:c,children:(0,r.jsx)("div",{draggable:!1,tabIndex:0,className:"absolute bg-emerald-300 rounded-md border border-emerald-500 cursor-pointer dark:bg-emerald-700 focus:ring-4 focus:outline-none group-hover:bg-emerald-500/80 hover:bg-emerald-500/80 focus:ring-emerald-500/50",...v,style:{left:f.left,top:f.top,width:f.width,height:f.height}})})}},36305:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(57437),l=t(12098),a=t(14088),i=t(237),o=t(55948);function u(e){let{canDrag:n,canZoom:t,onDrag:u,onZoom:s,onReset:c}=e;return(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(i.Z,{tooltip:"Reset view",placement:"bottom",children:(0,r.jsx)(l.Z,{variant:"secondary",onClick:c,children:(0,r.jsx)(a.tv,{className:"w-5 h-5"})})}),(0,r.jsx)(i.Z,{tooltip:(0,r.jsxs)("div",{className:"inline-flex gap-2 items-center",children:["Drag spectrogram",(0,r.jsx)("div",{className:"text-xs",children:(0,r.jsx)(o.Z,{code:"x"})})]}),placement:"bottom",children:(0,r.jsx)(l.Z,{variant:n?"primary":"secondary",onClick:u,children:(0,r.jsx)(a.Vn,{className:"w-5 h-5"})})}),(0,r.jsx)(i.Z,{tooltip:(0,r.jsxs)("div",{className:"inline-flex gap-2 items-center",children:["Zoom to selection",(0,r.jsx)("div",{className:"text-xs",children:(0,r.jsx)(o.Z,{code:"z"})})]}),placement:"bottom",children:(0,r.jsx)(l.Z,{variant:t?"primary":"secondary",onClick:s,children:(0,r.jsx)(a.An,{className:"w-5 h-5"})})})]})}},25648:function(e,n,t){t.d(n,{Z:function(){return A}});var r=t(57437),l=t(31014),a=t(2265),i=t(39343),o=t(12098),u=t(14088),s=t(59226),c=t(24880),m=t(84573);function d(e){let{title:n,children:t,isOpen:l=!1,onClose:i}=e;return(0,r.jsx)(s.u.Root,{show:l,as:a.Fragment,children:(0,r.jsxs)(c.V,{as:"div",className:"relative z-50",onClose:()=>null==i?void 0:i(),children:[(0,r.jsx)(s.u.Child,{as:a.Fragment,enter:"ease-in-out duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-500",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),(0,r.jsx)("div",{className:"fixed inset-0 overflow-hidden",children:(0,r.jsx)("div",{className:"absolute inset-0 overflow-hidden",children:(0,r.jsx)("div",{className:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10",children:(0,r.jsx)(s.u.Child,{as:a.Fragment,enter:"transform transition ease-in-out duration-500 sm:duration-700",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-500 sm:duration-700",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:(0,r.jsxs)(c.V.Panel,{className:"pointer-events-auto relative w-screen max-w-md",children:[(0,r.jsx)(s.u.Child,{as:a.Fragment,enter:"ease-in-out duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-500",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)("div",{className:"absolute left-0 top-0 -ml-8 flex pr-2 pt-4 sm:-ml-10 sm:pr-4",children:(0,r.jsxs)("button",{type:"button",className:"relative rounded-md text-red-400 hover:text-white focus:outline-none focus:ring-4 focus:ring-red-500/50",onClick:()=>null==i?void 0:i(),children:[(0,r.jsx)("span",{className:"absolute -inset-2.5"}),(0,r.jsx)("span",{className:"sr-only",children:"Close panel"}),(0,r.jsx)(m.Z,{className:"h-6 w-6","aria-hidden":"true"})]})})}),(0,r.jsxs)("div",{className:"flex h-full flex-col overflow-y-auto bg-stone-100 dark:bg-stone-800 py-6 shadow-xl",children:[(0,r.jsx)("div",{className:"px-4 sm:px-6",children:(0,r.jsx)(c.V.Title,{className:"text-base font-semibold leading-6 text-stone-900 dark:text-stone-400",children:n})}),(0,r.jsx)("div",{className:"relative mt-6 flex-1 px-4 sm:px-6",children:t})]})]})})})})})]})})}var f=t(237),h=t(76611),x=t(26421),v=t(50108);function g(e){return{windowSize:{min:v.ff/e,max:v.KJ/e},hopSize:{min:v.E,max:v.nn},frequencyRange:{min:0,max:e/2},samplerate:e}}function p(e,n){let{min:t,max:r}=n;return Math.max(Math.min(e,r),t)}function b(e,n){let t=e.samplerate||n.samplerate,r=null==e.low_freq?void 0:p(e.low_freq,n.frequencyRange),l=null==e.high_freq?void 0:p(e.high_freq,n.frequencyRange),a=p(e.window_size,n.windowSize),i=p(e.hop_size,n.hopSize);return{...e,samplerate:t,low_freq:r,high_freq:l,window_size:a,hop_size:i}}var w=t(93847),y=t(61317),j=t(64454);function k(e){let{children:n}=e;return(0,r.jsx)("div",{className:"flex flex-col gap-2 p-4 w-full max-w-md rounded-md border dark:border-stone-600",children:n})}let M={dB:{id:"dB",value:"dB",label:"decibels (dB)"},amplitude:{id:"amplitude",value:"amplitude",label:"amplitude"},power:{id:"power",value:"power",label:"power"}};function C(e){let{control:n}=e;return(0,r.jsxs)(k,{children:[(0,r.jsx)(i.Qr,{name:"scale",control:n,render:e=>{var n;let{field:t,fieldState:l}=e;return(0,r.jsx)(w.BZ,{name:"scale",label:"Amplitude Scale",help:"Select the amplitude scale to use for the spectrogram.",error:null===(n=l.error)||void 0===n?void 0:n.message,children:(0,r.jsx)(y.Z,{selected:M[t.value],onChange:t.onChange,options:Object.values(M)})})}}),(0,r.jsx)(i.Qr,{name:"normalize",control:n,render:e=>{var n;let{field:t,fieldState:l}=e;return(0,r.jsx)(w.BZ,{name:"normalize",label:"Normalize Amplitudes",help:"Toggle to normalize amplitude values.",error:null===(n=l.error)||void 0===n?void 0:n.message,children:(0,r.jsx)(j.Z,{label:"Normalize",isSelected:t.value,onChange:t.onChange})})}})]})}var q=t(87749);function S(e){var n,t;let{control:l}=e,a=(0,i.bc)({control:l,name:"min_dB"}),o=(0,i.bc)({control:l,name:"max_dB"});return(0,r.jsx)(k,{children:(0,r.jsx)(w.BZ,{name:"clampValues",label:"Min and Max Amplitude values",help:"Select the min and max amplitude values to clamp to.",error:(null===(n=a.fieldState.error)||void 0===n?void 0:n.message)||(null===(t=o.fieldState.error)||void 0===t?void 0:t.message),children:(0,r.jsx)(q.Z,{label:"Filtering",minValue:v.$q,maxValue:0,step:2,value:[a.field.value,o.field.value],onChange:e=>{let[n,t]=e;a.field.onChange(n),o.field.onChange(t)}})})})}let Z={gray:{id:"gray",value:"gray",label:"Gray"},viridis:{id:"viridis",value:"viridis",label:"Viridis"},magma:{id:"magma",value:"magma",label:"Magma"},inferno:{id:"inferno",value:"inferno",label:"Inferno"},plasma:{id:"plasma",value:"plasma",label:"Plasma"},cividis:{id:"cividis",value:"cividis",label:"Cividis"},cool:{id:"cool",value:"cool",label:"Cool"},cubehelix:{id:"cubehelix",value:"cubehelix",label:"Cubehelix"},twilight:{id:"twilight",value:"twilight",label:"Twilight"}};function T(e){let{control:n}=e;return(0,r.jsx)(k,{children:(0,r.jsx)(i.Qr,{name:"cmap",control:n,render:e=>{var n;let{field:t,fieldState:l}=e;return(0,r.jsx)(w.BZ,{name:"colorMap",label:"Color map",help:"Select the color map to use for the spectrogram.",error:null===(n=l.error)||void 0===n?void 0:n.message,children:(0,r.jsx)(y.Z,{selected:Z[t.value],onChange:e=>t.onChange(e),options:Object.values(Z)})})}})})}function N(e){let{control:n}=e;return(0,r.jsx)(k,{children:(0,r.jsx)(i.Qr,{name:"pcen",control:n,render:e=>{var n,t;let{field:l,fieldState:a}=e;return(0,r.jsx)(w.BZ,{name:"denoise",label:"De-noise",help:l.value?"De-noising is being applied. Uncheck to disable de-noising.":"Check to apply PCEN de-noising.",error:null===(n=a.error)||void 0===n?void 0:n.message,children:(0,r.jsx)(j.Z,{label:"De-noise",isSelected:null!==(t=l.value)&&void 0!==t&&t,onChange:e=>l.onChange(e)})})}})})}function z(e){var n,t;let{constraints:l,control:o}=e,u=(0,i.bc)({control:o,name:"low_freq"}),s=(0,i.bc)({control:o,name:"high_freq"}),{onChange:c}=u.field,{onChange:m}=s.field,d=(0,a.useCallback)(e=>{let[n,t]=e;n==l.frequencyRange.min?c(null):c(null!=n?n:l.frequencyRange.min),t==l.frequencyRange.max?m(null):m(null!=t?t:l.frequencyRange.max)},[c,m,l.frequencyRange.min,l.frequencyRange.max]);return(0,r.jsx)(k,{children:(0,r.jsx)(w.BZ,{name:"filtering",label:"Filtering",help:"Select the range of frequencies to keep in the spectrogram.",children:(0,r.jsx)(q.Z,{label:"Filtering",minValue:l.frequencyRange.min,maxValue:l.frequencyRange.max,step:10,value:[null!==(n=u.field.value)&&void 0!==n?n:l.frequencyRange.min,null!==(t=s.field.value)&&void 0!==t?t:l.frequencyRange.max],onChange:d})})})}function P(e){var n;let{control:t}=e,l=(0,i.bc)({name:"resample",control:t});return(0,r.jsxs)(k,{children:[(0,r.jsx)(w.BZ,{name:"resample",label:"Resampling",help:l.field.value?"Uncheck to disable resampling.":"Audio is not being resampled. Check to enable resampling.",children:(0,r.jsx)(j.Z,{label:"Resample",isSelected:null!==(n=l.field.value)&&void 0!==n&&n,onChange:l.field.onChange})}),l.field.value&&(0,r.jsx)(i.Qr,{name:"samplerate",control:t,render:e=>{var n;let{field:t,fieldState:l}=e;return(0,r.jsx)(w.BZ,{name:"resampleRate",label:"Target rate",help:"Select the sampling rate you want to resample to, in Hertz.",error:null===(n=l.error)||void 0===n?void 0:n.message,children:(0,r.jsx)(w.II,{type:"number",...t,max:v.Y8,min:v.wk})})}})]})}var B=t(24017);let _={hann:{id:"hann",value:"hann",label:"Hann"},hamming:{id:"hamming",value:"hamming",label:"Hamming"},boxcar:{id:"boxcar",value:"boxcar",label:"Boxcar"},triang:{id:"triang",value:"triang",label:"Triangular"},blackman:{id:"blackman",value:"blackman",label:"Blackman"},bartlett:{id:"bartlett",value:"bartlett",label:"Bartlett"},flattop:{id:"flattop",value:"flattop",label:"Flat top"},parzen:{id:"parzen",value:"parzen",label:"Parzen"},bohman:{id:"bohman",value:"bohman",label:"Bohman"},blackmanharris:{id:"blackmanharris",value:"blackmanharris",label:"Blackman-Harris"},nuttall:{id:"nuttall",value:"nuttall",label:"Nuttall"},barthann:{id:"barthann",value:"barthann",label:"Bartlett-Hann"}};function E(e){let{constraints:n,control:t}=e;return(0,r.jsxs)(k,{children:[(0,r.jsx)(i.Qr,{name:"window_size",control:t,render:e=>{var t;let{field:l,fieldState:a}=e;return(0,r.jsx)(w.BZ,{name:"windowSize",label:"Window size",help:"Select the size of the window used for the STFT, in seconds.",error:null===(t=a.error)||void 0===t?void 0:t.message,children:(0,r.jsx)(B.Z,{label:"Window size",value:l.value,onChange:l.onChange,minValue:n.windowSize.min,maxValue:n.windowSize.max,step:.001})})}}),(0,r.jsx)(i.Qr,{name:"hop_size",control:t,render:e=>{var t;let{field:l,fieldState:a}=e;return(0,r.jsx)(w.BZ,{name:"hopSize",label:"Hop size",help:"Select the fraction of window size to use for the hop size.",error:null===(t=a.error)||void 0===t?void 0:t.message,children:(0,r.jsx)(B.Z,{label:"Hop size",value:l.value,onChange:l.onChange,minValue:n.hopSize.min,maxValue:n.hopSize.max,step:.05})})}}),(0,r.jsx)(i.Qr,{name:"window",control:t,render:e=>{var n;let{field:t,fieldState:l}=e;return(0,r.jsx)(w.BZ,{name:"window",label:"Window",help:"Select the window function to use for the STFT.",error:null===(n=l.error)||void 0===n?void 0:n.message,children:(0,r.jsx)(y.Z,{selected:_[t.value],onChange:t.onChange,options:Object.values(_)})})}})]})}function R(e){let{settings:n,samplerate:t,onChange:o}=e,u=(0,a.useMemo)(()=>b(n,g(t)),[n,t]),s=(0,a.useMemo)(()=>{let e=(0,l.F)(h.ie);return async(n,r,l)=>{let{resample:a,samplerate:i}=n,o=b(n,g(a&&i||t));return await e(o,r,l)}},[t]),{handleSubmit:c,watch:m,control:d}=(0,i.cI)({resolver:s,mode:"onBlur",reValidateMode:"onBlur",values:u}),f=m("samplerate"),v=(0,a.useMemo)(()=>g(f),[f]);return(0,a.useEffect)(()=>{let e=m((0,x.D)(c(e=>{null==o||o(e)}),300));return()=>e.unsubscribe()},[m,c,o]),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)(P,{control:d}),(0,r.jsx)(z,{constraints:v,control:d}),(0,r.jsx)(E,{constraints:v,control:d}),(0,r.jsx)(N,{control:d}),(0,r.jsx)(T,{control:d}),(0,r.jsx)(C,{control:d}),(0,r.jsx)(S,{control:d})]})}function A(e){let{settings:n,samplerate:t,onChange:l,onReset:i,onSave:s}=e,[c,m]=(0,a.useState)(!1);return(0,r.jsxs)("div",{children:[(0,r.jsx)(f.Z,{placement:"bottom",tooltip:"Spectrogram settings",children:(0,r.jsx)(o.Z,{variant:"secondary",onClick:()=>m(!0),children:(0,r.jsx)(u.ew,{className:"w-5 h-5"})})}),(0,r.jsx)(d,{title:(0,r.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,r.jsxs)("span",{className:"inline-flex items-center",children:[(0,r.jsx)(u.ew,{className:"inline-block mr-2 w-6 h-6"}),"Settings"]}),(0,r.jsxs)("span",{className:"inline-flex items-center gap-4",children:[(0,r.jsx)(o.Z,{mode:"text",variant:"warning",onClick:i,children:"Reset"}),(0,r.jsx)(o.Z,{mode:"text",variant:"primary",onClick:s,children:"Save"})]})]}),isOpen:c,onClose:()=>m(!1),children:(0,r.jsx)(R,{samplerate:t,settings:n,onChange:l})})]})}},81032:function(e,n,t){t.d(n,{Z:function(){return a},y:function(){return l}});var r=t(79105);let l={borderColor:"red",borderWidth:1,borderAlpha:1,fillAlpha:0,fillColor:"red"};function a(e,n){var t,a;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l,[o,u,s,c]=n;(null!==(t=i.borderAlpha)&&void 0!==t?t:1)!==0&&((0,r.F6)(e,i),e.strokeRect(o,u,s-o,c-u)),(null!==(a=i.fillAlpha)&&void 0!==a?a:0)!==0&&((0,r.wi)(e,i),e.fillRect(o,u,s-o,c-u))}},26735:function(e,n,t){t.d(n,{Z:function(){return l},n:function(){return r}});let r={borderColor:"red",borderWidth:1,borderAlpha:1};function l(e,n){var t,l,a,i;let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,{canvas:u}=e,{height:s}=u;(null!==(t=o.borderAlpha)&&void 0!==t?t:1)!==0&&(e.globalAlpha=null!==(l=o.borderAlpha)&&void 0!==l?l:1,e.strokeStyle=null!==(a=o.borderColor)&&void 0!==a?a:"red",e.lineWidth=null!==(i=o.borderWidth)&&void 0!==i?i:1,o.borderDash&&e.setLineDash(o.borderDash),e.beginPath(),e.moveTo(n,0),e.lineTo(n,s),e.stroke())}},79105:function(e,n,t){t.d(n,{Ej:function(){return l},F6:function(){return f},Yj:function(){return o},ZA:function(){return r},g8:function(){return s},hM:function(){return a},j_:function(){return c},mm:function(){return u},ud:function(){return i},wi:function(){return m}});let r="rgb(16 185 129)",l="rgb(59,130,246)",a="rgb(239 68 68)",i="rgb(245 158 11)",o={color:"white"},u={width:1,length:6},s={width:3,length:20};function c(e,n){let{fontFamily:t="system-ui",fontStyle:r="normal",fontWeight:l="normal",fontColor:a="#000000",fontSize:i=12,fontAlpha:o=1,textAlign:u="start",textBaseline:s="top"}=n;e.font="".concat(r," ").concat(l," ").concat(i,"px ").concat(t),e.textAlign=u,e.fillStyle=a,e.textBaseline=s,e.globalAlpha=o}function m(e,n){let{fillAlpha:t=.5,fillColor:r="#ff0000"}=n;e.fillStyle=r,e.globalAlpha=t}let d="#ff0000";function f(e,n){let{borderAlpha:t=1,borderColor:r=d,borderWidth:l=1,borderDash:a}=n;e.strokeStyle=null!=r?r:d,e.lineWidth=null!=l?l:1,e.globalAlpha=null!=t?t:1,null!=a?e.setLineDash(a):e.setLineDash([])}},19551:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(2265),l=t(37051),a=t(12554);let i=[{label:"1x",value:1},{label:"0.1x",value:.1},{label:"0.25x",value:.25},{label:"0.5x",value:.5},{label:"0.75x",value:.75},{label:"1.2x",value:1.2},{label:"1.5x",value:1.5},{label:"1.75x",value:1.75},{label:"2x",value:2},{label:"3x",value:3}];function o(e){let{recording:n,endTime:t,startTime:o=0,speed:u,withShortcuts:s=!0}=e,c=(0,r.useRef)(new Audio),m=(0,r.useMemo)(()=>i.filter(e=>{let t=n.samplerate*e.value;return t>=8e3&&t<=96e3}),[n]),d=(0,r.useMemo)(()=>m.find(e=>1===e.value)||m[0],[m]),[f,h]=(0,r.useState)(u||d.value),[x,v]=(0,r.useState)(o),[g,p]=(0,r.useState)(!1),[b,w]=(0,r.useState)(1),[y,j]=(0,r.useState)(!1),k=(0,r.useMemo)(()=>l.Z.audio.getStreamUrl({recording:n,startTime:o,endTime:t,speed:f}),[n,o,t,f]);(0,r.useEffect)(()=>{let e;let{current:n}=c;n.preload="none",n.src=k,n.loop=g,n.volume=b,j(!1),v(o);let t=()=>{n.paused||(v(n.currentTime*f+o),e=requestAnimationFrame(t))};e=requestAnimationFrame(t);let r=()=>{e=requestAnimationFrame(t)},l=()=>{cancelAnimationFrame(e)},a=()=>{cancelAnimationFrame(e)},i=()=>{cancelAnimationFrame(e),j(!1),v(o)};return n.addEventListener("play",r),n.addEventListener("pause",l),n.addEventListener("error",a),n.addEventListener("ended",i),()=>{cancelAnimationFrame(e),n.removeEventListener("play",r),n.removeEventListener("pause",l),n.removeEventListener("error",a),n.removeEventListener("ended",i)}},[k,f,o,g,b]);let M=(0,r.useRef)(!1),C=(0,r.useCallback)(()=>{if(M.current)return;let e=c.current.play();e?(M.current=!0,e.then(()=>{j(!0),M.current=!1}).catch(()=>{M.current=!1})):j(!0)},[]),q=(0,r.useCallback)(()=>{c.current.pause(),j(!1)},[]),S=(0,r.useCallback)(()=>{c.current.pause(),c.current.currentTime=0,v(o),j(!1)},[o]),Z=(0,r.useCallback)(e=>{c.current.volume=e,w(e)},[]),T=(0,r.useCallback)(e=>{c.current.currentTime=e/f},[f]),N=(0,r.useCallback)(()=>{y?q():C()},[y,C,q]),z=(0,r.useCallback)(()=>{c.current.loop=!c.current.loop,p(c.current.loop)},[]);return(0,a.Z)({onTogglePlay:N,enabled:s}),{startTime:o,endTime:t||n.duration,volume:b,currentTime:x,speed:f,loop:g,isPlaying:y,speedOptions:m,togglePlay:N,play:C,pause:q,stop:S,setVolume:Z,toggleLoop:z,seek:T,setSpeed:h}}},12554:function(e,n,t){t.d(n,{Z:function(){return i},c:function(){return a}});var r=t(68561),l=t(9025);let a=[{label:"Play/Pause",shortcut:" ",description:"Play or pause the audio"}];function i(e){let{onTogglePlay:n,enabled:t=!0}=e;(0,r.Z)((0,l.Z)({enabled:t,key:" ",preventDefault:!0}),n)}},26140:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(2265),l=t(85438),a=t(96325);function i(e){let{ref:n,draw:t,onMount:i,onResize:o,onDraw:u,onClear:s,onError:c}=e,[m,d]=(0,r.useState)(null);(0,l.Z)(()=>{var e,t,r,l;let{current:a}=n;if(null==a)return;a.width=null!==(r=null===(e=a.parentElement)||void 0===e?void 0:e.offsetWidth)&&void 0!==r?r:a.offsetWidth,a.height=null!==(l=null===(t=a.parentElement)||void 0===t?void 0:t.offsetHeight)&&void 0!==l?l:a.offsetHeight;let o=a.getContext("2d");if(null==o){a.classList.add("border-2","border-red-500"),null==c||c(a);return}o.imageSmoothingEnabled=!1,d(o),null==i||i(o)});let f=(0,r.useCallback)(()=>{let{current:e}=n;if(null!=e&&null!=m){var r,l,a,i;e.width=null!==(a=null===(r=e.parentElement)||void 0===r?void 0:r.offsetWidth)&&void 0!==a?a:e.offsetWidth,e.height=null!==(i=null===(l=e.parentElement)||void 0===l?void 0:l.offsetHeight)&&void 0!==i?i:e.offsetHeight,t(m),null==o||o(m)}},[n,m,t,o]);return(0,a.Z)("resize",f,window),(0,r.useEffect)(()=>{if(null!=m)return t(m),null==u||u(m),()=>{let{canvas:e}=m;m.clearRect(0,0,e.width,e.height),null==s||s(m)}},[m,t,u,s]),(0,r.useEffect)(()=>{let e=e=>{var t;let r=e.target;(null===(t=n.current)||void 0===t?void 0:t.contains(r))&&(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)&&(e.preventDefault(),e.stopPropagation())};return window.addEventListener("wheel",e,{passive:!1}),()=>window.removeEventListener("wheel",e)},[n]),n}},87697:function(e,n,t){t.d(n,{Z:function(){return q}});var r=t(2265),l=t(82517),a=t(79105);function i(e,n){let t=n.max-n.min,r=Math.floor(Math.log10(t/e*50))+1,l=10**r;return t/l<=3&&(l/=2,r-=1),{digits:r,mayorTickStep:l,minorTickStep:l/5}}function o(e,n){return e.toPrecision(Math.floor(Math.log10(Math.max(e,0)+1))+1-Math.min(n,0))}function u(e,n){let{min:t,max:r}=e,l=Math.ceil(t/n);return Array(Math.floor((r-t)/n)+1).fill(0).map((e,t)=>(l+t)*n)}function s(e,n){let{label:t,length:r=10,width:l=1,alpha:i=1,color:o="black"}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,a.F6)(e,{borderColor:o,borderWidth:l,borderAlpha:i,borderDash:[]}),e.beginPath(),e.moveTo(n,0),e.lineTo(n,r),e.stroke(),null!=t&&((0,a.j_)(e,{fontColor:o,textBaseline:"bottom"}),e.fillText(t,n+2,r))}function c(e,n){let{label:t,length:r=10,width:l=1,alpha:i=1,color:o="black"}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,a.F6)(e,{borderColor:o,borderWidth:l,borderAlpha:i,borderDash:[]}),e.beginPath(),e.moveTo(0,n),e.lineTo(r,n),e.stroke(),null!=t&&(e.save(),e.translate(r,n),e.rotate(-Math.PI/2),(0,a.j_)(e,{fontColor:o,textBaseline:"bottom"}),e.fillText(t,2,0),e.restore())}let m=[.125,.25,.5,1,2,4,8,16,32,64,128,256];var d=t(37051),f=t(32420),h=t(96325),x=t(74277);function v(e){let{recording:n,window:t,parameters:a=l._z,getSpectrogramImageUrl:i=d.Z.spectrograms.getUrl}=e,{isLoading:o,isError:u,image:s}=function(e){let{url:n,timeout:t=3e4,onLoad:l,onError:a,onTimeout:i}=e,o=(0,r.useRef)(null),[u,s]=(0,r.useState)(null),[c,m]=(0,r.useState)(!0);null===o.current&&(o.current=new Image),(0,r.useEffect)(()=>{null!=o.current&&(o.current.src=n,m(!0),s(null))},[n]);let d=(0,r.useCallback)(()=>{s("Took too long to load"),m(!1),null==i||i()},[i]),[v,g]=(0,f.Z)(d,t),p=(0,r.useCallback)(()=>{m(!1),s(null),g(),null==l||l()},[g,l]);(0,h.Z)("load",p,o.current);let b=(0,r.useCallback)(()=>{m(!1),s("Unknown error"),g(),null==a||a()},[g,a]);return(0,h.Z)("error",b,o.current),(0,x.Z)(()=>{g(),null!=o.current&&(o.current.src="")}),{url:n,image:o.current,isLoading:c,isError:null!=u,error:u}}({url:(0,r.useMemo)(()=>i({recording:n,segment:t.time,parameters:a}),[n,t.time,a,i])}),c=(0,r.useCallback)((e,n)=>{o||u||function(e){let{ctx:n,image:t,window:r,bounds:l}=e;n.canvas.setAttribute("class",""),function(e,n,t,r){e.fillStyle="#f8f9fa",e.clearRect(0,0,e.canvas.width,e.canvas.height);let l=r.time,a=r.freq.max,i=l.max-l.min,o=(t.time.min-l.min)/i,u=t.freq.max/a,s=o*n.width,c=(1-u)*n.height,m=(t.time.max-t.time.min)*n.width/i,d=(t.freq.max-t.freq.min)*n.height/a,f=e.canvas.width,h=e.canvas.height;e.globalAlpha=1,e.drawImage(n,s,c,m,d,0,0,f,h)}(n,t,r,l)}({ctx:e,image:s,window:n,bounds:t})},[s,t,o,u]);return{image:s,viewport:t,isLoading:o,isError:u,draw:c}}var g=t(79001),p=t(73944),b=t(81032),w=t(7832);let y={fillAlpha:.3,fillColor:"yellow",borderWidth:1,borderColor:"yellow",borderDash:[4,4]},j={fillAlpha:.3,fillColor:"red",borderWidth:1,borderColor:"red",borderDash:[4,4]};function k(e){let{viewport:n,dimensions:t,onScroll:l,shift:a=!1,ctrl:i=!1,alt:o=!1,enabled:u=!0,relative:s=!1}=e;return{scrollProps:(0,r.useMemo)(()=>({onWheel:e=>{let{deltaY:r,shiftKey:c,ctrlKey:m,altKey:d,metaKey:f}=e;if(u&&m==i&&c==a&&(f||d)==o)switch(!0){case c&&s:return null==l?void 0:l({timeRatio:r/t.width});case!c&&s:return null==l?void 0:l({freqRatio:r/t.height});case c&&!s:let h=(0,w.Xb)(r,n,t.width,!0);return null==l?void 0:l({time:h});case!c&&!s:let x=(0,w.TR)(r,n,t.height,!0);return null==l?void 0:l({freq:-x})}}}),[u,l,t,i,a,o,s,n])}}var M=t(17624),C=t(99258);function q(e){let{recording:n,bounds:t,initial:d,dimensions:f,parameters:h=l._z,onParameterChange:x,onModeChange:q,onDoubleClick:Z,enabled:T=!0,withShortcuts:N=!0}=e,z=(0,r.useMemo)(()=>null!=t?t:{time:{min:0,max:n.duration},freq:{min:0,max:n.samplerate/2}},[t,n]),P=(0,r.useMemo)(()=>null!=d?d:(0,C.AX)({startTime:z.time.min,endTime:z.time.max,samplerate:n.samplerate,parameters:h}),[d,z,n,h]),[B,_]=(0,r.useState)(S(h,n)),[E,R]=(0,r.useState)(P);(0,r.useEffect)(()=>{null!=d&&R(d)},[d]);let{draw:A,isLoading:F,isError:L}=function(e){let{recording:n,window:t,parameters:l}=e,{selected:a,prev:i,next:o}=function(e){let{recording:n,window:t}=e,l=(0,r.useMemo)(()=>({time:{min:0,max:n.duration},freq:{min:0,max:n.samplerate/2}}),[n]),a=(0,r.useMemo)(()=>(function(e,n,t){let r=e.time.max-e.time.min;if(r<=n)return[{time:e.time,freq:e.freq}];let l=.6*n;return Array(Math.ceil((r-(n-l))/l)).fill(0).map((t,r)=>{let a=e.time.min+r*l;return{time:{min:a,max:a+n},freq:e.freq}})})(l,function(e){var n;let t=e.time.max-e.time.min;return null!==(n=m.find(e=>e>=3*t))&&void 0!==n?n:m[m.length-1]}(t),0),[l,t]),i=(0,r.useMemo)(()=>(function(e){if(0===e.length)return -1;let n=e[0],t=0;for(var r=1;r<e.length;r++)e[r]<n&&(t=r,n=e[r]);return t})(a.map(e=>Math.abs((e.time.min+e.time.max)/2-(t.time.min+t.time.max)/2))),[a,t]),{prev:o,next:u}=(0,r.useMemo)(()=>{var e,n;return{prev:null!==(e=a[i-1])&&void 0!==e?e:a[i],next:null!==(n=a[i+1])&&void 0!==n?n:a[i]}},[a,i]);return{selected:(0,r.useMemo)(()=>a[i],[a,i]),prev:o,next:u}}({recording:n,window:t}),u=v({recording:n,window:a,parameters:l});return v({recording:n,window:i,parameters:l}),v({recording:n,window:o,parameters:l}),u}({recording:n,window:E,parameters:B}),D=(0,r.useCallback)(e=>{R((0,C.Tn)(e,z))},[z]),K=(0,r.useCallback)(e=>{let{time:n=1,freq:t=1}=e;R(e=>(0,C.Tn)((0,C.MN)(e,{time:n,freq:t}),z))},[z]),V=(0,r.useCallback)(e=>{let{time:n=0,freq:t=0}=e;R(e=>(0,C.Tn)((0,C.o0)(e,{time:n,freq:t},!1),z))},[z]),W=(0,r.useCallback)(()=>{R(P)},[P]),I=(0,r.useCallback)(e=>{let{time:n,freq:t}=e;R(e=>(0,C.Tn)((0,C.AP)(e,{time:n,freq:t}),z))},[z]),H=(0,r.useCallback)(e=>{let t=S(e,n);null==x||x(t),_(t)},[n,x]),Q=(0,r.useCallback)(()=>{_(S(h,n))},[h,n]),{props:O,draw:U,canDrag:X,canZoom:Y,enableDrag:J,enableZoom:G,disable:$}=function(e){let{viewport:n,dimensions:t,onDragStart:l,onDragEnd:a,onDrag:i,onZoom:o,onModeChange:u,onScrollMoveTime:s,onScrollMoveFreq:c,onScrollZoomTime:m,onScrollZoomFreq:d,onDoubleClick:f,enabled:h=!0}=e,[x,v]=(0,r.useState)(h?"drag":"idle"),{dragProps:M}=function(e){let{viewport:n,dimensions:t,enabled:l=!0,onDoubleClick:a,onDragStart:i,onDrag:o,onDragEnd:u}=e,[s,c]=(0,r.useState)(n),m=(0,r.useCallback)(()=>{l&&(c(n),null==i||i())},[i,n,l]),d=(0,r.useCallback)(e=>{let{shift:n}=e;if(!l)return;let t={time:{min:s.time.min-n.time,max:s.time.max-n.time},freq:{min:s.freq.min+n.freq,max:s.freq.max+n.freq}};null==o||o(t)},[o,s,l]),f=(0,r.useCallback)(()=>{l&&(c(n),null==u||u())},[u,n,l]),{props:h,isDragging:x}=(0,p.Z)({viewport:n,dimensions:t,onMoveStart:m,onMove:d,onMoveEnd:f,onDoubleClick:a});return{dragProps:h,isDragging:x}}({viewport:n,dimensions:t,onDragStart:l,onDrag:i,onDragEnd:a,onDoubleClick:f,enabled:h&&"drag"===x}),{zoomProps:C,draw:q}=function(e){let{viewport:n,dimensions:t,onZoom:l,enabled:a=!0}=e,[i,o]=(0,r.useState)(!1),[u,s]=(0,r.useState)(null),c=(0,r.useCallback)(()=>{s(null)},[]),m=(0,r.useCallback)(e=>{let{initial:n,shift:t}=e,r={time:{min:Math.min(n.time,n.time+t.time),max:Math.max(n.time,n.time+t.time)},freq:{min:Math.min(n.freq,n.freq-t.freq),max:Math.max(n.freq,n.freq-t.freq)}};s(r),o(function(e){let{time:n,freq:t}=e;return!(n.min<0)&&!(t.min<0)&&n.max-n.min>.001&&t.max-t.min>1}(r))},[]),d=(0,r.useCallback)(()=>{null!=u&&(i&&(null==l||l(u)),s(null))},[u,i,l]),{props:f,isDragging:h}=(0,p.Z)({enabled:a,viewport:n,dimensions:t,onMoveStart:c,onMove:m,onMoveEnd:d}),x=(0,r.useCallback)(e=>{if(!a||null==u)return;e.canvas.style.cursor="nwse-resize";let t=e.canvas.getBoundingClientRect(),r=(0,w.$y)(t,[u.time.min,u.freq.min,u.time.max,u.freq.max],n),l=i?y:j;(0,b.Z)(e,r,l)},[a,u,n,i]);return{zoomProps:f,isDragging:h,isValid:i,draw:x}}({viewport:n,dimensions:t,onZoom:(0,r.useCallback)(e=>{null==o||o(e),v("drag")},[o]),enabled:h&&"zoom"===x}),{scrollProps:S}=k({viewport:n,dimensions:t,onScroll:(0,r.useCallback)(e=>{let{time:n}=e;null!=n&&(null==s||s({time:n}))},[s]),shift:!0,enabled:h,relative:!1}),{scrollProps:Z}=k({viewport:n,dimensions:t,onScroll:(0,r.useCallback)(e=>{let{timeRatio:n}=e;null!=n&&(null==m||m({time:1+n}))},[m]),shift:!0,alt:!0,enabled:h,relative:!0}),{scrollProps:T}=k({viewport:n,dimensions:t,onScroll:(0,r.useCallback)(e=>{let{freq:n}=e;null!=n&&(null==c||c({freq:n}))},[c]),ctrl:!0,enabled:h,relative:!1}),{scrollProps:N}=k({viewport:n,dimensions:t,onScroll:(0,r.useCallback)(e=>{let{freqRatio:n}=e;null!=n&&(null==d||d({freq:1+n}))},[d]),ctrl:!0,alt:!0,enabled:h,relative:!0}),z=(0,g.d)(M,C,S,Z,N,T);return{props:z,draw:q,canDrag:h&&"drag"===x,canZoom:h&&"zoom"===x,enabled:h,enableDrag:(0,r.useCallback)(()=>{null==u||u("drag"),v("drag")},[u]),enableZoom:(0,r.useCallback)(()=>{null==u||u("zoom"),v("zoom")},[u]),disable:(0,r.useCallback)(()=>{null==u||u("idle"),v("idle")},[u])}}({viewport:E,onDrag:D,onZoom:D,onScrollMoveTime:V,onScrollMoveFreq:V,onScrollZoomTime:K,onScrollZoomFreq:K,onDoubleClick:Z,onModeChange:q,dimensions:f,enabled:T}),ee=(0,r.useCallback)(e=>{X?e.canvas.style.cursor="grab":Y?e.canvas.style.cursor="zoom-in":e.canvas.style.cursor="default",A(e,E),function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.Yj,{canvas:r}=e,{width:l}=r,{min:c,max:m}=n,d=m-c,{mayorTickStep:f,minorTickStep:h,digits:x}=i(l,n),v=u(n,f),g=u(n,h);v.forEach(n=>{s(e,l*(n-c)/d,{label:o(n,x),...t,...a.g8})}),g.forEach(n=>{s(e,l*(n-c)/d,{...t,...a.mm})})}(e,E.time),function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.Yj,{canvas:r}=e,{height:l}=r,{min:s,max:m}=n,d=m-s,{mayorTickStep:f,minorTickStep:h,digits:x}=i(l,n),v=u(n,f),g=u(n,h);v.forEach(n=>{c(e,l*(m-n)/d,{label:o(n/1e3,x-3),...t,...a.g8})}),g.forEach(n=>{c(e,l*(m-n)/d,{...t,...a.mm})})}(e,E.freq),U(e)},[A,U,E,X,Y]);return(0,M.Z)({onGoMove:J,onGoZoom:G,enabled:N}),{bounds:z,parameters:B,viewport:E,isLoading:F,isError:L,canDrag:X,canZoom:Y,draw:ee,props:O,reset:W,zoom:D,scale:K,shift:V,centerOn:I,setParameters:H,resetParameters:Q,enableDrag:J,enableZoom:G,disable:$}}function S(e,n){let t={};if(null!=e.high_freq){var r;let l=e.resample&&null!==(r=e.samplerate)&&void 0!==r?r:n.samplerate;t.high_freq=Math.min(e.high_freq,Math.round(l/2*.95)),null!=e.low_freq&&(t.low_freq=Math.min(e.low_freq,e.high_freq-1))}return{...e,...t}}},17624:function(e,n,t){t.d(n,{Z:function(){return i},a:function(){return a}});var r=t(68561),l=t(9025);let a=[{label:"Move",shortcut:"x",description:"Move around the spectrogram"},{label:"Zoom in",shortcut:"z",description:"Zoom into a selection of the spectrogram"}];function i(e){let{onGoMove:n,onGoZoom:t,enabled:a=!0}=e;(0,r.Z)((0,l.Z)({enabled:a,key:"x"}),n),(0,r.Z)((0,l.Z)({enabled:a,key:"z"}),t)}},2803:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(2265),l=t(26735),a=t(7832);function i(e){let{viewport:n,currentTime:t,isPlaying:i,onTimeChange:o,enabled:u=!0}=e;(0,r.useEffect)(()=>{u&&i&&(null==o||o(t))},[t,i,o,u]);let s=(0,r.useCallback)(e=>{if(!i||!u)return;e.canvas.style.cursor="not-allowed";let{width:r}=e.canvas,o=(0,a.f5)(t,n,r);(0,l.Z)(e,o)},[t,i,n,u]);return{enabled:i&&u,draw:s}}},9025:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(2265);function l(e){let{key:n,enabled:t=!0,preventDefault:l=!1,stopPropagation:a=!1}=e;return(0,r.useCallback)(e=>{if(!t)return!1;let{target:r}=e;return!(r instanceof HTMLInputElement||r instanceof HTMLTextAreaElement||r instanceof HTMLButtonElement)&&e.key===n&&(l&&e.preventDefault(),a&&e.stopPropagation(),!0)},[n,t,l,a])}},73733:function(e,n,t){t.d(n,{Z:function(){return i}});var r=t(2265),l=t(19198),a=t(7832);function i(e){let{viewport:n,dimensions:t,onMoveStart:i,onMove:o,onMoveEnd:u}=e,[s,c]=(0,r.useState)(!1),[m,d]=(0,r.useState)({x:0,y:0}),f=(0,r.useCallback)(e=>{let{deltaX:r,deltaY:l,shiftKey:i,altKey:u,ctrlKey:s,metaKey:c}=e;d(e=>{let{x:n,y:t}=e;return{x:n+r,y:t+l}});let f=(0,a._l)({x:m.x+r,y:m.y+l},n,t,!0);null==o||o({shift:f,shiftKey:i,altKey:u,ctrlKey:s,metaKey:c})},[t,m,n,o]),h=(0,r.useCallback)(e=>{let{shiftKey:n,altKey:t,ctrlKey:r,metaKey:l}=e;d({x:0,y:0}),c(!0),null==i||i({shiftKey:n,altKey:t,ctrlKey:r,metaKey:l})},[i]),x=(0,r.useCallback)(e=>{let{shiftKey:n,altKey:t,ctrlKey:r,metaKey:l}=e;d({x:0,y:0}),null==u||u({shiftKey:n,altKey:t,ctrlKey:r,metaKey:l})},[u]),{moveProps:v}=(0,l.r)({onMoveStart:h,onMove:f,onMoveEnd:x});return{moveProps:v,isDragging:s,shift:m}}},73944:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(2265),l=t(79001),a=t(73733),i=t(7832);function o(e){let{viewport:n,dimensions:t,enabled:o=!0,onClick:u,onDoubleClick:s,onMoveStart:c,onMove:m,onMoveEnd:d}=e,[f,h]=(0,r.useState)(null),x=(0,r.useMemo)(()=>{let e=e=>{if(!o)return;let r={x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY},l=(0,i._l)(r,n,t);h(l),null==u||u({position:l,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,altKey:e.altKey,metaKey:e.metaKey}),2===e.detail&&(null==s||s({position:l,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,altKey:e.altKey,metaKey:e.metaKey}))};return{onMouseDown:e,onPointerDown:e,onClick:e}},[o,n,t,u,s]),v=(0,r.useCallback)(function(){let{shiftKey:e,ctrlKey:n,altKey:t,metaKey:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o&&(null==c||c({shiftKey:e,ctrlKey:n,altKey:t,metaKey:r}))},[o,c]),g=(0,r.useCallback)(e=>{let{shift:n,shiftKey:t,ctrlKey:r,altKey:l,metaKey:a}=e;o&&null!=f&&(null==m||m({initial:f,shift:n,shiftKey:t,ctrlKey:r,altKey:l,metaKey:a}))},[f,o,m]),p=(0,r.useCallback)(function(){let{shiftKey:e,ctrlKey:n,altKey:t,metaKey:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o&&(h(null),null==d||d({shiftKey:e,ctrlKey:n,altKey:t,metaKey:r}))},[o,d]),{moveProps:b,isDragging:w}=(0,a.Z)({viewport:n,dimensions:t,onMoveStart:v,onMove:g,onMoveEnd:p});return{props:(0,l.d)(b,x),isDragging:w}}},7832:function(e,n,t){t.d(n,{$y:function(){return d},MR:function(){return k},PT:function(){return T},TR:function(){return c},WC:function(){return w},Xb:function(){return u},_l:function(){return m},c0:function(){return i},f5:function(){return o},f8:function(){return f},fM:function(){return N},vZ:function(){return C},w9:function(){return b},zM:function(){return M}});var r=t(57911),l=t(29406),a=t(50108);function i(e,n){let[t,r,l,a]=e,[i,o,u,s]=n,c=Math.max(t,i),m=Math.max(r,o),d=Math.min(l,u),f=Math.min(a,s);return c>d||m>f?null:[c,m,d,f]}function o(e,n,t){let{time:r}=n;return r.max===r.min?r.max:t*(e-r.min)/(r.max-r.min)}function u(e,n,t){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],{time:l}=n,a=l.max-l.min;return r?a*e/t:l.min+a*e/t}function s(e,n,t){let{freq:r}=n;return r.max===r.min?r.max:t*(r.max-e)/(r.max-r.min)}function c(e,n,t){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],{freq:l}=n,a=l.max-l.min;return r?a*e/t:l.max-a*e/t}function m(e,n,t){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],{width:l,height:a}=t,{x:i,y:o}=e;return{time:u(i,n,l,r),freq:c(o,n,a,r)}}function d(e,n,t){let{width:r,height:l}=e,[a,i,u,c]=n,m=o(a,t,r),d=o(u,t,r),f=s(c,t,l),h=s(i,t,l);return[Math.min(m,d),Math.min(f,h),Math.max(m,d),Math.max(f,h)]}function f(e,n,t){let{width:r,height:l}=e,[a,i]=n;return[a=o(a,t,r),i=s(i,t,l)]}function h(e,n,t){let{width:r,height:l}=e,[a,i]=n;return[a=u(a,t,r),i=c(i,t,l)]}function x(e,n,t){return n.map(n=>f(e,n,t))}function v(e,n,t){return n.map(n=>h(e,n,t))}function g(e,n,t){return n.map(n=>x(e,n,t))}function p(e,n,t){return n.map(n=>v(e,n,t))}function b(e,n,t){let{type:r}=n;switch(r){case"TimeStamp":return{...n,coordinates:o(n.coordinates,t,e.width)};case"TimeInterval":return{...n,coordinates:function(e,n,t){let{width:r}=e,[l,a]=n;return[l=o(l,t,r),a=o(a,t,r)]}(e,n.coordinates,t)};case"Point":return{...n,coordinates:f(e,n.coordinates,t)};case"BoundingBox":return{...n,coordinates:d(e,n.coordinates,t)};case"MultiPoint":case"LineString":return{...n,coordinates:x(e,n.coordinates,t)};case"MultiLineString":case"Polygon":return{...n,coordinates:g(e,n.coordinates,t)};case"MultiPolygon":return{...n,coordinates:n.coordinates.map(n=>g(e,n,t))};default:return console.error("Unknown geometry type ".concat(r," at scaling")),n}}function w(e,n,t){let{type:r}=n;switch(r){case"TimeStamp":return{...n,coordinates:u(n.coordinates,t,e.width)};case"TimeInterval":return{...n,coordinates:function(e,n,t){let{width:r}=e,[l,a]=n;return[l=u(l,t,r),a=u(a,t,r)]}(e,n.coordinates,t)};case"BoundingBox":return{...n,coordinates:function(e,n,t){let{width:r,height:l}=e,[a,i,o,s]=n,m=u(a,t,r),d=u(o,t,r),f=c(i,t,l),h=c(s,t,l);return[Math.min(m,d),Math.min(f,h),Math.max(m,d),Math.max(f,h)]}(e,n.coordinates,t)};case"Point":return{...n,coordinates:h(e,n.coordinates,t)};case"MultiPoint":case"LineString":return{...n,coordinates:v(e,n.coordinates,t)};case"MultiLineString":case"Polygon":return{...n,coordinates:p(e,n.coordinates,t)};case"MultiPolygon":return{...n,coordinates:n.coordinates.map(n=>p(e,n,t))};default:return console.error("Unknown geometry type ".concat(r," at scaling")),n}}function y(e,n){let[t,r]=e,[l,a]=n;return Math.sqrt((l-t)**2+(a-r)**2)}function j(e,n){var t;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return Math.min(...(t={type:"LineString",coordinates:n.coordinates}).coordinates.slice(1).map((n,r)=>(function(e,n){let[t,r]=n,l=y(t,r)**2;if(0===l)return y(e,t);let a=((e[0]-t[0])*(r[0]-t[0])+(e[1]-t[1])*(r[1]-t[1]))/l;return a=Math.max(0,Math.min(1,a)),y(e,[t[0]+a*(r[0]-t[0]),t[1]+a*(r[1]-t[1])])})(e,[t.coordinates[r],n])))<r}function k(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;switch(n.type){case"TimeStamp":return function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,[r]=e;return Math.abs(n-r)<t}(e,n.coordinates,t);case"TimeInterval":return function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,[r]=e,[l,a]=n;return r>l-t&&r<a+t}(e,n.coordinates,t);case"BoundingBox":return function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,[r,l]=e,[a,i,o,u]=n;return r>a-t&&r<o+t&&l>i-t&&l<u+t}(e,n.coordinates,t);case"Point":return function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return y(e,n.coordinates)<t}(e,n,t);case"MultiPoint":return function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return Math.min(...n.coordinates.map(n=>y(e,n)))<t}(e,n,t);case"LineString":return j(e,n,t);case"MultiLineString":return function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return n.coordinates.some(n=>j(e,{type:"LineString",coordinates:n},t))}(e,n,t);case"Polygon":return(0,l.Z)(e,n);case"MultiPolygon":return n.coordinates.some(n=>{var t;return t={type:"Polygon",coordinates:n},(0,l.Z)(e,t)});default:return!1}}function M(e,n,t){let r=t[0]-n[0],l=t[1]-n[1];return{...e,coordinates:e.coordinates.map(e=>e.map(e=>{let[n,t]=e;return[n+r,t+l]}))}}function C(e,n,t){let{type:r}=e;switch(r){case"TimeStamp":return function(e,n,t){let r=t[0]-n[0];return{...e,coordinates:e.coordinates+r}}(e,n,t);case"TimeInterval":return function(e,n,t){let r=t[0]-n[0];return{...e,coordinates:[e.coordinates[0]+r,e.coordinates[1]+r]}}(e,n,t);case"BoundingBox":return function(e,n,t){let r=t[0]-n[0],l=t[1]-n[1];return{...e,coordinates:[e.coordinates[0]+r,e.coordinates[1]+l,e.coordinates[2]+r,e.coordinates[3]+l]}}(e,n,t);case"Point":return function(e,n,t){let r=t[0]-n[0],l=t[1]-n[1],[a,i]=e.coordinates;return{...e,coordinates:[a+r,i+l]}}(e,n,t);case"MultiPoint":return function(e,n,t){let r=t[0]-n[0],l=t[1]-n[1];return{...e,coordinates:e.coordinates.map(e=>{let[n,t]=e;return[n+r,t+l]})}}(e,n,t);case"LineString":return function(e,n,t){let r=t[0]-n[0],l=t[1]-n[1];return{...e,coordinates:e.coordinates.map(e=>[e[0]+r,e[1]+l])}}(e,n,t);case"MultiLineString":return function(e,n,t){let r=t[0]-n[0],l=t[1]-n[1];return{...e,coordinates:e.coordinates.map(e=>e.map(e=>{let[n,t]=e;return[n+r,t+l]}))}}(e,n,t);case"Polygon":return M(e,n,t);case"MultiPolygon":return function(e,n,t){let r=t[0]-n[0],l=t[1]-n[1];return{...e,coordinates:e.coordinates.map(e=>e.map(e=>e.map(e=>{let[n,t]=e;return[n+r,t+l]})))}}(e,n,t);default:throw Error("Cannot shift geometry of unknown type ".concat(r))}}function q(e,n){let{time:t,freq:r}=n,[l,a,i,o]=e.coordinates;return l<=t.max&&i>=t.min&&a<=r.max&&o>=r.min}function S(e,n){return q({type:"BoundingBox",coordinates:N(e)},n)}function Z(e,n){return q({type:"BoundingBox",coordinates:N(e)},n)}function T(e,n){let{type:t}=e;switch(t){case"TimeStamp":return function(e,n){let{time:t}=n;return e.coordinates>=t.min&&e.coordinates<=t.max}(e,n);case"TimeInterval":return function(e,n){let{time:t}=n,[r,l]=e.coordinates;return l>=t.min&&r<=t.max}(e,n);case"BoundingBox":return q(e,n);case"Point":return function(e,n){let{time:t,freq:r}=n,[l,a]=e.coordinates;return l<=t.max&&l>=t.min&&a<=r.max&&a>=r.min}(e,n);case"MultiPoint":return function(e,n){let{time:t,freq:r}=n;return e.coordinates.some(e=>{let[n,l]=e;return n<=t.max&&n>=t.min&&l<=r.max&&l>=r.min})}(e,n);case"LineString":return S(e,n);case"MultiLineString":return e.coordinates.some(e=>S({type:"LineString",coordinates:e},n));case"Polygon":return Z(e,n);case"MultiPolygon":return e.coordinates.some(e=>Z({type:"Polygon",coordinates:e},n));default:throw Error("Cannot check if geometry of unknown type ".concat(t," is in window"))}}function N(e){let{type:n}=e;switch(n){case"TimeStamp":return[e.coordinates,0,e.coordinates,a.Fn];case"TimeInterval":return[e.coordinates[0],0,e.coordinates[1],a.Fn];case"BoundingBox":return e.coordinates;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return(0,r.Z)(e);default:throw Error("Cannot compute bounding box of unknown geometry type ".concat(n))}}},99258:function(e,n,t){t.d(n,{AP:function(){return m},AX:function(){return a},Fj:function(){return i},MN:function(){return d},Tn:function(){return s},o0:function(){return c},x8:function(){return h}});var r=t(82517),l=t(50108);function a(e){let{startTime:n,endTime:t,samplerate:l,parameters:a=r._z}=e,i=o({interval:{min:n,max:t},samplerate:l,window_size:a.window_size,hop_size:a.hop_size});return{time:{min:n,max:n+i},freq:{min:0,max:l/2}}}function i(e){let{startTime:n,endTime:t,samplerate:l,parameters:a=r._z}=e,i=(n+t)/2,u=o({interval:{min:n,max:t},samplerate:l,window_size:a.window_size,hop_size:a.hop_size});return{time:{min:i-u/2,max:i+u/2},freq:{min:0,max:l/2}}}function o(e){let{interval:n,samplerate:t,window_size:r=l.i9,hop_size:a=l.Zm}=e;return Math.min(n.max-n.min,524288/(Math.floor(Math.floor(r*t)/2)+1)*(r*a))}function u(e,n){let{min:t,max:r}=e,{min:l,max:a}=n,i=Math.max(t,l),o=Math.min(r,a);return i>o?null:{min:i,max:o}}function s(e,n){let t=e.time.max-e.time.min,r=e.freq.max-e.freq.min,l=(e.time.max+e.time.min)/2,a=(e.freq.max+e.freq.min)/2,i=Math.min(Math.max(l,n.time.min+t/2),n.time.max-t/2),o=Math.min(Math.max(a,n.freq.min+r/2),n.freq.max-r/2);return function(e,n){let t=u(e.time,n.time),r=u(e.freq,n.freq);return null==t||null==r?null:{time:t,freq:r}}({time:{min:i-t/2,max:i+t/2},freq:{min:o-r/2,max:o+r/2}},n)}function c(e,n){let t=!(arguments.length>2)||void 0===arguments[2]||arguments[2],{time:r,freq:l}=n;if(t){let{time:n,freq:t}={time:e.time.max-e.time.min,freq:e.freq.max-e.freq.min};r*=n,l*=t}return{time:{min:e.time.min+r,max:e.time.max+r},freq:{min:e.freq.min+l,max:e.freq.max+l}}}function m(e,n){let{time:t,freq:r}=n,l=e.time.max-e.time.min,a=e.freq.max-e.freq.min,i=null!=t?t-l/2:e.time.min;return{time:{min:i,max:null!=t?t+l/2:e.time.max},freq:{min:null!=r?r-a/2:e.freq.min,max:null!=r?r+a/2:e.freq.max}}}function d(e){let{time:n=1,freq:t=1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(e.time.max-e.time.min)*n,l=(e.freq.max-e.freq.min)*t,a=(e.time.max+e.time.min)/2,i=(e.freq.max+e.freq.min)/2;return{time:{min:a-r/2,max:a+r/2},freq:{min:i-l/2,max:i+l/2}}}function f(e,n,t){return Math.min(Math.max(Math.round(e),n),t)}function h(e){let{width:n,height:t,viewport:r,bounds:l}=e;if(null==n||null==t)return{left:0,width:0,top:0,height:0};let a=(l.freq.max-r.freq.min)/(l.freq.max-l.freq.min),i=(l.freq.max-r.freq.max)/(l.freq.max-l.freq.min),o=(r.time.min-l.time.min)/(l.time.max-l.time.min),u=(r.time.max-l.time.min)/(l.time.max-l.time.min);return{top:f(i*t,0,t),left:f(o*n,0,n),height:f((a-i)*t,0,t),width:f((u-o)*n,0,n)}}}}]);