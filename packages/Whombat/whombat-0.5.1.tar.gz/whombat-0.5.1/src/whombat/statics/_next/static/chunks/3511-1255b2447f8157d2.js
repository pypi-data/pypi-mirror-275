"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3511],{74257:function(e,t,r){r.d(t,{Z:function(){return f}});var o=r(81032),n=r(99563),l=r(80325),i=r(26735);let a={fillColor:"red",fillAlpha:1,radius:4};function u(e,t){var r,o,n,l;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a;if((null!==(r=i.fillAlpha)&&void 0!==r?r:1)!==0){let{coordinates:r}=t,[a,u]=r;e.fillStyle=null!==(o=i.fillColor)&&void 0!==o?o:"red",e.globalAlpha=null!==(n=i.fillAlpha)&&void 0!==n?n:1,e.beginPath(),e.arc(a,u,null!==(l=i.radius)&&void 0!==l?l:4,0,2*Math.PI,!0),e.fill()}}var c=r(44237);function f(e,t,r){let{type:f}=t;switch(f){case"TimeStamp":(0,i.Z)(e,t.coordinates,r);break;case"TimeInterval":let[d,s]=t.coordinates;(0,n.Z)(e,{min:d,max:s},r);break;case"BoundingBox":(0,o.Z)(e,t.coordinates,r);break;case"Point":u(e,t,r);break;case"MultiPoint":!function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,{coordinates:o}=t;o.forEach(t=>{u(e,{type:"Point",coordinates:t},r)})}(e,t,r);break;case"LineString":(0,l.s6)(e,t,r);break;case"MultiLineString":(0,l.F$)(e,t,r);break;case"Polygon":(0,c.is)(e,t,r);break;case"MultiPolygon":(0,c.$W)(e,t,r);break;default:console.error("Cannot draw unknown geometry type ".concat(f))}}},99563:function(e,t,r){r.d(t,{X:function(){return n},Z:function(){return l}});var o=r(79105);let n={fillColor:"red",fillAlpha:.5,borderWidth:1,borderAlpha:1};function l(e,t){var r,l;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n,{canvas:a}=e,{height:u}=a,{min:c,max:f}=t;(null!==(r=i.borderAlpha)&&void 0!==r?r:1)!==0&&((0,o.F6)(e,i),e.beginPath(),e.moveTo(c,0),e.lineTo(c,u),e.stroke(),e.beginPath(),e.moveTo(f,0),e.lineTo(f,u),e.stroke()),(null!==(l=i.fillAlpha)&&void 0!==l?l:.5)!==0&&((0,o.wi)(e,i),e.fillRect(c,0,f-c,u))}},80325:function(e,t,r){r.d(t,{F$:function(){return i},nK:function(){return n},s6:function(){return l}});var o=r(79105);let n={borderColor:"red",borderWidth:2,borderAlpha:1};function l(e,t){var r;let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n;if((null!==(r=l.borderAlpha)&&void 0!==r?r:1)!==0){let{coordinates:r}=t;if(r.length<2)return;(0,o.F6)(e,l),e.beginPath();let[n,i]=r[0];e.moveTo(n,i),r.slice(1).forEach(t=>{let[r,o]=t;e.lineTo(r,o)}),e.stroke()}}function i(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n,{coordinates:o}=t;o.forEach(t=>{l(e,{type:"LineString",coordinates:t},r)})}},44237:function(e,t,r){r.d(t,{$W:function(){return i},is:function(){return l}});let o={borderColor:"red",borderWidth:1,borderAlpha:1,fillAlpha:.5,fillColor:"red"};function n(e,t){if(t.length<2){console.error("Invalid linering. Needs at least two points");return}let[r,o]=t[0];e.moveTo(r,o),t.slice(1).forEach(t=>{let[r,o]=t;return e.lineTo(r,o)}),e.lineTo(r,o)}function l(e,t){var r,l,i,a,u,c;let f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o,{coordinates:d}=t;if(0===d.length){console.error("Polygon has no exterior ring");return}let s=d[0];if(s.length<2){console.error("Invalid exterior ring for polygon");return}let[h,p]=s[0];e.beginPath(),n(e,s),d.slice(1).forEach(t=>{if(t.length<2){console.error("Invalid interior ring for polygon");return}n(e,t),e.moveTo(h,p)}),e.closePath(),e.fillStyle=null!==(l=null!==(r=f.fillColor)&&void 0!==r?r:f.borderColor)&&void 0!==l?l:"red",e.globalAlpha=null!==(i=f.fillAlpha)&&void 0!==i?i:1,e.fill("evenodd"),e.strokeStyle=null!==(a=f.borderColor)&&void 0!==a?a:"red",e.lineWidth=null!==(u=f.borderWidth)&&void 0!==u?u:1,e.globalAlpha=null!==(c=f.borderAlpha)&&void 0!==c?c:1,f.borderDash&&e.setLineDash(f.borderDash),e.stroke()}function i(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o,{coordinates:n}=t;n.forEach(t=>{l(e,{type:"Polygon",coordinates:t},r)})}},26731:function(e,t,r){r.d(t,{ZP:function(){return a}});var o=r(25524),n=r(40932),l=r(93191),i=r(2265);function a(e){let{uuid:t,initial:r,name:a,enabled:u=!0,getFn:c,onError:f}=e,d=(0,l.NL)(),s=(0,i.useCallback)(async()=>{if(null==t)throw Error("No uuid provided for object of type ".concat(a));return await c(t)},[t,a,c]),h=(0,n.a)({queryKey:[a,t],queryFn:s,retry:(e,t)=>{var r;if(null==t)return e<3;let o=null==t?void 0:null===(r=t.response)||void 0===r?void 0:r.status;return null==o?e<3:(!(o>=400)||!(o<500))&&e<3},initialData:r,staleTime:3e5,enabled:u&&null!=t}),p=(0,i.useCallback)(e=>{d.setQueryData([a,t],e)},[d,t,a]),{error:y,isError:b}=h;return(0,i.useEffect)(()=>{b&&(null==f||f(y))},[y,b,f]),{query:h,client:d,setData:p,useQuery:e=>{let{queryFn:r,name:o,enabled:l=!1}=e;return function(e){let{uuid:t,query:r,queryFn:o,name:l,secondaryName:a,enabled:u=!1}=e,{status:c,data:f}=r,d=(0,i.useCallback)(async()=>{if("pending"===c)throw Error("No data for object of type ".concat(l," (uuid=").concat(t,"). ")+"Either the query is not enabled or the query is still loading.");if("error"===c)throw Error("Error while loading object of type ".concat(l," (uuid=").concat(t,"), cannot mutate"));return await o(f)},[c,f,o,l,t]);return(0,n.a)({queryFn:d,queryKey:[l,t,a],enabled:"pending"!==c&&"error"!==c&&u})}({uuid:t,query:h,queryFn:r,secondaryName:o,name:a,enabled:l})},useMutation:e=>{let{mutationFn:r,onSuccess:n,onError:l,withUpdate:u=!0}=e;return function(e){let{uuid:t,query:r,client:n,mutationFn:l,name:a,onSuccess:u,onError:c,withUpdate:f=!0}=e,{status:d,data:s}=r,h=(0,i.useCallback)(async e=>{if(null==t)throw Error("No uuid provided for object of type ".concat(a));if("pending"===d)throw Error("No data for object of type ".concat(a," (uuid=").concat(t,"). ")+"Either the query is not enabled or the query is still loading.");if("error"===d)throw Error("Error while loading object of type ".concat(a," (uuid=").concat(t,"), cannot mutate"));return await l(s,e)},[d,s,l,a,t]);return(0,o.D)({mutationFn:h,onSuccess:e=>{f&&n.setQueryData([a,t],e),null==u||u(e)},onError:c})}({uuid:t,query:h,client:d,mutationFn:r,name:a,onSuccess:n,onError:l,withUpdate:u})},useDestruction:e=>{let{mutationFn:r,onSuccess:n,onError:l}=e;return function(e){let{uuid:t,query:r,client:n,mutationFn:l,name:a,onSuccess:u,onError:c}=e,{status:f,data:d}=r,s=(0,i.useCallback)(async()=>{if(null==t)throw Error("No uuid provided for object of type ".concat(a));if("pending"===f)throw Error("No data for object of type ".concat(a," (uuid=").concat(t,"). ")+"Either the query is not enabled or the query is still loading.");if("error"===f)throw Error("Error while loading object of type ".concat(a," (uuid=").concat(t,"), cannot mutate"));return await l(d)},[f,d,l,a,t]);return(0,o.D)({mutationFn:s,onSuccess:e=>{n.removeQueries({queryKey:[a,t]}),null==u||u(e)},onError:c})}({uuid:t,query:h,client:d,mutationFn:r,name:a,onSuccess:n,onError:l})}}}},56943:function(e,t,r){r.d(t,{D:function(){return n}});var o=r(7832);function n(e,t,r){let{geometry:n}=e.sound_event;if("TimeStamp"===n.type)return function(e){let{annotation:t,window:r,dimensions:n}=e,l=t.sound_event.geometry,{time:{min:i,max:a}}=r,u=l.coordinates;if(u<i||u>a)throw Error("Annotation is not in the window");let c=(0,o.f5)(u,r,n.width),f=50+Math.random()*(n.height-100);return c<50?{x:c+5,y:f,offset:5,placement:"right"}:{x:c-5,y:f,offset:5,placement:"left"}}({annotation:e,window:t,dimensions:r});if("TimeInterval"===n.type)return function(e){let{annotation:t,window:r,dimensions:n}=e,l=t.sound_event.geometry,{time:{min:i,max:a}}=r,[u,c]=l.coordinates;if(c<i||u>a)throw Error("Annotation is not in the window");let f=(0,o.f5)(u,r,n.width),d=(0,o.f5)(c,r,n.width),s=50+Number("0x".concat(t.uuid.slice(-8)))/4294967295*(n.height-100),h=f<50,p=d>n.width-50;return h&&p?{x:f,y:s,offset:5,placement:"right"}:h?{x:d,y:s,offset:5,placement:"left"}:p?{x:f,y:s,offset:5,placement:"left"}:{x:d,y:s,offset:5,placement:"left"}}({annotation:e,window:t,dimensions:r});let l=[t.time.min,t.freq.min,t.time.max,t.freq.max],i=(0,o.fM)(n),a=(0,o.c0)(i,l);if(null===a)throw Error("Annotation is not in the window");let[u,c,f,d]=(0,o.$y)(r,a,t),s=u<50,h=d>r.height-50,p=f>r.width-50,y=c<50;switch(!0){case s&&y:return{x:f,y:d,offset:5,placement:"right"};case s&&h:return{x:f,y:c,offset:5,placement:"right"};case p&&y:return{x:u,y:d,offset:5,placement:"left"};case p&&h:return{x:u,y:c,offset:5,placement:"left"};case s:return{x:f,y:c,offset:5,placement:"right"};case p:return{x:u,y:c,offset:5,placement:"left"};case y:return{x:u,y:d,offset:5,placement:"bottom"};default:return{x:f,y:c,offset:5,placement:"right"}}}}}]);