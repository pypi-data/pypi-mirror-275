"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5984],{43250:function(e,t,r){r.d(t,{C:function(){return u}});var n=r(52322),s=r(92506),i=r(14934),o=r(38491),l=r(2811),a=r(2784),c=r(44231),d=r(46146);let u=()=>{let{allRepos:e,visibleRepos:t,toggleVisible:r}=(0,a.useContext)(d.C5),[u,h]=(0,a.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.Vq,{canOutsideClickClose:!0,canEscapeKeyClose:!0,isOpen:u,style:{width:"auto"},onClose:()=>h(!1),children:[(0,n.jsx)(s.fK,{icon:"repo",label:"Filter code locations"}),(0,n.jsx)(c.e,{options:e,onBrowse:()=>h(!1),onToggle:r,selected:t}),(0,n.jsx)(s.cN,{children:(0,n.jsx)(i.x,{padding:{top:8},children:(0,n.jsx)(o.zx,{intent:"none",onClick:()=>h(!1),children:"Done"})})})]}),(0,n.jsx)(o.zx,{outlined:!0,icon:(0,n.jsx)(l.JO,{name:"folder"}),rightIcon:(0,n.jsx)(l.JO,{name:"expand_more"}),onClick:()=>h(!0),children:"".concat(t.length," of ").concat(e.length)})]})}},63065:function(e,t,r){r.d(t,{e:function(){return z}});var n=r(73235),s=r(52322),i=r(40794),o=r(89130),l=r(14934),a=r(79106),c=r(39013),d=r(37483),u=r(74159),h=r(45774),x=r(2784),p=r(78491),m=r(16336),g=r(44900),j=r(4378),f=r(43250),v=r(35002),y=r(43212),w=r(88510),b=r(22921),C=r(17008),k=r(98956),T=r(50646),O=r(63485),N=r(83738),E=r(22563);let L=e=>{let{repos:t}=e,r=(0,x.useRef)(null),n=(0,x.useMemo)(()=>t.map(e=>{let{repoAddress:t}=e;return(0,E.Uz)(t)}),[t]),{expandedKeys:i,onToggle:o,onToggleAll:l}=(0,T.N)(b.y,n),a=(0,x.useMemo)(()=>{let e=[];return t.forEach(t=>{let{repoAddress:r,jobs:n}=t;e.push({type:"header",repoAddress:r,jobCount:n.length});let s=(0,E.Uz)(r);i.includes(s)&&n.forEach(t=>{let{isJob:n,name:s}=t;e.push({type:"job",repoAddress:r,isJob:n,name:s})})}),e},[t,i]),c=(0,k.w)(t.map(e=>{let{repoAddress:t}=e;return t.name})),d=(0,w.MG)({count:a.length,getScrollElement:()=>r.current,estimateSize:e=>{let t=a[e];return(null==t?void 0:t.type)==="header"?C.lo:64},overscan:10}),u=d.getTotalSize(),h=d.getVirtualItems();return(0,s.jsx)("div",{style:{overflow:"hidden"},children:(0,s.jsxs)(C.W2,{ref:r,children:[(0,s.jsx)(O.I,{}),(0,s.jsx)(C.Nh,{$totalHeight:u,children:h.map(e=>{let{index:t,key:r,size:n,start:d}=e,u=a[t];return"header"===u.type?(0,s.jsx)(N.vG,{repoAddress:u.repoAddress,height:n,start:d,onToggle:o,onToggleAll:l,expanded:i.includes((0,E.Uz)(u.repoAddress)),showLocation:c.has(u.repoAddress.name),rightElement:(0,s.jsx)(v.u,{content:1===u.jobCount?"1 job":"".concat(u.jobCount," jobs"),placement:"top",children:(0,s.jsx)(y.V,{children:u.jobCount})})},r):(0,s.jsx)(O.b,{name:u.name,isJob:u.isJob,repoAddress:u.repoAddress,height:n,start:d},r)})})]})})};var S=r(907),I=r(49455),A=r(34219),R=r(73658),_=r(46146),M=r(65822);function P(){let e=(0,n._)(["\n  query OverviewJobsQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return P=function(){return e},e}let z=()=>{let{allRepos:e,visibleRepos:t,loading:r}=(0,x.useContext)(_.C5),[n,o]=(0,j.q)({queryKey:"search",defaults:{search:""}}),p=e.length,g=(0,i.a)($,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0});(0,A.Hu)(g,"OverviewJobsQuery");let{data:v,loading:y}=g,w=(0,m.C4)(g,m.dT),b=(0,x.useMemo)(()=>{let e=(0,I.S)(t);return F(v).filter(t=>{let{repoAddress:r}=t;return e.has((0,E.Uz)(r))})},[v,t]),C=n.trim().toLocaleLowerCase(),k=C.length>0,T=(0,x.useMemo)(()=>{let e=C.toLocaleLowerCase();return b.map(t=>{let{repoAddress:r,jobs:n}=t;return{repoAddress:r,jobs:n.filter(t=>{let{name:r}=t;return r.toLocaleLowerCase().includes(e)})}}).filter(e=>{let{jobs:t}=e;return t.length>0})},[b,C]),O=r&&!p||y&&!v;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",justifyContent:"space-between",grow:0},children:[(0,s.jsxs)(l.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[p>1?(0,s.jsx)(f.C,{}):null,(0,s.jsx)(u.oi,{icon:"search",value:n,rightElement:O?(0,s.jsx)(R.W,{tooltipContent:"Loading jobs…"}):void 0,onChange:e=>o(e.target.value),placeholder:"Filter by job name…",style:{width:"340px"}})]}),(0,s.jsx)(m.xi,{refreshState:w})]}),y&&!p?(0,s.jsx)(l.x,{padding:64,children:(0,s.jsx)(h.f,{label:"Loading jobs…"})}):(()=>{if(y&&!v)return(0,s.jsx)(l.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,s.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,s.jsx)(a.$,{purpose:"body-text"}),(0,s.jsx)("div",{style:{color:c.$()},children:"Loading jobs…"})]})});let r=e.length>t.length;return T.length?(0,s.jsx)(L,{repos:T}):k?(0,s.jsx)(l.x,{padding:{top:20},children:(0,s.jsx)(d.t,{icon:"search",title:"No matching jobs",description:r?(0,s.jsxs)("div",{children:["No jobs matching ",(0,s.jsx)("strong",{children:n})," were found in the selected code locations"]}):(0,s.jsxs)("div",{children:["No jobs matching ",(0,s.jsx)("strong",{children:n})," were found in your definitions"]})})}):(0,s.jsx)(l.x,{padding:{top:20},children:(0,s.jsx)(d.t,{icon:"search",title:"No jobs",description:r?"No jobs were found in the selected code locations":"No jobs were found in your definitions"})})})()]})},F=e=>{if((null==e?void 0:e.workspaceOrError.__typename)!=="Workspace")return[];let t=e.workspaceOrError.locationEntries.map(e=>e.locationOrLoadError),r=[];for(let e of t)if((null==e?void 0:e.__typename)==="RepositoryLocation")for(let t of e.repositories){let{name:n,pipelines:s}=t,i=(0,M.kQ)(n,e.name),o=s.filter(e=>{let{name:t}=e;return!(0,g.pv)(t)}).map(e=>({isJob:e.isJob,name:e.name}));o.length>0&&r.push({repoAddress:i,jobs:o})}return(0,S.S)(r)},$=(0,o.Ps)(P(),p.B)},25984:function(e,t,r){r.r(t),r.d(t,{OverviewRoot:function(){return tc},default:function(){return td}});var n=r(52322),s=r(7267),i=r(38491),o=r(14934),l=r(2784),a=r(79106),c=r(74159),d=r(16629),u=r(60129),h=r(2811),x=r(43212),p=r(39013),m=r(46100),g=r(60603),j=r(35292),f=r(88510),v=r(47933),y=r(35505),w=r(23399),b=r(16336),C=r(69737),k=r(99048),T=r(98705),O=r(44900),N=r(46318),E=r(79342),L=r(32319),S=r(75442),I=r(20171),A=r(4378),R=r(79059),_=r(92322),M=r(17008),P=r(65822),z=r(10539);let F=e=>{let{Header:t,TabButton:r}=e;(0,C.Px)(),(0,I.j)("Overview | Assets");let{assets:s,query:i,error:u,loading:h}=(0,L.Zg)(),x=(0,b.bT)({refresh:i,intervalMs:b.dT,leading:!0}),p=l.useMemo(()=>s?function(e){let t={};return e.forEach(e=>{if(!e.definition)return;let r=e.definition.groupName,n=e.definition.repository.name,s="".concat(r,"||").concat(n),i=t[s]||{groupName:r,repositoryName:n,assets:[]};i.assets.push(e),t[s]=i}),Object.values(t)}(s):[],[s]),[m,g]=(0,A.q)({queryKey:"q",decode:e=>e.searchQuery?JSON.parse(e.searchQuery):"",encode:e=>({searchQuery:e?JSON.stringify(e):void 0})}),j=l.useMemo(()=>""===m?p:p.filter(e=>(e.groupName||U).toLowerCase().includes(m.toLowerCase())||e.repositoryName.toLowerCase().includes(m.toLowerCase())),[p,m]),y=l.useMemo(()=>{var e;return null!==(e=j.flatMap(e=>e.assets.map(e=>e.key)))&&void 0!==e?e:[]},[j]),{liveDataByNode:T}=(0,k.NY)(y,"OverviewAssetsRoot"),O=(0,_.se)("OverviewAssetsRoot"),N=Object.keys(T).length===y.length;l.useEffect(()=>{N&&O.endTrace()},[N,O]);let E=l.useRef(null),S=(0,f.MG)({count:j.length,getScrollElement:()=>E.current,estimateSize:()=>82,overscan:5}),R=S.getTotalSize(),P=S.getVirtualItems();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{style:{position:"sticky",top:0,zIndex:1},children:[(0,n.jsx)(t,{refreshState:x}),(0,n.jsxs)(o.x,{padding:{horizontal:24,vertical:16},flex:{alignItems:"center",gap:12,grow:0},children:[(0,n.jsx)(r,{selected:"assets"}),(0,n.jsx)(c.oi,{value:m,onChange:e=>{g(e.target.value)},placeholder:"Filter asset groups…"})]}),(0,n.jsx)(o.x,{padding:{horizontal:24,vertical:16},border:"top",children:(0,n.jsx)(d.b,{intent:"info",title:"This Assets tab will be removed in an upcoming release.",description:(0,n.jsxs)(n.Fragment,{children:["Use the ",(0,n.jsx)(v.rU,{to:"/asset-groups",children:"global asset lineage page"})," to view grouped asset status details."]})})})]}),h?(0,n.jsx)(o.x,{flex:{alignItems:"center",justifyContent:"center",direction:"column",grow:1},style:{width:"100%"},children:(0,n.jsx)(a.$,{purpose:"page"})}):u?(0,n.jsx)(o.x,{flex:{alignItems:"center",justifyContent:"center",direction:"column",grow:1},style:{width:"100%"},children:(0,n.jsx)(w.T9,{error:u})}):(0,n.jsx)(o.x,{flex:{direction:"column"},style:{overflow:"hidden"},children:(0,n.jsxs)(M.W2,{ref:E,children:[(0,n.jsx)(q,{}),(0,n.jsx)(M.Nh,{$totalHeight:R,children:P.map(e=>{let{index:t,key:r,size:s,start:i}=e,o=j[t];return(0,n.jsx)(Q,{start:i,height:s,group:o},r)})})]})})]})},$="5fr 1fr 1fr 1fr 1fr",q=()=>(0,n.jsxs)(M.VJ,{templateColumns:$,sticky:!0,children:[(0,n.jsx)(M.qN,{children:"Group name"}),(0,n.jsx)(M.qN,{children:"Missing"}),(0,n.jsx)(M.qN,{children:"Failed/Overdue"}),(0,n.jsx)(M.qN,{children:"In progress"}),(0,n.jsx)(M.qN,{children:"Materialized"})]}),U="Ungrouped Assets";function Q(e){var t,r;let{height:s,start:i,group:c}=e,d=l.useMemo(()=>c.assets.map(e=>({path:e.key.path})),[c.assets]),{liveDataByNode:m}=(0,k.NY)(d),g=(0,_.se)("OverviewAssetsRoot:GroupBatch"),j=l.useMemo(()=>(0,N.s)(c.assets,m),[m,c.assets]),f=null===(r=c.assets.find(e=>{var t;return null===(t=e.definition)||void 0===t?void 0:t.repository}))||void 0===r?void 0:null===(t=r.definition)||void 0===t?void 0:t.repository,y=(0,P.kQ)((null==f?void 0:f.name)||"",(null==f?void 0:f.location.name)||""),{containerProps:w,viewport:b}=(0,u.S)(),C=d.length!==Object.keys(m).length,O=C?"":"0";return l.useEffect(()=>{C||g.endTrace()},[g,C]),(0,n.jsx)(M.X2,{$height:s,$start:i,children:(0,n.jsxs)(J,{border:"bottom",children:[(0,n.jsx)(D,{children:(0,n.jsxs)(o.x,{flex:{direction:"row",justifyContent:"space-between",grow:1},children:[(0,n.jsxs)(o.x,{flex:{direction:"column",gap:2,grow:1},children:[(0,n.jsxs)(o.x,{flex:{direction:"row",gap:8},children:[(0,n.jsx)(h.JO,{name:"asset_group"}),c.groupName?(0,n.jsx)(v.rU,{style:{fontWeight:700},to:(0,z.$U)(y,"/asset-groups/".concat(c.groupName)),children:c.groupName}):U]}),(0,n.jsx)("div",{...w,children:(0,n.jsx)(V,{maxWidth:b.width,children:(0,n.jsx)(R.b,{repoAddress:y,showRefresh:!1})})})]}),(0,n.jsx)(o.x,{flex:{direction:"column",justifyContent:"center"},children:C?(0,n.jsx)(a.$,{purpose:"body-text"}):null})]})}),(0,n.jsx)(D,{children:j.missing.length?(0,n.jsx)(B,{assets:j.missing,getCount:e=>{let{status:t}=e;return t.case===T.KB.PARTITIONS_MISSING&&t.numMissing||0},adjective:"missing",children:(0,n.jsx)(x.V,{intent:"none",children:(0,n.jsxs)(o.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,n.jsx)("div",{style:{width:"12px",height:"12px",border:"2px solid ".concat(p.im()),borderRadius:"50%"}}),j.missing.length]})})}):O}),(0,n.jsx)(D,{children:j.failed.length?(0,n.jsx)(B,{assets:j.failed,getCount:e=>{let{status:t}=e;return t.case===T.KB.PARTITIONS_FAILED&&t.numFailed||0},adjective:"failed",children:(0,n.jsx)(x.V,{intent:"danger",children:(0,n.jsxs)(o.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,n.jsx)("div",{style:{width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderBottom:"10px solid red",display:"inline-block"}}),j.failed.length]})})}):O}),(0,n.jsx)(D,{children:j.inprogress.length?(0,n.jsx)(B,{assets:j.inprogress,getCount:e=>{let{status:t}=e;return t.case===T.KB.MATERIALIZING&&t.numMaterializing||0},adjective:"materializing",children:(0,n.jsx)(x.V,{intent:"primary",icon:"spinner",children:j.inprogress.length})}):O}),(0,n.jsx)(D,{children:j.successful.length?(0,n.jsx)(B,{assets:j.successful,getCount:e=>{let{status:t}=e;return t.case===T.KB.PARTITIONS_MATERIALIZED&&t.numMaterialized||0},adjective:"materialized",children:(0,n.jsx)(x.V,{intent:"success",children:(0,n.jsxs)(o.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,n.jsx)("div",{style:{backgroundColor:p.fA(),width:"10px",height:"10px",borderRadius:"50%"}}),j.successful.length]})})}):O})]})})}let J=(0,y.ZP)(o.x).withConfig({componentId:"sc-5a3ca5ca-0"})(["display:grid;grid-template-columns:",";height:100%;> *{vertical-align:middle;}"],$),D=e=>{let{children:t}=e;return(0,n.jsx)(M.E5,{style:{color:p.Ep()},children:(0,n.jsx)(o.x,{flex:{direction:"row",alignItems:"center",grow:1},children:t})})},V=y.ZP.div.withConfig({componentId:"sc-5a3ca5ca-1"})(["font-size:12px;pointer-events:none;a{color:",";pointer-events:none;max-width:",";}"],p.$(),e=>{let{maxWidth:t}=e;return t?"unset":"".concat(t,"px")});function B(e){let{assets:t,children:r,getCount:s,adjective:i}=e;return(0,n.jsx)(W,{children:(0,n.jsx)(m.P,{items:t,itemPredicate:(e,t)=>(0,O.ll)(t.asset.key).toLocaleLowerCase().includes(e.toLocaleLowerCase()),itemRenderer:e=>{let t=s(e);return(0,n.jsx)(G,{to:(0,S.p)(e.asset.key),target:"_blank",children:(0,n.jsx)(g.sN,{text:(0,n.jsxs)(o.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,n.jsx)("div",{style:{paddingLeft:"4px"},children:(0,n.jsx)(h.JO,{name:"asset"})}),(0,n.jsx)("div",{style:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:(0,O.ll)(e.asset.key)}),t&&t>0?(0,n.jsxs)(j.YS,{style:{color:p.$()},children:[(0,E._e)(t)," ",i]}):null]})},(0,O.ll)(e.asset.key))})},onItemSelect:()=>{},children:r})})}let W=y.ZP.div.withConfig({componentId:"sc-5a3ca5ca-2"})(["cursor:pointer;&:hover{font-weight:600;}"]),G=(0,y.ZP)(v.rU).withConfig({componentId:"sc-5a3ca5ca-3"})(["&:hover{text-decoration:none;}"]);var H=r(74580);let K=(0,r(65297).f)("OverviewPageAlerts");var Z=r(73407),X=r(49438),Y=r(87171),ee=r(39268),et=r(71348),er=r(89918);let en=e=>{let{refreshState:t,tab:r}=e,{flagSettingsPage:s}=(0,X.gV)(),i=(0,et.dx)(),c=(0,ee.I)(),{enableAssetHealthOverviewPreview:d}=(0,l.useContext)(Y.G);return(0,n.jsxs)(o.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,n.jsxs)(Z.mQ,{selectedTabId:r,children:[(0,n.jsx)(er.f,{id:"activity",title:"Timeline",to:"/overview/activity"}),d&&(0,n.jsx)(er.f,{id:"asset-health",title:"Asset health",to:"/overview/asset-health"}),s?null:(0,n.jsx)(er.f,{id:"jobs",title:"Jobs",to:"/overview/jobs"}),s?null:(0,n.jsx)(er.f,{id:"schedules",title:"Schedules",to:"/overview/schedules"}),s?null:(0,n.jsx)(er.f,{id:"sensors",title:"Sensors",to:"/overview/sensors"}),s||"has-global-amp"!==c?null:(0,n.jsx)(er.f,{id:"amp",title:(0,n.jsxs)(o.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,n.jsx)("div",{children:"Auto-materialize"}),i.loading?(0,n.jsx)(a.$,{purpose:"body-text"}):(0,n.jsx)("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:!1===i.paused?p.L$():p.md()}})]}),to:"/overview/automation"}),(0,n.jsx)(er.f,{id:"resources",title:"Resources",to:"/overview/resources"}),s?null:(0,n.jsx)(er.f,{id:"backfills",title:"Backfills",to:"/overview/backfills"})]}),t?(0,n.jsx)(o.x,{padding:{bottom:8},children:(0,n.jsx)(b.xi,{refreshState:t})}):null]})},es=e=>{let{tab:t,queryData:r,refreshState:s,...i}=e;return(0,n.jsx)(H.m,{title:(0,n.jsx)(j.X6,{children:"Overview"}),tabs:(0,n.jsxs)(o.x,{flex:{direction:"column",gap:8},children:[(0,n.jsx)(en,{tab:t,queryData:r,refreshState:s}),(0,n.jsx)(K,{})]}),...i})};var ei=r(51484),eo=r(43111),el=r(43250),ea=r(34080),ec=r(30001);let ed=e=>{let t=(0,l.useCallback)(t=>{switch(t){case"1":case"6":case"12":case"24":return t;default:return e}},[e]),[r,n]=(0,ec.U)("dagster.run-timeline-hour-window",t),s=(0,l.useCallback)(t=>{n(t||e)},[e,n]);return(0,l.useMemo)(()=>[r,s],[r,s])};var eu=r(73235),eh=r(56675),ex=r(3842),ep=r(89130),em=r(59351),eg=r(33182),ej=r(77539);async function ef(e){let{buckets:t,fetchData:r,setQueryData:n}=e;n(e=>{let{data:t}=e;return{data:t,loading:!0,called:!0,error:void 0}});try{let e=await Promise.all(t.map(e=>ev({fetchData:t=>r(e,t)})));n({data:e.flat(),loading:!1,called:!0,error:void 0})}catch(e){n(t=>{let{data:r}=t;return{data:r,loading:!1,called:!0,error:e}})}}async function ev(e){let t,{fetchData:r}=e,n=!0,s=[];for(;n;){let{cursor:e,hasMore:i,data:o,error:l}=await r(t);if(l)throw l;s.push(...o),t=e,n=i}return s}var ey=r(88257);function ew(){let e=(0,eu._)(["\n  fragment ScheduleFutureTicksFragment on Schedule {\n    id\n    executionTimezone\n    scheduleState {\n      id\n      status\n    }\n    futureTicks(cursor: $tickCursor, until: $ticksUntil) {\n      results {\n        timestamp\n      }\n    }\n  }\n"]);return ew=function(){return e},e}let eb=(0,ep.Ps)(ew());var eC=r(34219),ek=r(22563);function eT(){let e=(0,eu._)(["\n  fragment RunTimelineFragment on Run {\n    id\n    pipelineName\n    repositoryOrigin {\n      id\n      repositoryName\n      repositoryLocationName\n    }\n    ...RunTimeFragment\n  }\n  ","\n"]);return eT=function(){return e},e}function eO(){let e=(0,eu._)(["\n  query OngoingRunTimelineQuery($inProgressFilter: RunsFilter!, $limit: Int!, $cursor: String) {\n    ongoing: runsOrError(filter: $inProgressFilter, limit: $limit, cursor: $cursor) {\n      ... on Runs {\n        results {\n          id\n          ...RunTimelineFragment\n        }\n      }\n    }\n  }\n\n  ","\n"]);return eO=function(){return e},e}function eN(){let e=(0,eu._)(["\n  query CompletedRunTimelineQuery($completedFilter: RunsFilter!, $limit: Int!, $cursor: String) {\n    completed: runsOrError(filter: $completedFilter, limit: $limit, cursor: $cursor) {\n      ... on Runs {\n        results {\n          id\n          ...RunTimelineFragment\n        }\n      }\n    }\n  }\n\n  ","\n"]);return eN=function(){return e},e}function eE(){let e=(0,eu._)(["\n  query FutureTicksQuery($tickCursor: Float, $ticksUntil: Float) {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          name\n          loadStatus\n          displayMetadata {\n            key\n            value\n          }\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n                schedules {\n                  id\n                  name\n                  pipelineName\n                  scheduleState {\n                    id\n                    status\n                  }\n                  ...ScheduleFutureTicksFragment\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return eE=function(){return e},e}let eL=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2*b.dT,n=(0,l.useMemo)(()=>null!=t?t:{},[t]),[s,i]=e,o=s/1e3,a=i/1e3,c=(0,l.useMemo)(()=>{let e=[];for(let t=s;t<i;t+=36e5)e.push([t,Math.min(i,t+36e5)]);return e},[s,i]),d=(0,eh.x)(),[u,h]=(0,l.useState)({data:void 0,loading:!0,error:void 0,called:!1}),[x,p]=(0,l.useState)({data:void 0,loading:!0,error:void 0,called:!1}),{data:m,loading:g}=x,{data:j,loading:f}=u,v=(0,l.useCallback)(async()=>await ef({buckets:c,setQueryData:h,async fetchData(e,t){let{data:r}=await d.query({query:eR,notifyOnNetworkStatusChange:!0,fetchPolicy:"no-cache",variables:{completedFilter:{...n,statuses:Array.from(em.cv),createdBefore:e[1]/1e3,updatedAfter:e[0]/1e3},cursor:t,limit:500}});if("Runs"!==r.completed.__typename)return{data:[],cursor:void 0,hasMore:!1,error:r.completed};let s=r.completed.results,i=500===s.length,o=i?s[s.length-1].id:void 0;return{data:s,cursor:o,hasMore:i,error:void 0}}}),[c,d,n]),y=(0,l.useCallback)(async()=>{p(e=>{let{data:t}=e;return{data:t,loading:!0,called:!0,error:void 0}});try{let e=await ev({async fetchData(e){let{data:t}=await d.query({query:eA,notifyOnNetworkStatusChange:!0,fetchPolicy:"no-cache",variables:{inProgressFilter:{...n,statuses:[ey.VOA.CANCELING,ey.VOA.STARTED]},cursor:e,limit:500}});if("Runs"!==t.ongoing.__typename)return{data:[],cursor:void 0,hasMore:!1,error:t.ongoing};let r=t.ongoing.results,s=500===r.length,i=s?r[r.length-1].id:void 0;return{data:r,cursor:i,hasMore:s,error:void 0}}});p({data:e,loading:!1,called:!0,error:void 0})}catch(e){p(t=>{let{data:r}=t;return{data:r,loading:!1,called:!0,error:e}})}},[d,n]),[w,C]=(0,ex.t)(e_,{notifyOnNetworkStatusChange:!0,fetchPolicy:"no-cache",variables:{tickCursor:o,ticksUntil:a}});(0,eC.Hu)(x,"OngoingRunTimelineQuery"),(0,eC.Hu)(u,"CompletedRunTimelineQuery"),(0,eC.Hu)(C,"FutureTicksQuery");let{data:k,previousData:T,loading:N}=C,E=g&&!m||f&&!u||N&&!k,{workspaceOrError:L}=k||T||{workspaceOrError:void 0},S=(0,l.useMemo)(()=>{let e={},t=Date.now();return[...null!=m?m:[],...null!=j?j:[]].forEach(r=>{if(!r.startTime||!r.repositoryOrigin||!(0,ej.a)({start:s,end:i},{start:1e3*r.startTime,end:r.endTime?1e3*r.endTime:t}))return;let n=eS({name:r.repositoryOrigin.repositoryName,location:r.repositoryOrigin.repositoryLocationName},r.pipelineName);e[n]=[...e[n]||[],{id:r.id,status:r.status,startTime:1e3*r.startTime,endTime:r.endTime?1e3*r.endTime:t}]}),e},[m,j,s,i]),I=(0,l.useMemo)(()=>{if(!L||"Workspace"!==L.__typename)return[];let e=[];for(let r of L.locationEntries){var t;if("WorkspaceLocationEntry"!==r.__typename||(null===(t=r.locationOrLoadError)||void 0===t?void 0:t.__typename)!=="RepositoryLocation")continue;let n=Date.now();for(let t of r.locationOrLoadError.repositories){let o=(0,P.kQ)(t.name,r.locationOrLoadError.name);for(let r of t.pipelines){let l=(t.schedules||[]).filter(e=>e.pipelineName===r.name),a=[];for(let e of l)e.scheduleState.status===ey.ynu.RUNNING&&e.futureTicks.results.forEach(t=>{let{timestamp:r}=t,o=1e3*r;o>n&&(0,ej.a)({start:s,end:i},{start:o,end:o})&&a.push({id:"".concat(e.pipelineName,"-future-run-").concat(r),status:"SCHEDULED",startTime:o,endTime:o+5e3})});let c=(0,O.pv)(r.name),d=eS(o,r.name),u=c?"Ad hoc materializations":r.name,h=S[d]||[];if(!a.length&&!h.length)continue;let x=[...h,...a];if(c){let t=e.find(e=>"asset"===e.jobType&&e.repoAddress===o);if(t){t.runs.push(...x);continue}}e.push({key:d,jobName:u,jobType:c?"asset":"job",repoAddress:o,path:(0,z.jT)({repoName:o.name,repoLocation:o.location,pipelineName:r.name,isJob:r.isJob}),runs:[...h.filter((e,t,r)=>r.findIndex(t=>t.id===e.id)===t),...a]})}}}let r=e.reduce((e,t)=>{let r=t.runs.map(e=>e.startTime);return{...e,[t.key]:Math.min(...r)}},{});return e.sort((e,t)=>r[e.key]-r[t.key])},[L,S,s,i]),A=(0,b.bT)({refresh:(0,l.useCallback)(async()=>{await Promise.all([w(),v(),y()])},[v,w,y]),intervalMs:r,leading:!0});return(0,l.useMemo)(()=>({jobs:I,initialLoading:E,refreshState:A}),[E,I,A])},eS=(e,t)=>"".concat(t,"-").concat((0,ek.Uz)(e)),eI=(0,ep.Ps)(eT(),eg.$X),eA=(0,ep.Ps)(eO(),eI),eR=(0,ep.Ps)(eN(),eI),e_=(0,ep.Ps)(eE(),eb);var eM=r(46146);let eP=e=>{switch(e){case"1":return 36e5;case"6":return 216e5;case"12":return 432e5;case"24":return 864e5}},ez=e=>{let{Header:t,TabButton:r}=e;(0,C.Px)(),(0,I.j)("Overview | Timeline");let s=(0,_.se)("OverviewTimelineRoot"),{allRepos:a,visibleRepos:d}=l.useContext(eM.C5),[u,h]=ed("12"),[x,p]=l.useState(()=>Date.now()),[m,g]=l.useState(()=>0),[j,f]=(0,A.q)({queryKey:"search",defaults:{search:""}});l.useEffect(()=>{let e=setInterval(()=>{p(Date.now())},6e4);return()=>{clearInterval(e)}},[u]);let v=l.useCallback(()=>{g(e=>e-eP(u))},[u]),y=l.useCallback(()=>{g(e=>e+eP(u))},[u]),w=l.useCallback(()=>{g(0)},[]),b=l.useMemo(()=>[x-36e5*Number(u)+m,x+36e5+m],[u,x,m]),{jobs:k,initialLoading:T,refreshState:O}=eL(b);l.useEffect(()=>{T||s.endTrace()},[T,s]);let N=l.useMemo(()=>{let e=j.toLocaleLowerCase().trim();return new Set(d.flatMap(t=>{let r=(0,P.kQ)(t.repository.name,t.repositoryLocation.name);return t.repository.pipelines.filter(t=>{let{name:r}=t;return r.toLocaleLowerCase().includes(e)}).map(e=>eS(r,e.name))}))},[d,j]),E=l.useMemo(()=>k.filter(e=>{let{key:t}=e;return N.has(t)}),[k,N]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t,{refreshState:O}),(0,n.jsxs)(o.x,{padding:{horizontal:24,vertical:16},flex:{alignItems:"center",justifyContent:"space-between"},children:[(0,n.jsxs)(o.x,{flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[r&&(0,n.jsx)(r,{selected:"timeline"}),a.length>1&&(0,n.jsx)(el.C,{}),(0,n.jsx)(c.oi,{icon:"search",value:j,onChange:e=>f(e.target.value),placeholder:"Filter by job name…",style:{width:"200px"}})]}),(0,n.jsxs)(o.x,{flex:{direction:"row",gap:16,alignItems:"center"},children:[(0,n.jsx)(ei.h,{activeItems:new Set([u]),buttons:[{id:"1",label:"1hr"},{id:"6",label:"6hr"},{id:"12",label:"12hr"},{id:"24",label:"24hr"}],onClick:e=>h(e)}),(0,n.jsxs)(o.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,n.jsx)(i.zx,{onClick:v,children:"←"}),(0,n.jsx)(i.zx,{onClick:w,children:"Now"}),(0,n.jsx)(i.zx,{onClick:y,children:"→"})]})]})]}),(0,n.jsx)(eo.S,{region:"timeline",children:(0,n.jsx)(ea.q,{loading:T,range:b,jobs:E})})]})};var eF=r(17872),e$=r(38267);let eq=()=>{(0,I.j)("Overview | Activity");let e=l.useCallback(e=>{let{refreshState:t}=e;return(0,n.jsx)(es,{tab:"activity",refreshState:t})},[]),[t,r]=(0,ec.U)("overview-activity-tab",e=>["timeline","assets"].includes(e)?e:"timeline"),{enableAssetHealthOverviewPreview:a}=l.useContext(Y.G),c=a?"timeline":t,d=l.useCallback(e=>{let{selected:t}=e;return a?null:(c!==t&&r(t),(0,n.jsxs)(i.zH,{children:[(0,n.jsx)(e$.Q1,{$active:"timeline"===t,to:"/overview/activity/timeline",children:"Timeline"}),(0,n.jsx)(e$.Q1,{$active:"assets"===t,to:"/overview/activity/assets",children:"Assets"})]}))},[c,r,a]);return(0,n.jsx)(o.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:(0,n.jsxs)(s.rs,{children:[!a&&(0,n.jsx)(eF.A,{path:"/overview/activity/assets",children:(0,n.jsx)(F,{Header:e,TabButton:d})}),(0,n.jsx)(eF.A,{path:"/overview/activity/timeline",children:(0,n.jsx)(ez,{Header:e,TabButton:d})}),(0,n.jsx)(eF.A,{path:"*",render:l.useCallback(()=>"timeline"===c?(0,n.jsx)(s.l_,{to:"/overview/activity/timeline"}):(0,n.jsx)(s.l_,{to:"/overview/activity/assets"}),[c])})]})})};var eU=r(63065);let eQ=()=>((0,C.Px)(),(0,I.j)("Overview | Jobs"),(0,n.jsxs)(o.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,n.jsx)(H.m,{title:(0,n.jsx)(j.X6,{children:"Overview"}),tabs:(0,n.jsx)(en,{tab:"jobs"})}),(0,n.jsx)(eU.e,{})]}));var eJ=r(40794),eD=r(37483),eV=r(35002),eB=r(22921),eW=r(3922),eG=r(98956),eH=r(50646),eK=r(83738);let eZ=e=>{let{repos:t}=e,r=(0,l.useRef)(null),s=(0,l.useMemo)(()=>t.map(e=>{let{repoAddress:t}=e;return(0,ek.Uz)(t)}),[t]),{expandedKeys:i,onToggle:o,onToggleAll:a}=(0,eH.N)(eB.y,s),c=(0,l.useMemo)(()=>{let e=[];return t.forEach(t=>{let{repoAddress:r,resources:n}=t;e.push({type:"header",repoAddress:r,resourceCount:n.length});let s=(0,ek.Uz)(r);i.includes(s)&&n.forEach(t=>{e.push({type:"resource",repoAddress:r,...t})})}),e},[t,i]),d=(0,eG.w)(t.map(e=>{let{repoAddress:t}=e;return t.name})),u=(0,f.MG)({count:c.length,getScrollElement:()=>r.current,estimateSize:e=>{let t=c[e];return(null==t?void 0:t.type)==="header"?32:64},overscan:10}),h=u.getTotalSize(),p=u.getVirtualItems();return(0,n.jsx)("div",{style:{overflow:"hidden"},children:(0,n.jsxs)(M.W2,{ref:r,children:[(0,n.jsx)(eW.f,{}),(0,n.jsx)(M.Nh,{$totalHeight:h,children:p.map(e=>{let{index:t,key:r,size:s,start:l}=e,u=c[t];return"header"===u.type?(0,n.jsx)(eK.vG,{repoAddress:u.repoAddress,height:s,start:l,onToggle:o,onToggleAll:a,expanded:i.includes((0,ek.Uz)(u.repoAddress)),showLocation:d.has(u.repoAddress.name),rightElement:(0,n.jsx)(eV.u,{content:1===u.resourceCount?"1 resource":"".concat(u.resourceCount," resources"),placement:"top",children:(0,n.jsx)(x.V,{children:u.resourceCount})})},r):(0,n.jsx)(eW.K,{height:s,start:l,...u},r)})})]})})};var eX=r(907),eY=r(49455),e0=r(78491),e1=r(71662),e2=r(73658);function e3(){let e=(0,eu._)(["\n  query OverviewResourcesQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                allTopLevelResourceDetails {\n                  id\n                  ...ResourceEntryFragment\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return e3=function(){return e},e}let e4=()=>{(0,C.Px)(),(0,I.j)("Overview | Resources");let{allRepos:e,visibleRepos:t,loading:r}=(0,l.useContext)(eM.C5),[s,i]=(0,A.q)({queryKey:"search",defaults:{search:""}}),d=e.length,u=(0,eJ.a)(e6,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),{data:h,loading:x}=u;(0,eC.Hu)(u,"OverviewResourcesQuery");let m=(0,b.C4)(u,b.dT),g=(0,l.useMemo)(()=>{let e=(0,eY.S)(t);return e5(h).filter(t=>{let{repoAddress:r}=t;return e.has((0,ek.Uz)(r))})},[h,t]),j=s.trim().toLocaleLowerCase(),f=j.length>0,v=(0,l.useMemo)(()=>{let e=j.toLocaleLowerCase();return g.map(t=>{let{repoAddress:r,resources:n}=t;return{repoAddress:r,resources:n.filter(t=>{let{name:r}=t;return r.toLocaleLowerCase().includes(e)})}}).filter(e=>{let{resources:t}=e;return t.length>0})},[g,j]),y=r&&!d||x&&!h;return(0,n.jsxs)(o.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,n.jsx)(es,{tab:"resources",refreshState:m}),(0,n.jsxs)(o.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[d>1?(0,n.jsx)(el.C,{}):null,(0,n.jsx)(c.oi,{icon:"search",value:s,rightElement:y?(0,n.jsx)(e2.W,{tooltipContent:"Loading resources…"}):void 0,onChange:e=>i(e.target.value),placeholder:"Filter by resource name…",style:{width:"340px"}})]}),x&&!d?(0,n.jsx)(o.x,{padding:64,children:(0,n.jsx)(a.$,{purpose:"page"})}):(()=>{if(x&&!h)return(0,n.jsx)(o.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,n.jsxs)(o.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,n.jsx)(a.$,{purpose:"body-text"}),(0,n.jsx)("div",{style:{color:p.$()},children:"Loading resources…"})]})});let r=e.length>t.length;return v.length?(0,n.jsx)(eZ,{repos:v}):f?(0,n.jsx)(o.x,{padding:{top:20},children:(0,n.jsx)(eD.t,{icon:"search",title:"No matching resources",description:r?(0,n.jsxs)("div",{children:["No resources matching ",(0,n.jsx)("strong",{children:s})," were found in the selected code locations"]}):(0,n.jsxs)("div",{children:["No resources matching ",(0,n.jsx)("strong",{children:s})," were found in your definitions"]})})}):(0,n.jsx)(o.x,{padding:{top:20},children:(0,n.jsx)(eD.t,{icon:"search",title:"No resources",description:r?"No resources were found in the selected code locations":"No resources were found in your definitions"})})})()]})},e5=e=>{if((null==e?void 0:e.workspaceOrError.__typename)!=="Workspace")return[];let t=e.workspaceOrError.locationEntries.map(e=>e.locationOrLoadError),r=[];for(let e of t)if((null==e?void 0:e.__typename)==="RepositoryLocation")for(let t of e.repositories){let{name:n,allTopLevelResourceDetails:s}=t,i=(0,P.kQ)(n,e.name);s.length>0&&r.push({repoAddress:i,resources:s})}return(0,eX.S)(r)},e6=(0,ep.Ps)(e3(),e0.B,e1.L);var e8=r(6685);let e9=()=>((0,C.Px)(),(0,I.j)("Overview | Schedules"),(0,n.jsxs)(o.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,n.jsx)(es,{tab:"schedules"}),(0,n.jsx)(e8.z,{})]}));var e7=r(80089);let te=()=>((0,C.Px)(),(0,I.j)("Overview | Sensors"),(0,n.jsxs)(o.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,n.jsx)(es,{tab:"sensors"}),(0,n.jsx)(e7.n,{})]}));var tt=r(49308),tr=r(26954),tn=r(71406);let ts=()=>{let e=(0,ee.I)();switch(e){case"unknown":return(0,n.jsx)("div",{});case"has-global-amp":return(0,n.jsx)(ti,{});case"has-sensor-amp":return(0,n.jsx)(s.l_,{to:"/overview/sensors"});default:(0,tn.UT)(e)}},ti=()=>((0,C.Px)(),(0,I.j)("Overview | Auto-materialize"),(0,n.jsxs)(tt.T,{children:[(0,n.jsx)(es,{tab:"amp"}),(0,n.jsx)(tr.$,{})]}));var to=r(7870);let tl=()=>((0,C.Px)(),(0,I.j)("Overview | Backfills"),(0,n.jsxs)(tt.T,{children:[(0,n.jsx)(es,{tab:"backfills"}),(0,n.jsx)(to.A,{})]}));var ta=r(62512);let tc=()=>{let{flagSettingsPage:e}=(0,X.gV)();return(0,n.jsxs)(s.rs,{children:[(0,n.jsx)(eF.A,{path:"/overview/activity",children:(0,n.jsx)(eq,{})}),(0,n.jsx)(eF.A,{path:"/overview/jobs",render:()=>e?(0,n.jsx)(s.l_,{to:"/jobs"}):(0,n.jsx)(eQ,{})}),(0,n.jsx)(eF.A,{path:"/overview/schedules",render:()=>e?(0,n.jsx)(s.l_,{to:"/automation/schedules"}):(0,n.jsx)(e9,{})}),(0,n.jsx)(eF.A,{path:"/overview/sensors",render:()=>e?(0,n.jsx)(s.l_,{to:"/automation/sensors"}):(0,n.jsx)(te,{})}),(0,n.jsx)(eF.A,{path:"/overview/automation",render:()=>e?(0,n.jsx)(s.l_,{to:"/automation"}):(0,n.jsx)(ts,{})}),(0,n.jsx)(eF.A,{path:"/overview/backfills/:backfillId",render:t=>{let{match:r}=t;return e?(0,n.jsx)(s.l_,{to:"/automation/backfills/".concat(r.params.backfillId)}):(0,n.jsx)(ta.t4,{})}}),(0,n.jsx)(eF.A,{path:"/overview/backfills",exact:!0,render:()=>e?(0,n.jsx)(s.l_,{to:"/automation/backfills"}):(0,n.jsx)(tl,{})}),(0,n.jsx)(eF.A,{path:"/overview/resources",children:(0,n.jsx)(e4,{})}),(0,n.jsx)(eF.A,{path:"*",render:()=>(0,n.jsx)(s.l_,{to:"/overview/activity"})})]})};var td=tc}}]);
//# sourceMappingURL=5984.7c0d57a989b08b2e.js.map