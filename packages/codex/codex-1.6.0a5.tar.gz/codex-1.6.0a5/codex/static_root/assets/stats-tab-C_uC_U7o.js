import{_ as T,N as m,k as g,t as y,ce as k,cf as I,O as A,aW as B,aA as a,aN as t,L as i,T as u,aD as r,Q as P,R as d,ai as l,M as w,aB as S,ad as _,ah as K,cg as v,b0 as D,b3 as R,aO as V,aP as N}from"./admin-drawer-panel-B2rmpAVA.js";import{C as O}from"./confirm-dialog-DARLmXRf.js";import{c as E}from"./index-DUjeNg4x.js";import{c as L}from"./to-case-kUm8NPpW.js";import{V as c}from"./VTable-FKMTcdkF.js";import"./VDialog-pzwzInEh.js";import"./main-gSW7TFDY.js";const M="Copy API Key to clipboard",p="&nbsp;&nbsp;&nbsp;&nbsp;",U={name:"AdminTasksTab",components:{ConfirmDialog:O},data(){return{showTooltip:{show:!1},apiSchemaURL:window.CODEX.API_V3_PATH}},computed:{...m(g,{}),...m(y,{stats:s=>s.stats}),clipBoardEnabled(){return location.prototcal=="https:"},apiTooltip(){return M?this.clipBoardEnabled:void 0},clipBoardIcon(){return this.showTooltip?k:I}},created(){this.loadStats()},methods:{...A(y,["loadStats","updateAPIKey"]),regenAPIKey(){this.updateAPIKey().then(this.loadStats).catch(console.warn)},nf(s){return B.format(s)},onClickAPIKey(){this.clipBoardEnabled&&E(this.stats.config.apiKey,this.showTooltip)},metadataTitle(s){let o=s.replace(/Count$/,"");return o=L(o),o=o.replace(/^Contributor\s/,p),o=o.replace(/^Identifier\s/,p),o=o.replace(/^Story\sArc\s/,p),o}}},e=s=>(V("data-v-958d510c"),s=s(),N(),s),F={key:0,id:"stats"},z={class:"statBlock"},H=e(()=>t("h3",null,"Platform",-1)),j=e(()=>t("td",null,"Docker",-1)),G=e(()=>t("td",null,"Machine",-1)),X=e(()=>t("td",null,"System",-1)),Q=e(()=>t("td",null,"Python",-1)),W=e(()=>t("td",null,"Codex",-1)),Z={class:"statBlock"},q=e(()=>t("h3",null,"Config",-1)),J=e(()=>t("td",null,"Libraries",-1)),Y=e(()=>t("td",null,"Anonymous Users",-1)),x=e(()=>t("td",null,"Registered Users",-1)),$=e(()=>t("td",null,"Groups",-1)),tt={class:"statBlock"},st=e(()=>t("h3",null,"Groups",-1)),et=e(()=>t("td",null,"Folders",-1)),lt=e(()=>t("td",null,"Publishers",-1)),nt=e(()=>t("td",null,"Imprints",-1)),ot=e(()=>t("td",null,"Series",-1)),at=e(()=>t("td",null,"Volumes",-1)),dt=e(()=>t("td",null,"Issues",-1)),it={key:0},rt=e(()=>t("td",{class:"indent"},"CBZ",-1)),ut={key:1},ct=e(()=>t("td",{class:"indent"},"CBR",-1)),ht={key:2},_t=e(()=>t("td",{class:"indent"},"CBX",-1)),pt={key:3},ft=e(()=>t("td",{class:"indent"},"CBT",-1)),mt={key:4},yt=e(()=>t("td",{class:"indent"},"PDF",-1)),Ct={key:5},bt=e(()=>t("td",{class:"indent"},"Unknown",-1)),Tt={class:"statBlock"},gt=e(()=>t("h3",null,"Metadata",-1)),kt=["innerHTML"],It={class:"statBlock"},At=e(()=>t("h3",null,"API",-1)),Bt=e(()=>t("td",null,"Schema Documentation:",-1)),Pt={id:"schemaDocValue"},wt=["href"],St=["title"],Kt={key:0},vt={class:"copied"},Dt={id:"apiKey"},Rt={colspan:"2"};function Vt(s,o,Nt,Ot,f,n){const C=P("ConfirmDialog");return s.stats?(d(),a("div",F,[t("div",z,[H,i(c,{class:"highlight-table"},{default:u(()=>[t("tbody",null,[t("tr",null,[j,t("td",null,l(s.stats.platform.docker),1)]),t("tr",null,[G,t("td",null,l(s.stats.platform.machine),1)]),t("tr",null,[X,t("td",null,l(s.stats.platform.system)+" "+l(s.stats.platform.systemRelease),1)]),t("tr",null,[Q,t("td",null,l(s.stats.platform.python),1)]),t("tr",null,[W,t("td",null,l(s.stats.platform.codex),1)])])]),_:1})]),t("div",Z,[q,i(c,{class:"highlight-table"},{default:u(()=>[t("tbody",null,[t("tr",null,[J,t("td",null,l(n.nf(s.stats.config.librariesCount)),1)]),t("tr",null,[Y,t("td",null,l(n.nf(s.stats.config.sessionsAnonCount)),1)]),t("tr",null,[x,t("td",null,l(n.nf(s.stats.config.usersCount)),1)]),t("tr",null,[$,t("td",null,l(n.nf(s.stats.config.groupsCount)),1)])])]),_:1})]),t("div",tt,[st,i(c,{class:"highlight-table"},{default:u(()=>[t("tbody",null,[t("tr",null,[et,t("td",null,l(n.nf(s.stats.groups.foldersCount)),1)]),t("tr",null,[lt,t("td",null,l(n.nf(s.stats.groups.publishersCount)),1)]),t("tr",null,[nt,t("td",null,l(n.nf(s.stats.groups.imprintsCount)),1)]),t("tr",null,[ot,t("td",null,l(n.nf(s.stats.groups.seriesCount)),1)]),t("tr",null,[at,t("td",null,l(n.nf(s.stats.groups.volumesCount)),1)]),t("tr",null,[dt,t("td",null,l(n.nf(s.stats.groups.issuesCount)),1)]),s.stats.fileTypes.cbzCount?(d(),a("tr",it,[rt,t("td",null,l(n.nf(s.stats.fileTypes.cbzCount)),1)])):r("",!0),s.stats.fileTypes.cbrCount?(d(),a("tr",ut,[ct,t("td",null,l(n.nf(s.stats.fileTypes.cbrCount)),1)])):r("",!0),s.stats.fileTypes.cbxCount?(d(),a("tr",ht,[_t,t("td",null,l(n.nf(s.stats.fileTypes.cbxCount)),1)])):r("",!0),s.stats.fileTypes.cbtCount?(d(),a("tr",pt,[ft,t("td",null,l(n.nf(s.stats.fileTypes.cbtCount)),1)])):r("",!0),s.stats.fileTypes.pdfCount?(d(),a("tr",mt,[yt,t("td",null,l(n.nf(s.stats.fileTypes.pdfCount)),1)])):r("",!0),s.stats.fileTypes.unknownCount?(d(),a("tr",Ct,[bt,t("td",null,l(n.nf(s.stats.fileTypes.unknownCount)),1)])):r("",!0)])]),_:1})]),t("div",Tt,[gt,i(c,{class:"highlight-table"},{default:u(()=>[t("tbody",null,[(d(!0),a(w,null,S(Object.entries(s.stats.metadata),([h,b])=>(d(),a("tr",{key:h},[t("td",{innerHTML:n.metadataTitle(h)},null,8,kt),t("td",null,l(n.nf(b)),1)]))),128))])]),_:1})]),t("div",It,[At,i(c,{class:"highlight-table"},{default:u(()=>[t("tbody",null,[t("tr",null,[Bt,t("td",Pt,[_(" The only endpoint accessible with API Key access is "),t("a",{href:`${f.apiSchemaURL}#/api/api_v3_admin_stats_retrieve`,target:"_blank"},"/admin/stats",8,wt)])]),t("tr",{id:"apiKeyRow",title:n.apiTooltip,onClick:o[0]||(o[0]=(...h)=>n.onClickAPIKey&&n.onClickAPIKey(...h))},[t("td",null,[_(" API Key "),n.clipBoardEnabled?(d(),a("span",Kt,[i(K,{class:"clipBoardIcon",size:"small"},{default:u(()=>[_(l(n.clipBoardIcon),1)]),_:1}),i(v,null,{default:u(()=>[D(t("span",vt,"Copied",512),[[R,f.showTooltip.show]])]),_:1})])):r("",!0)]),t("td",Dt,l(s.stats.config.apiKey),1)],8,St),t("tr",null,[t("td",Rt,[i(C,{"button-text":"Regenerate API Key","title-text":"Regenerate","object-name":"API Key","confirm-text":"Regenerate",onConfirm:n.regenAPIKey},null,8,["onConfirm"])])])])]),_:1})])])):r("",!0)}const jt=T(U,[["render",Vt],["__scopeId","data-v-958d510c"]]);export{jt as default};
