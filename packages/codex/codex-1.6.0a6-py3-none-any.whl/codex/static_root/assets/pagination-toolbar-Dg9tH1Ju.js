import{x as ae,E as be,bX as xe,G as me,ay as We,ax as F,K as ve,L as i,bY as ge,_ as z,R as d,aA as T,bZ as Xe,ae as te,aD as I,ai as V,b_ as Ze,H as ye,b$ as Le,c0 as Je,aJ as De,N as ne,O as ue,aN as m,T as S,M as ke,aB as se,P as B,ad as L,ah as ce,Q as K,l as Qe,aI as et,bE as tt,c1 as at,ag as st,m as lt,aT as rt,aU as ot,aW as Ve,k as it,aX as nt,ap as Y,aS as ut,ao as de,b4 as dt,bj as ct,aO as mt,aP as vt,bh as Se,bt as _e,ak as ft,c2 as ht,bb as pt,c3 as bt,h as v,c4 as Be,J as Ce,s as Pe,r as pe,U as gt,p as yt,a0 as Ae,c5 as kt,i as $e,c6 as St,an as _t,C as X,b0 as Re,b1 as Ct,c7 as Tt,b3 as wt,c8 as Vt,bc as Bt,aw as Ie,as as Pt}from"./admin-drawer-panel-C34Ze3-5.js";import{C as Rt,u as Z,B as It}from"./main-Cavvqkyp.js";import{c as Mt,d as Nt,V as Et}from"./VSelect-BnoCfCLY.js";import{c as Ft}from"./to-case-kUm8NPpW.js";import{P as Lt}from"./unauthorized-28bmiwAU.js";import{V as Dt}from"./VDialog-DiixpkQL.js";import{m as At,a as $t,u as Ot,V as Me,b as jt}from"./VSelectionControl-BSL0qeL9.js";import{a as Ut}from"./settings-drawer-CT73ieiV.js";const zt=ae({...be(),...xe({variant:"text"})},"VToolbarItems"),Ls=me()({name:"VToolbarItems",props:zt(),setup(e,t){let{slots:a}=t;return We({VBtn:{color:F(e,"color"),height:"inherit",variant:F(e,"variant")}}),ve(()=>{var l;return i("div",{class:["v-toolbar-items",e.class],style:e.style},[(l=a.default)==null?void 0:l.call(a)])}),{}}}),Gt={p:"publisher",i:"imprint",s:"series",v:"volume",a:"story-arc",f:"folder",c:"missing-cover"},qt=(e,t,a,l)=>{let o;if(e)o=`${ge(e)}/cover.webp?ts=${t}`,a&&(o+=`&group=${a}`),l&&(o+="&custom=1");else{const s=Gt[a];o=window.CODEX.STATIC+"img/"+s+".svg"}return o},Ht={name:"BookCover",props:{group:{type:String,required:!0},childCount:{type:Number,default:1},finished:{type:Boolean},coverPk:{type:Number,default:0},coverMtime:{type:String,required:!0},coverCustom:{type:Boolean,required:!0},multiGroup:{type:Boolean,required:!0}},data(){return{showPlaceholder:!1}},computed:{coverSrc(){return qt(this.coverPk,this.coverMtime,this.group,this.coverCustom)},childCountClasses(){return{childCount:!0,multiGroup:this.multiGroup}}},mounted:function(){this.delayPlaceholder()},methods:{delayPlaceholder:function(){setTimeout(()=>{this.showPlaceholder=!0},2e3)}}},Kt={class:"bookCover"};function Yt(e,t,a,l,o,s){return d(),T("div",Kt,[i(Xe,{src:s.coverSrc,class:"coverImg"},null,8,["src"]),a.finished!==!0?(d(),T("div",{key:0,class:te({unreadFlag:!0,mixedreadFlag:a.finished===null})},null,2)):I("",!0),a.group!=="c"?(d(),T("span",{key:1,class:te(s.childCountClasses)},V(a.childCount),3)):I("",!0)])}const xt=z(Ht,[["render",Yt],["__scopeId","data-v-0b75ebbb"]]),Wt=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],Xt=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],Zt=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],Jt=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],Ne=(e,t,a)=>{let l=e;return typeof t=="string"||Array.isArray(t)?l=e.toLocaleString(t,a):(t===!0||a!==void 0)&&(l=e.toLocaleString(void 0,a)),l};function Qt(e,t){if(!Number.isFinite(e))throw new TypeError(`Expected a finite number, got ${typeof e}: ${e}`);t={bits:!1,binary:!1,space:!0,...t};const a=t.bits?t.binary?Jt:Zt:t.binary?Xt:Wt,l=t.space?" ":"";if(t.signed&&e===0)return` 0${l}${a[0]}`;const o=e<0,s=o?"-":t.signed?"+":"";o&&(e=-e);let n;if(t.minimumFractionDigits!==void 0&&(n={minimumFractionDigits:t.minimumFractionDigits}),t.maximumFractionDigits!==void 0&&(n={maximumFractionDigits:t.maximumFractionDigits,...n}),e<1){const P=Ne(e,t.locale,n);return s+P+l+a[0]}const r=Math.min(Math.floor(t.binary?Math.log(e)/Math.log(1024):Math.log10(e)/3),a.length-1);e/=(t.binary?1024:1e3)**r,n||(e=e.toPrecision(3));const c=Ne(Number(e),t.locale,n),f=a[r];return s+c+l+f}const ea=e=>{const t=e.pk,a=Ze();return e={...e,...a},delete e.pk,ye.get(`c/${t}`,{params:e})},ta=()=>ye.get("c/settings"),aa=e=>ye.put("c/settings",e),sa=({pk:e,mtime:t})=>`${Le(e)}/download/comic-${e}.cbz?mtime=${t}`,Ds=({pk:e,page:t,mtime:a})=>`${Le(e)}/${t}/page.jpg?mtime=${a}`,As=({pk:e,page:t,mtime:a})=>`${ge(e)}/${t}/page.jpg?mtime=${a}`,la=({pk:e,mtime:t})=>`/c/${e}/book.pdf?mtime=${t}`,$s={getPdfBookSource:la,getReaderBasePath:ge,getReaderInfo:ea,getReaderSettings:ta,setReaderSettings:aa},ra=function(e){let t;return e?t=e.length===4&&!Number.isNaN(e)?" ("+e+")":" v"+e:t="",t},Oe=function({issueNumber:e,issueSuffix:t},a){let l;try{e==null&&!t&&(e=0);const o=Number.parseFloat(e),s=Math.floor(o);a===void 0&&(a=0),o===s?l=s.toString():(l=o.toString(),a+=l.split(".")[1].length+1),l=l.padStart(a,"0")}catch{l=""}return t&&(l+=t),l},oa=function({issueNumber:e,issueSuffix:t,issueCount:a},l){let o="#"+Oe({issueNumber:e,issueSuffix:t},l);return a&&(o+=` of ${a}`),o},ia=function({seriesName:e,volumeName:t,issueNumber:a,issueSuffix:l,issueCount:o},s){const n=ra(t),r=oa({issueNumber:a,issueSuffix:l,issueCount:o},s);return[e,n,r].filter(Boolean).join(" ")},Ee=Rt.browser.vuetifyNullCode,na=new Set(["",Ee,Ee.toString(),void 0]),ua=function(e){let t;return e===void 0?t=e:e instanceof Object?t={value:e.pk,title:e.name}:t={value:e,title:e.toString()},e.url&&(t.url=e.url),t},da=function(e,t){return e.title<t.title?-1:e.title>t.title?1:0},ca=function(e,t){return Number.parseFloat(e.title)-Number.parseFloat(t.title)},ma=function(e,t,a=!1){const l=e||[],o=t&&t.toLowerCase();let s=[];for(const r of l){if(!r||na.has(r.pk))continue;const c=ua(r);c&&(!o||c.title&&c.title.toLowerCase().includes(o))&&s.push(c)}const n=a?ca:da;return s.sort(n)},va={name:"MetadataTags",props:{label:{type:String,required:!0},values:{type:Array,default(){return[]}},filter:{type:String,required:!1,default:void 0}},data(){return{mdiFilter:Je,mdiOpenInNew:De}},computed:{...ne(Z,{filterValues(e){const t=this.filter||this.label.toLowerCase();return e.settings.filters[t]},topGroup:e=>e.settings.topGroup}),model(){return ma(this.values)},chipClass(e){return{browseChip:this.filter&&e}}},methods:{...ue(Z,["setSettings"]),chipColor(e){return this.filterValues&&this.filterValues.includes(e)?this.$vuetify.theme.current.colors["primary-darken-1"]:""},onClick(e){if(!this.filter||!e)return;const t=["f","s"].includes(this.topGroup)?this.topGroup:"r",a=t==="s"&&this.filter==="storyArcs";if(!a){const n={filters:{[this.filter]:[e]}};this.setSettings(n)}const s={name:"browser",params:{group:t,pk:a?e:0,page:1}};this.$router.push(s)}}},fa={key:0,class:"tags"},ha={class:"chipGroupLabel"},pa=["href"];function ba(e,t,a,l,o,s){return s.model&&s.model.length>0?(d(),T("div",fa,[m("div",ha,V(a.label),1),i(Nt,{column:!0,multiple:"",value:s.model},{default:S(()=>[(d(!0),T(ke,null,se(s.model,n=>(d(),B(Mt,{key:`${a.label}/${n.value}`,color:s.chipColor(n.value),value:n.value,onClick:r=>s.onClick(n.value)},{default:S(()=>[n.url?(d(),T("a",{key:0,href:n.url,target:"_blank"},[L(V(n.title),1),i(ce,null,{default:S(()=>[L(V(o.mdiOpenInNew),1)]),_:1})],8,pa)):(d(),T("span",{key:1,class:te(s.chipClass)},V(n.title),3))]),_:2},1032,["color","value","onClick"]))),128))]),_:1},8,["value"])])):I("",!0)}const je=z(va,[["render",ba],["__scopeId","data-v-ea0e4633"]]),ga={name:"MetadataContributorsTable",components:{MetadataTags:je},props:{value:{type:Array,default:void 0}},computed:{contributorsDict(){const e={};if(!this.value)return e;for(const{role:l,person:o}of this.value){const s=Ft(l.name)+"s";e[s]||(e[s]=[]),e[s].push(o)}const t=Object.keys(e).sort((l,o)=>l.localeCompare(o)),a={};for(const l of t)a[l]=e[l].sort((o,s)=>o.name.localeCompare(s.name));return a}}},ya={key:0},ka=m("h3",null,"Contributors",-1);function Sa(e,t,a,l,o,s){const n=K("MetadataTags");return Object.keys(s.contributorsDict).length>0?(d(),T("div",ya,[ka,(d(!0),T(ke,null,se(Object.entries(s.contributorsDict),([r,c])=>(d(),B(n,{key:r,values:c,label:r,filter:"contributors"},null,8,["values","label"]))),128))])):I("",!0)}const _a=z(ga,[["render",Sa]]),Ca={name:"MetadataTextBox",props:{label:{type:String,required:!0},value:{type:[Object,String,Number,Boolean],default:void 0},link:{type:[Boolean,String],default:!1},group:{type:String,default:""},obj:{type:Object,default:void 0}},data(){return{mdiOpenInNew:De}},computed:{computedValue(){return this.value!=null&&this.value instanceof Object?this.value.name:this.value},linkValue(){return this.link===!0?this.computedValue:this.link?this.link:!1},highlight(){var e;return((e=this.obj)==null?void 0:e.group)===this.group},pathArray(){if(this.computedValue)return this.computedValue.split("/")},folderPath(){if(this.pathArray)return this.pathArray.slice(0,-1).join("/")},basePath(){if(this.pathArray)return this.pathArray.at(-1)},groupTo(){var o;const e=Z();if(this.group!=="f"&&!e.settings.show[this.group]||this.group==="f"&&!e.page.adminFlags.folderView)return;const a=(((o=this.obj)==null?void 0:o.group)==this.group?this.obj.ids:[this.value.pk]).join(",");if(!a)return;const l=this.$router.currentRoute.value.params;if(!(l.group===this.group&&l.pks===a))return{name:"browser",params:{group:this.group,pks:a}}}}},Ta={class:"textLabel"},wa={class:"textValue"},Va=["href"],Ba={key:3,class:"textContent"},Pa={key:4,id:"basePath"};function Ra(e,t,a,l,o,s){const n=K("router-link");return s.computedValue?(d(),T("div",{key:0,class:te(["text",{highlight:s.highlight}])},[m("div",Ta,V(a.label),1),m("div",wa,[s.groupTo&&a.group==="f"?(d(),B(n,{key:0,id:"folderPath",to:s.groupTo,title:"Browse Folder"},{default:S(()=>[L(V(s.folderPath)+"/ ",1)]),_:1},8,["to"])):s.groupTo?(d(),B(n,{key:1,class:"textContent",to:s.groupTo,title:`Browse ${a.label}`},{default:S(()=>[L(V(s.computedValue),1)]),_:1},8,["to","title"])):a.link?(d(),T("a",{key:2,href:s.linkValue,target:"_blank"},[L(V(s.computedValue)+" ",1),i(ce,{size:"small"},{default:S(()=>[L(V(o.mdiOpenInNew),1)]),_:1})],8,Va)):(d(),T("div",Ba,V(s.computedValue),1)),s.groupTo&&a.group==="f"?(d(),T("span",Pa,V(s.basePath),1)):I("",!0)])],2)):I("",!0)}const Ia=z(Ca,[["render",Ra],["__scopeId","data-v-e94baf62"]]),Ue=new Set("rtl","btt");Object.freeze(Ue);const Ma=({ids:e,page:t,readingDirection:a,pageCount:l},o)=>{if(e.length<1||o&&!l)return;const s=e[0];if(t)t=Number(t);else if(Ue.has(a)){const n=Number(l)-1;t=Math.max(n,0)}else t=0;return{name:"reader",params:{pk:s,page:t}}},Fe=Qe("metadata",{state:()=>({md:void 0}),actions:{async loadMetadata({group:e,pks:t}){const a=Z();await It.getMetadata({group:e,pks:t},a.settings).then(l=>{const o={...l.data};return o.loaded=!0,this.md=o,!0}).catch(l=>{console.error(l),this.clearMetadata()})},clearMetadata(){this.md=void 0}}}),Na=1160,Ea=.05,Fa=250,La={name:"MetadataButton",components:{BookCover:xt,CloseButton:et,MetadataContributorsTable:_a,MetadataTags:je,MetadataText:Ia,PlaceholderLoading:Lt},props:{group:{type:String,required:!0},book:{type:Object,required:!0},children:{type:Number,default:1},toolbar:{type:Boolean,default:!1}},data(){return{mdiDownload:tt,mdiTagOutline:at,dialog:!1,progress:0}},computed:{...st(lt,["isUserAdmin"]),...ne(Z,{twentyFourHourTime:e=>{var t;return(t=e.settings)==null?void 0:t.twentyFourHourTime},readingDirectionTitles:e=>e.choices.static.readingDirection,identifierTypes:e=>e.choices.static.identifierType,importMetadata:e=>{var t,a;return(a=(t=e.page)==null?void 0:t.adminFlags)==null?void 0:a.importMetadata}}),...ne(Fe,{md:e=>e.md}),...ne(Z,{q:e=>e.settings.q}),showContainer(){var e;return((e=this.md)==null?void 0:e.loaded)||!1},downloadFileName(){var t;const e=this.md;return e?(t=this.md)!=null&&t.filename?e.filename:ia({seriesName:e.series.name||"",volumeName:e.volume.name||"",issueNumber:e.issueNumber,issueSuffix:e.issueSuffix})+"."+this.fileType.toLowerCase():"Unknown.cbz"},buttonVariant(){return this.toolbar?"plain":"text"},downloadURL(){return this.book?sa(this.book):""},isReadButtonShown(){return this.group==="c"&&this.$route.name!="reader"},isReadButtonEnabled(){return!!this.readerRoute},readButtonIcon(){return this.isReadButtonEnabled?rt:ot},readerRoute(){var e;return(e=this.md)!=null&&e.ids?Ma(this.md,this.importMetadata):{}},formattedIssue(){if(!this.md)return"Unknown";if(!((this.md.issueNumber===null||this.md.issueNumber===void 0)&&!this.md.issueSuffix))return Oe(this.md)},readingDirectionText(){return this.md?this.readingDirectionTitles[this.md.readingDirection]:"Unknown"},pages(){let e="";if(!this.md)return e;if(this.md.page){const a=Ve.format(this.md.page);e+=`Read ${a} of `}const t=Ve.format(this.md.pageCount);return e+=`${t} pages`,this.md.progress>0&&(e+=` (${Math.round(this.md.progress)}%)`),e},size(){var e;return((e=this==null?void 0:this.md)==null?void 0:e.size)>0?Qt(this.md.size):0},fileType(){var e;return((e=this==null?void 0:this.md)==null?void 0:e.fileType)||"Unknown"},titledIdentifiers(){var t;const e=[];if(!((t=this==null?void 0:this.md)!=null&&t.identifiers))return e;for(const a of this.md.identifiers){const l=a.name.split(":"),o=l[0],s=l[1],n=this.identifierTypeTitle(o);let r="";n&&n!=="None"&&(r+=n+":"),r+=s,e.push({...a,name:r})}return e},multiGroup(){var e;return(e=this.md)!=null&&e.ids?this.md.ids.length>1:!1}},watch:{dialog(e){e?this.dialogOpened():this.clearMetadata()}},methods:{...ue(Fe,["clearMetadata","loadMetadata"]),...ue(it,["downloadIOSPWAFix"]),...ue(Z,["identifierTypeTitle"]),dialogOpened(){const e=this.book.ids?this.book.ids:[this.book.pk],t={group:this.group,pks:e};this.loadMetadata(t),this.startProgress()},startProgress(){this.startTime=Date.now(),this.estimatedMS=Math.max(Ea,this.children/Na)*1e3,this.updateProgress()},updateProgress(){const e=Date.now()-this.startTime;this.progress=e/this.estimatedMS*100,!(this.progress>=100||this.md)&&setTimeout(()=>{this.updateProgress()},Fa)},formatDateTime(e){return nt(e,this.twentyFourHourTime)},download(){this.downloadIOSPWAFix(this.downloadURL,this.md.filename)}}},Da=e=>(mt("data-v-c06a2b18"),e=e(),vt(),e),Aa={id:"metadataHeader"},$a={id:"metadataBookCoverWrapper"},Oa={class:"inlineRow"},ja={class:"inlineRow"},Ua={class:"inlineRow"},za={key:1,class:"inlineRow"},Ga={id:"metadataBody"},qa={class:"mdSection"},Ha={class:"quintRow"},Ka={class:"mdSection"},Ya={class:"quarterRow"},xa={class:"lastSmallRow"},Wa={class:"halfRow mdSection"},Xa={class:"mdSection"},Za={class:"mdSection"},Ja={class:"mdSection"},Qa={class:"mdSection"},es={class:"mdSection"},ts={class:"mdSection inlineRow"},as={class:"inlineRow"},ss={id:"footerLinks"},ls={id:"bottomRightButtons"},rs={key:1,id:"placeholderContainer"},os=Da(()=>m("div",{id:"placeholderTitle"},"Tags Loading",-1));function is(e,t,a,l,o,s){const n=K("CloseButton"),r=K("MetadataText"),c=K("BookCover"),f=K("MetadataTags"),P=K("MetadataContributorsTable"),k=K("PlaceholderLoading");return d(),B(Dt,{modelValue:o.dialog,"onUpdate:modelValue":t[5]||(t[5]=p=>o.dialog=p),fullscreen:"",transition:"dialog-bottom-transition"},{activator:S(({props:p})=>[i(de,Y({"aria-label":"tags",class:"tagButton cardControlButton",variant:s.buttonVariant,icon:o.mdiTagOutline,title:"Tags"},p,{onClick:t[0]||(t[0]=ut(()=>{},["prevent"]))}),null,16,["variant","icon"])]),default:S(()=>[s.showContainer?(d(),T("div",{key:0,id:"metadataContainer",onKeyup:t[3]||(t[3]=ct(p=>o.dialog=!1,["esc"]))},[m("header",Aa,[i(n,{class:"closeButton",title:"Close Metadata (esc)",onClick:t[1]||(t[1]=p=>o.dialog=!1)}),e.q?(d(),B(r,{key:0,id:"search",value:e.q,label:"Search Query",highlight:!0},null,8,["value"])):I("",!0),m("div",$a,[i(c,{id:"bookCover","cover-pk":e.md.coverPk,"cover-mtime":e.md.coverMtime||"","cover-custom":e.md.coverCustom||!1,group:a.group,"child-count":e.md.childCount,finished:e.md.finished,"multi-group":s.multiGroup},null,8,["cover-pk","cover-mtime","cover-custom","group","child-count","finished","multi-group"]),i(dt,{class:"bookCoverProgress","model-value":e.md.progress,rounded:"","background-color":"inherit",height:"2","aria-label":"% read"},null,8,["model-value"])]),m("div",Oa,[i(r,{id:"publisher",value:e.md.publisher,group:"p",label:"Publisher",obj:{ids:e.md.ids,group:e.md.group}},null,8,["value","obj"]),i(r,{id:"imprint",value:e.md.imprint,group:"i",label:"Imprint",obj:{ids:e.md.ids,group:e.md.group}},null,8,["value","obj"])]),m("div",ja,[i(r,{id:"series",value:e.md.series,label:"Series",group:"s",obj:{ids:e.md.ids,group:e.md.group}},null,8,["value","obj"])]),m("div",Ua,[i(r,{id:"volume",value:e.md.volume,label:"Volume",group:"v",obj:{ids:e.md.ids,group:e.md.group}},null,8,["value","obj"]),i(r,{value:e.md.seriesVolumeCount,label:"Volume Count"},null,8,["value"]),i(r,{id:"issue",value:s.formattedIssue,label:"Issue",group:"c",obj:{ids:e.md.ids,group:e.md.group}},null,8,["value","obj"]),i(r,{value:e.md.volumeIssueCount,label:"Issue Count"},null,8,["value"]),i(r,{value:e.md.name,label:"Title"},null,8,["value"])]),e.md.year||e.md.month||e.md.day?(d(),T("div",za,[i(r,{value:e.md.year,label:"Year",class:"datePicker",type:"number"},null,8,["value"]),i(r,{value:e.md.month,label:"Month",class:"datePicker"},null,8,["value"]),i(r,{value:e.md.day,label:"Day",class:"datePicker"},null,8,["value"])])):I("",!0)]),m("div",Ga,[m("section",qa,[m("div",Ha,[i(r,{value:s.pages,label:"Pages"},null,8,["value"]),i(r,{label:"Finished",value:(!!e.md.finished).toString()},null,8,["value"]),i(r,{label:"Reading Direction",value:s.readingDirectionText},null,8,["value"]),i(r,{value:(!!e.md.monochrome).toString(),label:"Monochrome"},null,8,["value"]),i(r,{value:e.md.original_format,label:"Original Format"},null,8,["value"])])]),m("section",Ka,[m("div",Ya,[e.md.createdAt?(d(),B(r,{key:0,value:s.formatDateTime(e.md.createdAt),label:"Created at",class:"mtime"},null,8,["value"])):I("",!0),e.md.updatedAt?(d(),B(r,{key:1,value:s.formatDateTime(e.md.updatedAt),label:"Updated at",class:"mtime"},null,8,["value"])):I("",!0),i(r,{value:s.size,label:"Size"},null,8,["value"]),i(r,{value:s.fileType,label:"File Type"},null,8,["value"])]),m("div",xa,[i(r,{group:"f",value:{pk:e.md.parentFolderId,name:e.md.path},label:"Path"},null,8,["value"])])]),m("section",Wa,[i(r,{value:e.md.country,label:"Country"},null,8,["value"]),i(r,{value:e.md.language,label:"Language"},null,8,["value"])]),m("section",Xa,[i(f,{values:s.titledIdentifiers,label:"Identifiers"},null,8,["values"])]),m("section",Za,[i(r,{value:e.md.summary,label:"Summary"},null,8,["value"]),i(r,{value:e.md.review,label:"Review"},null,8,["value"])]),m("section",Ja,[i(r,{value:e.md.communityRating,label:"Community Rating"},null,8,["value"]),i(r,{value:e.md.criticalRating,label:"Critical Rating"},null,8,["value"]),i(r,{value:e.md.ageRating,label:"Age Rating"},null,8,["value"])]),m("section",Qa,[i(f,{values:e.md.genres,label:"Genres",filter:"genres"},null,8,["values"]),i(f,{values:e.md.characters,label:"Characters",filter:"characters"},null,8,["values"]),i(f,{values:e.md.teams,label:"Teams",filter:"teams"},null,8,["values"]),i(f,{values:e.md.locations,label:"Locations",filter:"locations"},null,8,["values"]),i(f,{values:e.md.seriesGroups,label:"Series Groups",filter:"seriesGroups"},null,8,["values"]),i(f,{values:e.md.stories,label:"Stories",filter:"stories"},null,8,["values"]),i(f,{values:e.md.storyArcNumbers,label:"Story Arcs",filter:"storyArcs"},null,8,["values"]),i(f,{values:e.md.tags,label:"Tags",filter:"tags"},null,8,["values"])]),m("section",es,[i(P,{value:e.md.contributors},null,8,["value"])]),m("section",ts,[i(r,{value:e.md.notes,label:"Notes"},null,8,["value"])]),m("section",as,[i(r,{value:e.md.tagger,label:"Tagger"},null,8,["value"]),i(r,{value:e.md.scanInfo,label:"Scan"},null,8,["value"])])]),m("footer",ss,[a.group==="c"?(d(),B(de,{key:0,id:"downloadButton",title:"Download Comic Archive",onClick:s.download},{default:S(()=>[a.group==="c"?(d(),B(ce,{key:0},{default:S(()=>[L(V(o.mdiDownload),1)]),_:1})):I("",!0),L(" Download ")]),_:1},8,["onClick"])):I("",!0),s.isReadButtonShown?(d(),B(de,{key:1,to:s.readerRoute,title:"Read Comic",disabled:!s.isReadButtonEnabled},{default:S(()=>[i(ce,null,{default:S(()=>[L(V(s.readButtonIcon),1)]),_:1}),L(" Read ")]),_:1},8,["to","disabled"])):I("",!0),m("span",ls,[i(n,{class:"closeButton",title:"Close Metadata (esc)",onClick:t[2]||(t[2]=p=>o.dialog=!1)})])])],32)):(d(),T("div",rs,[i(n,{class:"closeButton",title:"Close Metadata (esc)",onClick:t[4]||(t[4]=p=>o.dialog=!1)}),os,i(k,{"model-value":o.progress,indeterminate:o.progress>=100,class:"placeholder"},null,8,["model-value","indeterminate"])]))]),_:1},8,["modelValue"])}const Os=z(La,[["render",is],["__scopeId","data-v-c06a2b18"]]),ns={name:"ToolbarSelect",props:{selectLabel:{type:String,default:""},maxSelectLen:{type:Number,default:0}},computed:{style(){if(this.maxSelectLen){const e=this.$vuetify.display.xs?"max-width":"width",t=this.maxSelectLen*.7+"em";return`${e}: ${t}`}return""}}};function us(e,t,a,l,o,s){return d(),B(Et,Y(e.$attrs,{label:a.selectLabel,"aria-label":a.selectLabel,class:"toolbarSelect",density:"compact","full-width":"","menu-props":{maxHeight:void 0},"hide-details":"auto",style:s.style,variant:"plain"}),Se({item:S(({item:n,props:r})=>[i(ft,Y(r,{density:"compact",variant:"plain",title:n.title,value:n.value}),null,16,["title","value"])]),_:2},[se(e.$slots,(n,r)=>({name:r,fn:S(c=>[_e(e.$slots,r,Y({props:n},c),void 0,!0)])}))]),1040,["label","aria-label","style"])}const js=z(ns,[["render",us],["__scopeId","data-v-e88da460"]]),Us=ht("v-spacer","div","VSpacer"),ds={name:"PaginationNavButton",props:{narrow:{type:Boolean,default:!0}},computed:{classes(){return{narrowButton:this.narrow}}}};function cs(e,t,a,l,o,s){return d(),B(de,{variant:"plain",density:"compact",class:te(["paginationNavButton",s.classes]),size:"medium"},Se({_:2},[se(e.$slots,(n,r)=>({name:r,fn:S(c=>[_e(e.$slots,r,Y({props:n},c),void 0,!0)])}))]),1032,["class"])}const zs=z(ds,[["render",cs],["__scopeId","data-v-0450dab6"]]),Te=Symbol.for("vuetify:v-slider");function ms(e,t,a){const l=a==="vertical",o=t.getBoundingClientRect(),s="touches"in e?e.touches[0]:e;return l?s.clientY-(o.top+o.height/2):s.clientX-(o.left+o.width/2)}function vs(e,t){return"touches"in e&&e.touches.length?e.touches[0][t]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][t]:e[t]}const fs=ae({disabled:{type:Boolean,default:null},error:Boolean,readonly:{type:Boolean,default:null},max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>typeof e=="boolean"||e==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>typeof e=="boolean"||e==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean,...pt(),...bt({elevation:2}),ripple:{type:Boolean,default:!0}},"Slider"),hs=e=>{const t=v(()=>parseFloat(e.min)),a=v(()=>parseFloat(e.max)),l=v(()=>+e.step>0?parseFloat(e.step):0),o=v(()=>Math.max(Be(l.value),Be(t.value)));function s(n){if(n=parseFloat(n),l.value<=0)return n;const r=Ae(n,t.value,a.value),c=t.value%l.value,f=Math.round((r-c)/l.value)*l.value+c;return parseFloat(Math.min(f,a.value).toFixed(o.value))}return{min:t,max:a,step:l,decimals:o,roundValue:s}},ps=e=>{let{props:t,steps:a,onSliderStart:l,onSliderMove:o,onSliderEnd:s,getActiveThumb:n}=e;const{isRtl:r}=Ce(),c=F(t,"reverse"),f=v(()=>t.direction==="vertical"),P=v(()=>f.value!==c.value),{min:k,max:p,step:D,decimals:G,roundValue:O}=a,x=v(()=>parseInt(t.thumbSize,10)),q=v(()=>parseInt(t.tickSize,10)),j=v(()=>parseInt(t.trackSize,10)),A=v(()=>(p.value-k.value)/D.value),W=F(t,"disabled"),$=v(()=>t.error||t.disabled?void 0:t.thumbColor??t.color),b=v(()=>t.error||t.disabled?void 0:t.trackColor??t.color),M=v(()=>t.error||t.disabled?void 0:t.trackFillColor??t.color),_=Pe(!1),C=Pe(0),N=pe(),E=pe();function h(u){var we;const y=t.direction==="vertical",ze=y?"top":"left",Ge=y?"height":"width",qe=y?"clientY":"clientX",{[ze]:He,[Ge]:Ke}=(we=N.value)==null?void 0:we.$el.getBoundingClientRect(),Ye=vs(u,qe);let he=Math.min(Math.max((Ye-He-C.value)/Ke,0),1)||0;return(y?P.value:P.value!==r.value)&&(he=1-he),O(k.value+he*(p.value-k.value))}const U=u=>{s({value:h(u)}),_.value=!1,C.value=0},H=u=>{E.value=n(u),E.value&&(E.value.focus(),_.value=!0,E.value.contains(u.target)?C.value=ms(u,E.value,t.direction):(C.value=0,o({value:h(u)})),l({value:h(u)}))},R={passive:!0,capture:!0};function J(u){o({value:h(u)})}function le(u){u.stopPropagation(),u.preventDefault(),U(u),window.removeEventListener("mousemove",J,R),window.removeEventListener("mouseup",le)}function re(u){var y;U(u),window.removeEventListener("touchmove",J,R),(y=u.target)==null||y.removeEventListener("touchend",re)}function fe(u){var y;H(u),window.addEventListener("touchmove",J,R),(y=u.target)==null||y.addEventListener("touchend",re,{passive:!1})}function w(u){u.preventDefault(),H(u),window.addEventListener("mousemove",J,R),window.addEventListener("mouseup",le,{passive:!1})}const g=u=>{const y=(u-k.value)/(p.value-k.value)*100;return Ae(isNaN(y)?0:y,0,100)},Q=F(t,"showTicks"),ee=v(()=>Q.value?t.ticks?Array.isArray(t.ticks)?t.ticks.map(u=>({value:u,position:g(u),label:u.toString()})):Object.keys(t.ticks).map(u=>({value:parseFloat(u),position:g(parseFloat(u)),label:t.ticks[u]})):A.value!==1/0?gt(A.value+1).map(u=>{const y=k.value+u*D.value;return{value:y,position:g(y)}}):[]:[]),oe=v(()=>ee.value.some(u=>{let{label:y}=u;return!!y})),ie={activeThumbRef:E,color:F(t,"color"),decimals:G,disabled:W,direction:F(t,"direction"),elevation:F(t,"elevation"),hasLabels:oe,isReversed:c,indexFromEnd:P,min:k,max:p,mousePressed:_,numTicks:A,onSliderMousedown:w,onSliderTouchstart:fe,parsedTicks:ee,parseMouseMove:h,position:g,readonly:F(t,"readonly"),rounded:F(t,"rounded"),roundValue:O,showTicks:Q,startOffset:C,step:D,thumbSize:x,thumbColor:$,thumbLabel:F(t,"thumbLabel"),ticks:F(t,"ticks"),tickSize:q,trackColor:b,trackContainerRef:N,trackFillColor:M,trackSize:j,vertical:f};return yt(Te,ie),ie},bs=ae({focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:[Boolean,Object],default:!0},...be()},"VSliderThumb"),gs=me()({name:"VSliderThumb",directives:{Ripple:kt},props:bs(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a,emit:l}=t;const o=$e(Te),{isRtl:s,rtlClasses:n}=Ce();if(!o)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{thumbColor:r,step:c,disabled:f,thumbSize:P,thumbLabel:k,direction:p,isReversed:D,vertical:G,readonly:O,elevation:x,mousePressed:q,decimals:j,indexFromEnd:A}=o,W=v(()=>f.value?void 0:x.value),{elevationClasses:$}=St(W),{textColorClasses:b,textColorStyles:M}=_t(r),{pageup:_,pagedown:C,end:N,home:E,left:h,right:U,down:H,up:R}=Vt,J=[_,C,N,E,h,U,H,R],le=v(()=>c.value?[1,2,3]:[1,5,10]);function re(w,g){if(!J.includes(w.key))return;w.preventDefault();const Q=c.value||.1,ee=(e.max-e.min)/Q;if([h,U,H,R].includes(w.key)){const ie=(G.value?[s.value?h:U,D.value?H:R]:A.value!==s.value?[h,R]:[U,R]).includes(w.key)?1:-1,u=w.shiftKey?2:w.ctrlKey?1:0;g=g+ie*Q*le.value[u]}else if(w.key===E)g=e.min;else if(w.key===N)g=e.max;else{const oe=w.key===C?1:-1;g=g-oe*Q*(ee>100?ee/10:10)}return Math.max(e.min,Math.min(e.max,g))}function fe(w){const g=re(w,e.modelValue);g!=null&&l("update:modelValue",g)}return ve(()=>{const w=X(A.value?100-e.position:e.position,"%");return i("div",{class:["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&q.value},e.class,n.value],style:[{"--v-slider-thumb-position":w,"--v-slider-thumb-size":X(P.value)},e.style],role:"slider",tabindex:f.value?-1:0,"aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.modelValue,"aria-readonly":!!O.value,"aria-orientation":p.value,onKeydown:O.value?void 0:fe},[i("div",{class:["v-slider-thumb__surface",b.value,$.value],style:{...M.value}},null),Re(i("div",{class:["v-slider-thumb__ripple",b.value],style:M.value},null),[[Ct("ripple"),e.ripple,null,{circle:!0,center:!0}]]),i(Tt,{origin:"bottom center"},{default:()=>{var g;return[Re(i("div",{class:"v-slider-thumb__label-container"},[i("div",{class:["v-slider-thumb__label"]},[i("div",null,[((g=a["thumb-label"])==null?void 0:g.call(a,{modelValue:e.modelValue}))??e.modelValue.toFixed(c.value?j.value:1)])])]),[[wt,k.value&&e.focused||k.value==="always"]])]}})])}),{}}}),ys=ae({start:{type:Number,required:!0},stop:{type:Number,required:!0},...be()},"VSliderTrack"),ks=me()({name:"VSliderTrack",props:ys(),emits:{},setup(e,t){let{slots:a}=t;const l=$e(Te);if(!l)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:o,parsedTicks:s,rounded:n,showTicks:r,tickSize:c,trackColor:f,trackFillColor:P,trackSize:k,vertical:p,min:D,max:G,indexFromEnd:O}=l,{roundedClasses:x}=Bt(n),{backgroundColorClasses:q,backgroundColorStyles:j}=Ie(P),{backgroundColorClasses:A,backgroundColorStyles:W}=Ie(f),$=v(()=>`inset-${p.value?"block":"inline"}-${O.value?"end":"start"}`),b=v(()=>p.value?"height":"width"),M=v(()=>({[$.value]:"0%",[b.value]:"100%"})),_=v(()=>e.stop-e.start),C=v(()=>({[$.value]:X(e.start,"%"),[b.value]:X(_.value,"%")})),N=v(()=>r.value?(p.value?s.value.slice().reverse():s.value).map((h,U)=>{var R;const H=h.value!==D.value&&h.value!==G.value?X(h.position,"%"):void 0;return i("div",{key:h.value,class:["v-slider-track__tick",{"v-slider-track__tick--filled":h.position>=e.start&&h.position<=e.stop,"v-slider-track__tick--first":h.value===D.value,"v-slider-track__tick--last":h.value===G.value}],style:{[$.value]:H}},[(h.label||a["tick-label"])&&i("div",{class:"v-slider-track__tick-label"},[((R=a["tick-label"])==null?void 0:R.call(a,{tick:h,index:U}))??h.label])])}):[]);return ve(()=>i("div",{class:["v-slider-track",x.value,e.class],style:[{"--v-slider-track-size":X(k.value),"--v-slider-tick-size":X(c.value)},e.style]},[i("div",{class:["v-slider-track__background",A.value,{"v-slider-track__background--opacity":!!o.value||!P.value}],style:{...M.value,...W.value}},null),i("div",{class:["v-slider-track__fill",q.value],style:{...C.value,...j.value}},null),r.value&&i("div",{class:["v-slider-track__ticks",{"v-slider-track__ticks--always-show":r.value==="always"}]},[N.value])])),{}}}),Ss=ae({...At(),...fs(),...$t(),modelValue:{type:[Number,String],default:0}},"VSlider"),_s=me()({name:"VSlider",props:Ss(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,start:e=>!0,end:e=>!0},setup(e,t){let{slots:a,emit:l}=t;const o=pe(),{rtlClasses:s}=Ce(),n=hs(e),r=Pt(e,"modelValue",void 0,b=>n.roundValue(b??n.min.value)),{min:c,max:f,mousePressed:P,roundValue:k,onSliderMousedown:p,onSliderTouchstart:D,trackContainerRef:G,position:O,hasLabels:x,readonly:q}=ps({props:e,steps:n,onSliderStart:()=>{l("start",r.value)},onSliderEnd:b=>{let{value:M}=b;const _=k(M);r.value=_,l("end",_)},onSliderMove:b=>{let{value:M}=b;return r.value=k(M)},getActiveThumb:()=>{var b;return(b=o.value)==null?void 0:b.$el}}),{isFocused:j,focus:A,blur:W}=Ot(e),$=v(()=>O(r.value));return ve(()=>{const b=Me.filterProps(e),M=!!(e.label||a.label||a.prepend);return i(Me,Y({class:["v-slider",{"v-slider--has-labels":!!a["tick-label"]||x.value,"v-slider--focused":j.value,"v-slider--pressed":P.value,"v-slider--disabled":e.disabled},s.value,e.class],style:e.style},b,{focused:j.value}),{...a,prepend:M?_=>{var C,N;return i(ke,null,[((C=a.label)==null?void 0:C.call(a,_))??(e.label?i(jt,{id:_.id.value,class:"v-slider__label",text:e.label},null):void 0),(N=a.prepend)==null?void 0:N.call(a,_)])}:void 0,default:_=>{let{id:C,messagesId:N}=_;return i("div",{class:"v-slider__container",onMousedown:q.value?void 0:p,onTouchstartPassive:q.value?void 0:D},[i("input",{id:C.value,name:e.name||C.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:r.value},null),i(ks,{ref:G,start:0,stop:$.value},{"tick-label":a["tick-label"]}),i(gs,{ref:o,"aria-describedby":N.value,focused:j.value,min:c.value,max:f.value,modelValue:r.value,"onUpdate:modelValue":E=>r.value=E,position:$.value,elevation:e.elevation,onFocus:A,onBlur:W,ripple:e.ripple},{"thumb-label":a["thumb-label"]})])}})}),{}}}),Cs={name:"PaginationSlider",props:{min:{type:Number,default:0}}};function Ts(e,t,a,l,o,s){return d(),B(_s,Y({"thumb-size":"36",class:"paginationSlider",density:"compact","hide-details":"auto",min:a.min,rounded:!0,"show-ticks":"always",step:1,"thumb-label":"always"},e.$attrs),{"tick-label":S(({index:n})=>[L(V(n+a.min),1)]),_:1},16,["min"])}const Gs=z(Cs,[["render",Ts],["__scopeId","data-v-01b67afd"]]),ws={name:"PaginationToolbar"};function Vs(e,t,a,l,o,s){return d(),B(Ut,{class:"paginationToolbar codexToolbar",density:"compact",transform:"center bottom"},Se({_:2},[se(e.$slots,(n,r)=>({name:r,fn:S(c=>[_e(e.$slots,r,Y({props:n},c),void 0,!0)])}))]),1024)}const qs=z(ws,[["render",Vs],["__scopeId","data-v-cfa8cce0"]]);export{$s as A,xt as B,Os as M,na as N,zs as P,js as T,Ls as V,oa as a,Ma as b,Us as c,Gs as d,qs as e,ra as f,ia as g,As as h,sa as i,Ds as j,Qt as p,ma as t};
