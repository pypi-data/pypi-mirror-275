import{a as m,j as a}from"./@tanstack-GFKzItNf.js";import{R as p}from"./refresh-CdiBx6nL.js";import{P as u}from"./PageHeader-Bz7qVuF9.js";import{S as d,P as h}from"./Pagination-BEP_9EMH.js";import{k as f,l as x,j as g,n as j,F as P,m as y,r as i,T as b,z as r,h as N,D as v,S as o}from"./index-UnEiujvd.js";import{o as w}from"./url-BxOqGmlk.js";import{S}from"./terminal-Cb3ce-nr.js";import{g as T,E as _,C as E}from"./CopyButton-DVKNxLl5.js";import{L as l,f as C}from"./@react-router-CCpyfPW-.js";import"./@radix-BrEjOMvl.js";import"./chevron-right-double-Dfr12EKG.js";import"./@reactflow-BfgHyCG7.js";import"./check-circle-GxOo3117.js";import"./copy-B8yRmO5i.js";function F({params:e}){return["pipeline_namespaces",e]}async function R({params:e}){const s=f(x.pipelines.namespaces+"?"+w(e)),t=await g(s,{method:"GET",headers:{"Content-Type":"application/json"}});if(t.status===404&&j(),!t.ok)throw new P({message:"Error while fetching pipeline namespaces",status:t.status,statusText:t.statusText});return t.json()}function k(e,s){return m({queryKey:F(e),queryFn:()=>R(e),...s})}function A(){return[{id:"name",header:"Pipeline",accessorFn:e=>{var s;return{name:e.name,status:(s=e.body)==null?void 0:s.latest_run_status}},cell:({getValue:e})=>{const{name:s,status:t}=e();return a.jsxs("div",{className:"group/copybutton flex items-center gap-2",children:[a.jsx(y,{className:`h-5 w-5 ${T(t)}`}),a.jsxs(l,{to:i.pipelines.namespace(encodeURIComponent(s)),className:"flex items-center gap-1",children:[a.jsx("h2",{className:"text-text-md font-semibold",children:s}),a.jsx(_,{status:t}),a.jsx(E,{copyText:s})]})]})}},{id:"latest-run",header:"Latest Run",accessorFn:e=>{var s,t;return{status:(s=e.body)==null?void 0:s.latest_run_status,runId:(t=e.body)==null?void 0:t.latest_run_id}},cell:({getValue:e})=>{const{runId:s,status:t}=e();return a.jsx(l,{to:i.runs.detail(s),children:a.jsxs(b,{emphasis:"subtle",rounded:!1,className:"inline-flex items-center gap-0.5",color:"green",children:[a.jsx(S,{className:`h-3 w-3 ${L(t)}`}),s==null?void 0:s.split("-")[0]]})})}}]}function L(e){if(!e)return"fill-theme-text-brand";switch(e){case"running":return"fill-orange-700";case"cached":return"fill-theme-text-secondary";case"completed":return"fill-success-800";case"failed":return"fill-error-800";case"initializing":return"fill-theme-text-brand"}}const n=1,q=r.object({page:r.coerce.number().min(n).optional().default(n).catch(n),name:r.string().optional(),operator:r.enum(["and","or"]).optional()});function z(){const[e]=C(),{page:s,name:t,operator:c}=q.parse({page:e.get("page")||void 0,name:e.get("name")||void 0,operator:e.get("operator")||void 0});return{page:s,name:t,logical_operator:c}}function X(){const e=z(),{data:s,refetch:t}=k({params:{...e,sort_by:"desc:updated"}},{throwOnError:!0});return a.jsxs("div",{children:[a.jsx(u,{children:a.jsx("h1",{className:"text-display-xs font-semibold",children:"Pipelines"})}),a.jsx("section",{className:"p-5",children:a.jsxs("div",{className:"flex flex-col gap-5",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(d,{searchParams:e}),a.jsx("div",{className:"flex justify-between",children:a.jsxs(N,{intent:"primary",emphasis:"subtle",size:"md",onClick:()=>t(),children:[a.jsx(p,{className:"h-5 w-5 fill-theme-text-brand"}),"Refresh"]})})]}),a.jsxs("div",{className:"flex flex-col items-center gap-5",children:[a.jsx("div",{className:"w-full",children:s?a.jsx(v,{columns:A(),data:s.items}):a.jsx(o,{className:"h-[500px] w-full"})}),s?s.total_pages>1&&a.jsx(h,{searchParams:e,paginate:s}):a.jsx(o,{className:"h-[36px] w-[300px]"})]})]})})]})}export{X as default};
