{"version":3,"file":"index.f79321e6.js","sources":["../../../../../../src/lib/apis/utils/index.ts","../../../../../../src/lib/apis/configs/index.ts"],"sourcesContent":["import { WEBUI_API_BASE_URL } from '$lib/constants';\n\nexport const getGravatarUrl = async (email: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/utils/gravatar?email=${email}`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json'\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.log(err);\n\t\t\terror = err;\n\t\t\treturn null;\n\t\t});\n\n\treturn res;\n};\n\nexport const downloadChatAsPDF = async (chat: object) => {\n\tlet error = null;\n\n\tconst blob = await fetch(`${WEBUI_API_BASE_URL}/utils/pdf`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json'\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\ttitle: chat.title,\n\t\t\tmessages: chat.messages\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.blob();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.log(err);\n\t\t\terror = err;\n\t\t\treturn null;\n\t\t});\n\n\treturn blob;\n};\n\nexport const getHTMLFromMarkdown = async (md: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/utils/markdown`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json'\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tmd: md\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.log(err);\n\t\t\terror = err;\n\t\t\treturn null;\n\t\t});\n\n\treturn res.html;\n};\n\nexport const downloadDatabase = async (token: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/utils/db/download`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (response) => {\n\t\t\tif (!response.ok) {\n\t\t\t\tthrow await response.json();\n\t\t\t}\n\t\t\treturn response.blob();\n\t\t})\n\t\t.then((blob) => {\n\t\t\tconst url = window.URL.createObjectURL(blob);\n\t\t\tconst a = document.createElement('a');\n\t\t\ta.href = url;\n\t\t\ta.download = 'webui.db';\n\t\t\tdocument.body.appendChild(a);\n\t\t\ta.click();\n\t\t\twindow.URL.revokeObjectURL(url);\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.log(err);\n\t\t\terror = err.detail;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n};\n","import { WEBUI_API_BASE_URL } from '$lib/constants';\nimport type { Banner } from '$lib/types';\n\nexport const setDefaultModels = async (token: string, models: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/configs/default/models`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tmodels: models\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.log(err);\n\t\t\terror = err.detail;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const setDefaultPromptSuggestions = async (token: string, promptSuggestions: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/configs/default/suggestions`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tsuggestions: promptSuggestions\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.log(err);\n\t\t\terror = err.detail;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getBanners = async (token: string): Promise<Banner[]> => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/configs/banners`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.log(err);\n\t\t\terror = err.detail;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const setBanners = async (token: string, banners: Banner[]) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/configs/banners`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tbanners: banners\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.log(err);\n\t\t\terror = err.detail;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n"],"names":["getGravatarUrl","email","WEBUI_API_BASE_URL","res","err","downloadChatAsPDF","chat","downloadDatabase","token","error","response","blob","url","a","setDefaultModels","models","setDefaultPromptSuggestions","promptSuggestions","getBanners","setBanners","banners"],"mappings":"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"}