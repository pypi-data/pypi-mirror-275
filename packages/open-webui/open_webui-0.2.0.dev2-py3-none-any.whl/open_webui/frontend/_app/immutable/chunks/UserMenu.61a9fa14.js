import{v as ue,g as _e,k as pe,e as Je,l as Ge}from"./index.dca233de.js";import{s as X,e as he,i as y,d,I as Me,w as se,x as be,y as Ye,p as me,E as ne,F as le,G as ae,H as oe,f as C,g as T,h as I,_ as je,Z as Fe,u as z,v as ke,X as ye,W as $e,a as D,c as U,R as Q,j as m,C as x,o as Xe,z as ie,A as ce,r as w,P as He,l as H,m as P,n as W}from"./scheduler.bc5a4ea8.js";import{S as ee,i as te,g as Pe,t as M,c as We,a as S,f as Ce,b as R,d as q,m as Z,e as J}from"./index.5e522d2c.js";import"./create.427b7dc2.js";import{g as Ke}from"./spread.8a54911c.js";import{a as Qe,d as xe}from"./updater.4d70ecd8.js";import{y as et,z as Re,A as qe,M as Ze}from"./menu-trigger.003d1e90.js";import{f as tt}from"./index.1df8947f.js";import{n as st,o as nt,u as Be,k as Ae,p as lt,j as at,b as ot,i as ge,s as rt,q as it}from"./index.3b9fd815.js";import{T as ct}from"./Tags.ed597ee0.js";import{a as Ne}from"./Toaster.svelte_svelte_type_style_lang.264cdd7d.js";import{a as ut}from"./index.9a95918f.js";import{M as ft,f as dt}from"./dayjs.min.b0a164f5.js";import{g as ht}from"./navigation.01f37cd6.js";const mt=l=>({builder:l&8}),Le=l=>({builder:l[3]}),_t=l=>({builder:l&8}),De=l=>({builder:l[3]});function pt(l){let e=l[1]?"a":"div",s,t,n=(l[1]?"a":"div")&&we(l);return{c(){n&&n.c(),s=he()},l(r){n&&n.l(r),s=he()},m(r,a){n&&n.m(r,a),y(r,s,a),t=!0},p(r,a){r[1],e?X(e,r[1]?"a":"div")?(n.d(1),n=we(r),e=r[1]?"a":"div",n.c(),n.m(s.parentNode,s)):n.p(r,a):(n=we(r),e=r[1]?"a":"div",n.c(),n.m(s.parentNode,s))},i(r){t||(S(n,r),t=!0)},o(r){M(n,r),t=!1},d(r){r&&d(s),n&&n.d(r)}}}function gt(l){let e;const s=l[11].default,t=ne(s,l,l[10],De);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&1032)&&le(t,s,n,n[10],e?oe(s,n[10],r,_t):ae(n[10]),De)},i(n){e||(S(t,n),e=!0)},o(n){M(t,n),e=!1},d(n){t&&t.d(n)}}}function we(l){let e,s,t,n;const r=l[11].default,a=ne(r,l,l[10],Le);let o=[{href:l[1]},l[3],l[6]],i={};for(let c=0;c<o.length;c+=1)i=be(i,o[c]);return{c(){e=C(l[1]?"a":"div"),a&&a.c(),this.h()},l(c){e=T(c,((l[1]?"a":"div")||"null").toUpperCase(),{href:!0});var h=I(e);a&&a.l(h),h.forEach(d),this.h()},h(){je(l[1]?"a":"div")(e,i)},m(c,h){y(c,e,h),a&&a.m(e,null),l[12](e),s=!0,t||(n=[Fe(l[3].action(e)),z(e,"m-click",l[5]),z(e,"m-focusin",l[5]),z(e,"m-focusout",l[5]),z(e,"m-keydown",l[5]),z(e,"m-pointerdown",l[5]),z(e,"m-pointerleave",l[5]),z(e,"m-pointermove",l[5])],t=!0)},p(c,h){a&&a.p&&(!s||h&1032)&&le(a,r,c,c[10],s?oe(r,c[10],h,mt):ae(c[10]),Le),je(c[1]?"a":"div")(e,i=Ke(o,[(!s||h&2)&&{href:c[1]},h&8&&c[3],h&64&&c[6]]))},i(c){s||(S(a,c),s=!0)},o(c){M(a,c),s=!1},d(c){c&&d(e),a&&a.d(c),l[12](null),t=!1,ke(n)}}}function wt(l){let e,s,t,n;const r=[gt,pt],a=[];function o(i,c){return i[2]?0:1}return e=o(l),s=a[e]=r[e](l),{c(){s.c(),t=he()},l(i){s.l(i),t=he()},m(i,c){a[e].m(i,c),y(i,t,c),n=!0},p(i,[c]){let h=e;e=o(i),e===h?a[e].p(i,c):(Pe(),M(a[h],1,1,()=>{a[h]=null}),We(),s=a[e],s?s.p(i,c):(s=a[e]=r[e](i),s.c()),S(s,1),s.m(t.parentNode,t))},i(i){n||(S(s),n=!0)},o(i){M(s),n=!1},d(i){i&&d(t),a[e].d(i)}}}function vt(l,e,s){let t,n;const r=["href","asChild","disabled","el"];let a=Me(e,r),o,{$$slots:i={},$$scope:c}=e,{href:h=void 0}=e,{asChild:f=!1}=e,{disabled:b=!1}=e,{el:p=void 0}=e;const{elements:{item:v},getAttrs:$}=et();se(l,v,u=>s(9,o=u));const j=Qe();function B(u){me[u?"unshift":"push"](()=>{p=u,s(0,p)})}return l.$$set=u=>{e=be(be({},e),Ye(u)),s(6,a=Me(e,r)),"href"in u&&s(1,h=u.href),"asChild"in u&&s(2,f=u.asChild),"disabled"in u&&s(7,b=u.disabled),"el"in u&&s(0,p=u.el),"$$scope"in u&&s(10,c=u.$$scope)},l.$$.update=()=>{l.$$.dirty&512&&s(3,t=o),l.$$.dirty&128&&s(8,n={...$("item"),...xe(b)}),l.$$.dirty&264&&Object.assign(t,n)},[p,h,f,t,v,j,a,b,n,o,c,i,B]}class ve extends ee{constructor(e){super(),te(this,e,vt,wt,X,{href:1,asChild:2,disabled:7,el:0})}}const ds=async l=>{let e=null;const s=await fetch(`${ue}/memories`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`}}).then(async t=>{if(!t.ok)throw await t.json();return t.json()}).catch(t=>(e=t.detail,console.log(t),null));if(e)throw e;return s},hs=async(l,e)=>{let s=null;const t=await fetch(`${ue}/memories/add`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`},body:JSON.stringify({content:e})}).then(async n=>{if(!n.ok)throw await n.json();return n.json()}).catch(n=>(s=n.detail,console.log(n),null));if(s)throw s;return t},ms=async(l,e)=>{let s=null;const t=await fetch(`${ue}/memories/query`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`},body:JSON.stringify({content:e})}).then(async n=>{if(!n.ok)throw await n.json();return n.json()}).catch(n=>(s=n.detail,console.log(n),null));if(s)throw s;return t},_s=async(l,e)=>{let s=null;const t=await fetch(`${ue}/memories/${e}`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`}}).then(async n=>{if(!n.ok)throw await n.json();return n.json()}).then(n=>n).catch(n=>(s=n.detail,console.log(n),null));if(s)throw s;return t},ps=async l=>{let e=null;const s=await fetch(`${ue}/memories/user`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`}}).then(async t=>{if(!t.ok)throw await t.json();return t.json()}).then(t=>t).catch(t=>(e=t.detail,console.log(t),null));if(e)throw e;return s},bt=l=>({}),Ue=l=>({});function kt(l){let e;const s=l[2].default,t=ne(s,l,l[5],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&32)&&le(t,s,n,n[5],e?oe(s,n[5],r,null):ae(n[5]),null)},i(n){e||(S(t,n),e=!0)},o(n){M(t,n),e=!1},d(n){t&&t.d(n)}}}function yt(l){let e,s="Profile";return{c(){e=C("div"),e.textContent=s,this.h()},l(t){e=T(t,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1jfjm7"&&(e.textContent=s),this.h()},h(){m(e,"class","flex items-center")},m(t,n){y(t,e,n)},p:x,d(t){t&&d(e)}}}function $t(l){let e,s="Profile";return{c(){e=C("div"),e.textContent=s,this.h()},l(t){e=T(t,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1jfjm7"&&(e.textContent=s),this.h()},h(){m(e,"class","flex items-center")},m(t,n){y(t,e,n)},p:x,d(t){t&&d(e)}}}function Ct(l){let e,s="Profile";return{c(){e=C("div"),e.textContent=s,this.h()},l(t){e=T(t,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1jfjm7"&&(e.textContent=s),this.h()},h(){m(e,"class","flex items-center")},m(t,n){y(t,e,n)},p:x,d(t){t&&d(e)}}}function Tt(l){let e,s,t,n,r,a;return e=new ve({props:{class:"flex items-center px-3 py-2 text-sm  font-medium",$$slots:{default:[yt]},$$scope:{ctx:l}}}),t=new ve({props:{class:"flex items-center px-3 py-2 text-sm  font-medium",$$slots:{default:[$t]},$$scope:{ctx:l}}}),r=new ve({props:{class:"flex items-center px-3 py-2 text-sm  font-medium",$$slots:{default:[Ct]},$$scope:{ctx:l}}}),{c(){R(e.$$.fragment),s=D(),R(t.$$.fragment),n=D(),R(r.$$.fragment)},l(o){q(e.$$.fragment,o),s=U(o),q(t.$$.fragment,o),n=U(o),q(r.$$.fragment,o)},m(o,i){Z(e,o,i),y(o,s,i),Z(t,o,i),y(o,n,i),Z(r,o,i),a=!0},p(o,i){const c={};i&32&&(c.$$scope={dirty:i,ctx:o}),e.$set(c);const h={};i&32&&(h.$$scope={dirty:i,ctx:o}),t.$set(h);const f={};i&32&&(f.$$scope={dirty:i,ctx:o}),r.$set(f)},i(o){a||(S(e.$$.fragment,o),S(t.$$.fragment,o),S(r.$$.fragment,o),a=!0)},o(o){M(e.$$.fragment,o),M(t.$$.fragment,o),M(r.$$.fragment,o),a=!1},d(o){o&&(d(s),d(n)),J(e,o),J(t,o),J(r,o)}}}function It(l){let e,s;return e=new Ze({props:{class:"w-full max-w-[130px] rounded-lg px-1 py-1.5 border border-gray-700 z-50 bg-gray-850 text-white",sideOffset:8,side:"bottom",align:"start",transition:tt,$$slots:{default:[Tt]},$$scope:{ctx:l}}}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){Z(e,t,n),s=!0},p(t,n){const r={};n&32&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){s||(S(e.$$.fragment,t),s=!0)},o(t){M(e.$$.fragment,t),s=!1},d(t){J(e,t)}}}function Et(l){let e,s,t;e=new qe({props:{$$slots:{default:[kt]},$$scope:{ctx:l}}});const n=l[2].content,r=ne(n,l,l[5],Ue),a=r||It(l);return{c(){R(e.$$.fragment),s=D(),a&&a.c()},l(o){q(e.$$.fragment,o),s=U(o),a&&a.l(o)},m(o,i){Z(e,o,i),y(o,s,i),a&&a.m(o,i),t=!0},p(o,i){const c={};i&32&&(c.$$scope={dirty:i,ctx:o}),e.$set(c),r&&r.p&&(!t||i&32)&&le(r,n,o,o[5],t?oe(n,o[5],i,bt):ae(o[5]),Ue)},i(o){t||(S(e.$$.fragment,o),S(a,o),t=!0)},o(o){M(e.$$.fragment,o),M(a,o),t=!1},d(o){o&&d(s),J(e,o),a&&a.d(o)}}}function St(l){let e,s,t;function n(a){l[4](a)}let r={onOpenChange:l[3],$$slots:{default:[Et]},$$scope:{ctx:l}};return l[0]!==void 0&&(r.open=l[0]),e=new Re({props:r}),me.push(()=>Ce(e,"open",n)),{c(){R(e.$$.fragment)},l(a){q(e.$$.fragment,a)},m(a,o){Z(e,a,o),t=!0},p(a,[o]){const i={};o&32&&(i.$$scope={dirty:o,ctx:a}),!s&&o&1&&(s=!0,i.open=a[0],ye(()=>s=!1)),e.$set(i)},i(a){t||(S(e.$$.fragment,a),t=!0)},o(a){M(e.$$.fragment,a),t=!1},d(a){J(e,a)}}}function Mt(l,e,s){let{$$slots:t={},$$scope:n}=e,{show:r=!1}=e;const a=$e(),o=c=>{a("change",c)};function i(c){r=c,s(0,r)}return l.$$set=c=>{"show"in c&&s(0,r=c.show),"$$scope"in c&&s(5,n=c.$$scope)},[r,a,t,o,i,n]}class gs extends ee{constructor(e){super(),te(this,e,Mt,St,X,{show:0})}}function jt(l){let e,s;return e=new ct({props:{tags:l[0],deleteTag:l[2],addTag:l[1]}}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){Z(e,t,n),s=!0},p(t,[n]){const r={};n&1&&(r.tags=t[0]),e.$set(r)},i(t){s||(S(e.$$.fragment,t),s=!0)},o(t){M(e.$$.fragment,t),s=!1},d(t){J(e,t)}}}function Bt(l,e,s){let t,n;se(l,_e,f=>s(4,t=f)),se(l,pe,f=>s(5,n=f));const r=$e();let{chatId:a=""}=e,o=[];const i=async()=>await st(localStorage.token,a).catch(async f=>[]),c=async f=>{await nt(localStorage.token,a,f),s(0,o=await i()),await Be(localStorage.token,a,{tags:o}),pe.set(await Ae(localStorage.token))},h=async f=>{await lt(localStorage.token,a,f),s(0,o=await i()),await Be(localStorage.token,a,{tags:o}),console.log(n),await pe.set(await Ae(localStorage.token)),console.log(n),n.map(b=>b.name).includes(f)?(await _e.set(await at(localStorage.token,f)),t.find(b=>b.id===a)&&r("close")):await _e.set(await ot(localStorage.token))};return Xe(async()=>{a&&s(0,o=await i())}),l.$$set=f=>{"chatId"in f&&s(3,a=f.chatId)},[o,c,h,a]}class ws extends ee{constructor(e){super(),te(this,e,Bt,jt,X,{chatId:3})}}function At(l){let e,s;return{c(){e=ie("svg"),s=ie("path"),this.h()},l(t){e=ce(t,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var n=I(e);s=ce(n,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),I(s).forEach(d),n.forEach(d),this.h()},h(){m(s,"stroke-linecap","round"),m(s,"stroke-linejoin","round"),m(s,"d","m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width",l[1]),m(e,"stroke","currentColor"),m(e,"class",l[0])},m(t,n){y(t,e,n),w(e,s)},p(t,[n]){n&2&&m(e,"stroke-width",t[1]),n&1&&m(e,"class",t[0])},i:x,o:x,d(t){t&&d(e)}}}function Nt(l,e,s){let{className:t="size-3.5"}=e,{strokeWidth:n="2.5"}=e;return l.$$set=r=>{"className"in r&&s(0,t=r.className),"strokeWidth"in r&&s(1,n=r.strokeWidth)},[t,n]}class Lt extends ee{constructor(e){super(),te(this,e,Nt,At,X,{className:0,strokeWidth:1})}}function Dt(l){let e,s,t;return{c(){e=ie("svg"),s=ie("path"),t=ie("path"),this.h()},l(n){e=ce(n,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var r=I(e);s=ce(r,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),I(s).forEach(d),t=ce(r,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),I(t).forEach(d),r.forEach(d),this.h()},h(){m(s,"fill-rule","evenodd"),m(s,"d","M8.914 6.025a.75.75 0 0 1 1.06 0 3.5 3.5 0 0 1 0 4.95l-2 2a3.5 3.5 0 0 1-5.396-4.402.75.75 0 0 1 1.251.827 2 2 0 0 0 3.085 2.514l2-2a2 2 0 0 0 0-2.828.75.75 0 0 1 0-1.06Z"),m(s,"clip-rule","evenodd"),m(t,"fill-rule","evenodd"),m(t,"d","M7.086 9.975a.75.75 0 0 1-1.06 0 3.5 3.5 0 0 1 0-4.95l2-2a3.5 3.5 0 0 1 5.396 4.402.75.75 0 0 1-1.251-.827 2 2 0 0 0-3.085-2.514l-2 2a2 2 0 0 0 0 2.828.75.75 0 0 1 0 1.06Z"),m(t,"clip-rule","evenodd"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 16 16"),m(e,"fill","currentColor"),m(e,"class",l[0])},m(n,r){y(n,e,r),w(e,s),w(e,t)},p(n,[r]){r&1&&m(e,"class",n[0])},i:x,o:x,d(n){n&&d(e)}}}function Ut(l,e,s){let{className:t="w-4 h-4"}=e;return l.$$set=n=>{"className"in n&&s(0,t=n.className)},[t]}class Ot extends ee{constructor(e){super(),te(this,e,Ut,Dt,X,{className:0})}}function Oe(l){let e,s,t,n,r,a,o,i=l[3].t("Share to OpenWebUI Community")+"",c,h,f,b,p,v,$,j;function B(_,N){return _[2].share_id?zt:Vt}let u=B(l),E=u(l);b=new Ot({});function A(_,N){return _[2].share_id?Pt:Ht}let V=A(l),g=V(l);return{c(){e=C("div"),s=C("div"),E.c(),t=D(),n=C("div"),r=C("div"),a=C("div"),o=C("button"),c=H(i),h=D(),f=C("button"),R(b.$$.fragment),p=D(),g.c(),this.h()},l(_){e=T(_,"DIV",{class:!0});var N=I(e);s=T(N,"DIV",{class:!0});var G=I(s);E.l(G),G.forEach(d),t=U(N),n=T(N,"DIV",{class:!0});var K=I(n);r=T(K,"DIV",{class:!0});var Y=I(r);a=T(Y,"DIV",{class:!0});var F=I(a);o=T(F,"BUTTON",{class:!0,type:!0});var re=I(o);c=P(re,i),re.forEach(d),h=U(F),f=T(F,"BUTTON",{class:!0,type:!0,id:!0});var L=I(f);q(b.$$.fragment,L),p=U(L),g.l(L),L.forEach(d),F.forEach(d),Y.forEach(d),K.forEach(d),N.forEach(d),this.h()},h(){m(s,"class","text-sm dark:text-gray-300 mb-1"),m(o,"class","self-center px-3.5 py-2 rounded-xl text-sm font-medium bg-gray-100 hover:bg-gray-200 text-gray-800 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-white"),m(o,"type","button"),m(f,"class","self-center flex items-center gap-1 px-3.5 py-2 rounded-xl text-sm font-medium bg-emerald-600 hover:bg-emerald-500 text-white"),m(f,"type","button"),m(f,"id","copy-and-share-chat-button"),m(a,"class","flex gap-1"),m(r,"class","flex flex-col items-end space-x-1 mt-1.5"),m(n,"class","flex justify-end"),m(e,"class","px-5 pt-4 pb-5 w-full flex flex-col justify-center")},m(_,N){y(_,e,N),w(e,s),E.m(s,null),w(e,t),w(e,n),w(n,r),w(r,a),w(a,o),w(o,c),w(a,h),w(a,f),Z(b,f,null),w(f,p),g.m(f,null),v=!0,$||(j=[z(o,"click",l[9]),z(f,"click",l[10])],$=!0)},p(_,N){u===(u=B(_))&&E?E.p(_,N):(E.d(1),E=u(_),E&&(E.c(),E.m(s,null))),(!v||N&8)&&i!==(i=_[3].t("Share to OpenWebUI Community")+"")&&W(c,i),V===(V=A(_))&&g?g.p(_,N):(g.d(1),g=V(_),g&&(g.c(),g.m(f,null)))},i(_){v||(S(b.$$.fragment,_),v=!0)},o(_){M(b.$$.fragment,_),v=!1},d(_){_&&d(e),E.d(),J(b),g.d(),$=!1,ke(j)}}}function Vt(l){let e=l[3].t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")+"",s;return{c(){s=H(e)},l(t){s=P(t,e)},m(t,n){y(t,s,n)},p(t,n){n&8&&e!==(e=t[3].t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")+"")&&W(s,e)},d(t){t&&d(s)}}}function zt(l){let e,s=l[3].t("You have shared this chat")+"",t,n,r,a=l[3].t("before")+"",o,i,c,h,f=l[3].t("Click here to")+"",b,p,v,$=l[3].t("delete this link")+"",j,B,u=l[3].t("and create a new shared link.")+"",E,A,V;return{c(){e=C("a"),t=H(s),n=D(),r=C("span"),o=H(a),i=H("."),h=D(),b=H(f),p=D(),v=C("button"),j=H($),B=D(),E=H(u),this.h()},l(g){e=T(g,"A",{href:!0,target:!0});var _=I(e);t=P(_,s),n=U(_),r=T(_,"SPAN",{class:!0});var N=I(r);o=P(N,a),N.forEach(d),i=P(_,"."),_.forEach(d),h=U(g),b=P(g,f),p=U(g),v=T(g,"BUTTON",{class:!0});var G=I(v);j=P(G,$),G.forEach(d),B=U(g),E=P(g,u),this.h()},h(){m(r,"class","underline"),m(e,"href",c="/s/"+l[2].share_id),m(e,"target","_blank"),m(v,"class","underline")},m(g,_){y(g,e,_),w(e,t),w(e,n),w(e,r),w(r,o),w(e,i),y(g,h,_),y(g,b,_),y(g,p,_),y(g,v,_),w(v,j),y(g,B,_),y(g,E,_),A||(V=z(v,"click",l[8]),A=!0)},p(g,_){_&8&&s!==(s=g[3].t("You have shared this chat")+"")&&W(t,s),_&8&&a!==(a=g[3].t("before")+"")&&W(o,a),_&4&&c!==(c="/s/"+g[2].share_id)&&m(e,"href",c),_&8&&f!==(f=g[3].t("Click here to")+"")&&W(b,f),_&8&&$!==($=g[3].t("delete this link")+"")&&W(j,$),_&8&&u!==(u=g[3].t("and create a new shared link.")+"")&&W(E,u)},d(g){g&&(d(e),d(h),d(b),d(p),d(v),d(B),d(E)),A=!1,V()}}}function Ht(l){let e=l[3].t("Copy Link")+"",s;return{c(){s=H(e)},l(t){s=P(t,e)},m(t,n){y(t,s,n)},p(t,n){n&8&&e!==(e=t[3].t("Copy Link")+"")&&W(s,e)},d(t){t&&d(s)}}}function Pt(l){let e=l[3].t("Update and Copy Link")+"",s;return{c(){s=H(e)},l(t){s=P(t,e)},m(t,n){y(t,s,n)},p(t,n){n&8&&e!==(e=t[3].t("Update and Copy Link")+"")&&W(s,e)},d(t){t&&d(s)}}}function Wt(l){let e,s,t,n=l[3].t("Share Chat")+"",r,a,o,i='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',c,h,f,b,p=l[2]&&Oe(l);return{c(){e=C("div"),s=C("div"),t=C("div"),r=H(n),a=D(),o=C("button"),o.innerHTML=i,c=D(),p&&p.c(),this.h()},l(v){e=T(v,"DIV",{});var $=I(e);s=T($,"DIV",{class:!0});var j=I(s);t=T(j,"DIV",{class:!0});var B=I(t);r=P(B,n),B.forEach(d),a=U(j),o=T(j,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(o)!=="svelte-745w2y"&&(o.innerHTML=i),j.forEach(d),c=U($),p&&p.l($),$.forEach(d),this.h()},h(){m(t,"class","text-lg font-medium self-center"),m(o,"class","self-center"),m(s,"class","flex justify-between dark:text-gray-300 px-5 pt-4 pb-0.5")},m(v,$){y(v,e,$),w(e,s),w(s,t),w(t,r),w(s,a),w(s,o),w(e,c),p&&p.m(e,null),h=!0,f||(b=z(o,"click",l[7]),f=!0)},p(v,$){(!h||$&8)&&n!==(n=v[3].t("Share Chat")+"")&&W(r,n),v[2]?p?(p.p(v,$),$&4&&S(p,1)):(p=Oe(v),p.c(),S(p,1),p.m(e,null)):p&&(Pe(),M(p,1,1,()=>{p=null}),We())},i(v){h||(S(p),h=!0)},o(v){M(p),h=!1},d(v){v&&d(e),p&&p.d(),f=!1,b()}}}function Rt(l){let e,s,t;function n(a){l[11](a)}let r={size:"sm",$$slots:{default:[Wt]},$$scope:{ctx:l}};return l[0]!==void 0&&(r.show=l[0]),e=new ft({props:r}),me.push(()=>Ce(e,"show",n)),{c(){R(e.$$.fragment)},l(a){q(e.$$.fragment,a)},m(a,o){Z(e,a,o),t=!0},p(a,[o]){const i={};o&32783&&(i.$$scope={dirty:o,ctx:a}),!s&&o&1&&(s=!0,i.show=a[0],ye(()=>s=!1)),e.$set(i)},i(a){t||(S(e.$$.fragment,a),t=!0)},o(a){M(e.$$.fragment,a),t=!1},d(a){J(e,a)}}}function qt(l,e,s){let t,n;se(l,Je,u=>s(13,t=u));let{chatId:r}=e,a=null,o=null;const i=He("i18n");se(l,i,u=>s(3,n=u));const c=async()=>{const u=await rt(localStorage.token,r);return o=`${window.location.origin}/s/${u.id}`,console.log(o),s(2,a=await ge(localStorage.token,r)),o},h=async()=>{const u=a.chat;console.log("share",u),Ne.success(n.t("Redirecting you to OpenWebUI Community"));const E="https://openwebui.com",A=await window.open(`${E}/chats/upload`,"_blank");window.addEventListener("message",V=>{V.origin===E&&V.data==="loaded"&&A.postMessage(JSON.stringify({chat:u,models:t.filter(g=>u.models.includes(g.id))}),"*")},!1)};let{show:f=!1}=e;const b=u=>a?u?a.id!==u.id||a.share_id!==u.share_id:!1:!0,p=()=>{s(0,f=!1)},v=async()=>{await it(localStorage.token,r)&&s(2,a=await ge(localStorage.token,r))},$=()=>{h(),s(0,f=!1)},j=async()=>{if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){console.log("isSafari");const E=async()=>{const A=await c();return new Blob([A],{type:"text/plain"})};navigator.clipboard.write([new ClipboardItem({"text/plain":E()})]).then(()=>(console.log("Async: Copying to clipboard was successful!"),!0)).catch(A=>(console.error("Async: Could not copy text: ",A),!1))}else ut(await c());Ne.success(n.t("Copied shared chat URL to clipboard!")),s(0,f=!1)};function B(u){f=u,s(0,f)}return l.$$set=u=>{"chatId"in u&&s(1,r=u.chatId),"show"in u&&s(0,f=u.show)},l.$$.update=()=>{l.$$.dirty&7&&f&&(async()=>{if(r){const u=await ge(localStorage.token,r);b(u)&&s(2,a=u)}else s(2,a=null),console.log(a)})()},[f,r,a,n,i,c,h,p,v,$,j,B]}class vs extends ee{constructor(e){super(),te(this,e,qt,Rt,X,{chatId:1,show:0})}}const Zt=l=>({}),Ve=l=>({});function Jt(l){let e;const s=l[6].default,t=ne(s,l,l[14],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16384)&&le(t,s,n,n[14],e?oe(s,n[14],r,null):ae(n[14]),null)},i(n){e||(S(t,n),e=!0)},o(n){M(t,n),e=!1},d(n){t&&t.d(n)}}}function ze(l){let e,s,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>',n,r,a=l[3].t("Admin Panel")+"",o,i,c;return{c(){e=C("button"),s=C("div"),s.innerHTML=t,n=D(),r=C("div"),o=H(a),this.h()},l(h){e=T(h,"BUTTON",{class:!0});var f=I(e);s=T(f,"DIV",{class:!0,"data-svelte-h":!0}),Q(s)!=="svelte-1vodyax"&&(s.innerHTML=t),n=U(f),r=T(f,"DIV",{class:!0});var b=I(r);o=P(b,a),b.forEach(d),f.forEach(d),this.h()},h(){m(s,"class","self-center mr-3"),m(r,"class","self-center font-medium"),m(e,"class","flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition")},m(h,f){y(h,e,f),w(e,s),w(e,n),w(e,r),w(r,o),i||(c=z(e,"click",l[9]),i=!0)},p(h,f){f&8&&a!==(a=h[3].t("Admin Panel")+"")&&W(o,a)},d(h){h&&d(e),i=!1,c()}}}function Gt(l){let e,s,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>',n,r,a=l[3].t("Settings")+"",o,i,c,h,f,b,p,v=l[3].t("Archived Chats")+"",$,j,B,u,E,A,V,g='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M3 4.25A2.25 2.25 0 015.25 2h5.5A2.25 2.25 0 0113 4.25v2a.75.75 0 01-1.5 0v-2a.75.75 0 00-.75-.75h-5.5a.75.75 0 00-.75.75v11.5c0 .414.336.75.75.75h5.5a.75.75 0 00.75-.75v-2a.75.75 0 011.5 0v2A2.25 2.25 0 0110.75 18h-5.5A2.25 2.25 0 013 15.75V4.25z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M6 10a.75.75 0 01.75-.75h9.546l-1.048-.943a.75.75 0 111.004-1.114l2.5 2.25a.75.75 0 010 1.114l-2.5 2.25a.75.75 0 11-1.004-1.114l1.048-.943H6.75A.75.75 0 016 10z" clip-rule="evenodd"></path></svg>',_,N,G=l[3].t("Sign Out")+"",K,Y,F,re;f=new Lt({props:{className:"size-5",strokeWidth:"1.5"}});let L=l[1]==="admin"&&ze(l);return{c(){e=C("button"),s=C("div"),s.innerHTML=t,n=D(),r=C("div"),o=H(a),i=D(),c=C("button"),h=C("div"),R(f.$$.fragment),b=D(),p=C("div"),$=H(v),j=D(),L&&L.c(),B=D(),u=C("hr"),E=D(),A=C("button"),V=C("div"),V.innerHTML=g,_=D(),N=C("div"),K=H(G),this.h()},l(k){e=T(k,"BUTTON",{class:!0});var O=I(e);s=T(O,"DIV",{class:!0,"data-svelte-h":!0}),Q(s)!=="svelte-1ew1v3e"&&(s.innerHTML=t),n=U(O),r=T(O,"DIV",{class:!0});var Te=I(r);o=P(Te,a),Te.forEach(d),O.forEach(d),i=U(k),c=T(k,"BUTTON",{class:!0});var fe=I(c);h=T(fe,"DIV",{class:!0});var Ie=I(h);q(f.$$.fragment,Ie),Ie.forEach(d),b=U(fe),p=T(fe,"DIV",{class:!0});var Ee=I(p);$=P(Ee,v),Ee.forEach(d),fe.forEach(d),j=U(k),L&&L.l(k),B=U(k),u=T(k,"HR",{class:!0}),E=U(k),A=T(k,"BUTTON",{class:!0});var de=I(A);V=T(de,"DIV",{class:!0,"data-svelte-h":!0}),Q(V)!=="svelte-1svlfdm"&&(V.innerHTML=g),_=U(de),N=T(de,"DIV",{class:!0});var Se=I(N);K=P(Se,G),Se.forEach(d),de.forEach(d),this.h()},h(){m(s,"class","self-center mr-3"),m(r,"class","self-center font-medium"),m(e,"class","flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition"),m(h,"class","self-center mr-3"),m(p,"class","self-center font-medium"),m(c,"class","flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition"),m(u,"class","dark:border-gray-800 my-2 p-0"),m(V,"class","self-center mr-3"),m(N,"class","self-center font-medium"),m(A,"class","flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition")},m(k,O){y(k,e,O),w(e,s),w(e,n),w(e,r),w(r,o),y(k,i,O),y(k,c,O),w(c,h),Z(f,h,null),w(c,b),w(c,p),w(p,$),y(k,j,O),L&&L.m(k,O),y(k,B,O),y(k,u,O),y(k,E,O),y(k,A,O),w(A,V),w(A,_),w(A,N),w(N,K),Y=!0,F||(re=[z(e,"click",l[7]),z(c,"click",l[8]),z(A,"click",l[10])],F=!0)},p(k,O){(!Y||O&8)&&a!==(a=k[3].t("Settings")+"")&&W(o,a),(!Y||O&8)&&v!==(v=k[3].t("Archived Chats")+"")&&W($,v),k[1]==="admin"?L?L.p(k,O):(L=ze(k),L.c(),L.m(B.parentNode,B)):L&&(L.d(1),L=null),(!Y||O&8)&&G!==(G=k[3].t("Sign Out")+"")&&W(K,G)},i(k){Y||(S(f.$$.fragment,k),Y=!0)},o(k){M(f.$$.fragment,k),Y=!1},d(k){k&&(d(e),d(i),d(c),d(j),d(B),d(u),d(E),d(A)),J(f),L&&L.d(k),F=!1,ke(re)}}}function Yt(l){let e,s;return e=new Ze({props:{class:"w-full "+l[2]+" text-sm rounded-xl px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow",sideOffset:8,side:"bottom",align:"start",transition:l[11],$$slots:{default:[Gt]},$$scope:{ctx:l}}}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){Z(e,t,n),s=!0},p(t,n){const r={};n&4&&(r.class="w-full "+t[2]+" text-sm rounded-xl px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow"),n&16395&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){s||(S(e.$$.fragment,t),s=!0)},o(t){M(e.$$.fragment,t),s=!1},d(t){J(e,t)}}}function Ft(l){let e,s,t;e=new qe({props:{$$slots:{default:[Jt]},$$scope:{ctx:l}}});const n=l[6].content,r=ne(n,l,l[14],Ve),a=r||Yt(l);return{c(){R(e.$$.fragment),s=D(),a&&a.c()},l(o){q(e.$$.fragment,o),s=U(o),a&&a.l(o)},m(o,i){Z(e,o,i),y(o,s,i),a&&a.m(o,i),t=!0},p(o,i){const c={};i&16384&&(c.$$scope={dirty:i,ctx:o}),e.$set(c),r?r.p&&(!t||i&16384)&&le(r,n,o,o[14],t?oe(n,o[14],i,Zt):ae(o[14]),Ve):a&&a.p&&(!t||i&15)&&a.p(o,t?i:-1)},i(o){t||(S(e.$$.fragment,o),S(a,o),t=!0)},o(o){M(e.$$.fragment,o),M(a,o),t=!1},d(o){o&&d(s),J(e,o),a&&a.d(o)}}}function Xt(l){let e,s,t;function n(a){l[13](a)}let r={onOpenChange:l[12],$$slots:{default:[Ft]},$$scope:{ctx:l}};return l[0]!==void 0&&(r.open=l[0]),e=new Re({props:r}),me.push(()=>Ce(e,"open",n)),{c(){R(e.$$.fragment)},l(a){q(e.$$.fragment,a)},m(a,o){Z(e,a,o),t=!0},p(a,[o]){const i={};o&16399&&(i.$$scope={dirty:o,ctx:a}),!s&&o&1&&(s=!0,i.open=a[0],ye(()=>s=!1)),e.$set(i)},i(a){t||(S(e.$$.fragment,a),t=!0)},o(a){M(e.$$.fragment,a),t=!1},d(a){J(e,a)}}}function Kt(l,e,s){let t,{$$slots:n={},$$scope:r}=e;const a=He("i18n");se(l,a,u=>s(3,t=u));let{show:o=!1}=e,{role:i=""}=e,{className:c="max-w-[240px]"}=e;const h=$e(),f=async()=>{await Ge.set(!0),s(0,o=!1)},b=()=>{h("show","archived-chat"),s(0,o=!1)},p=()=>{ht("/admin"),s(0,o=!1)},v=()=>{localStorage.removeItem("token"),location.href="/auth",s(0,o=!1)},$=u=>dt(u,{duration:100}),j=u=>{h("change",u)};function B(u){o=u,s(0,o)}return l.$$set=u=>{"show"in u&&s(0,o=u.show),"role"in u&&s(1,i=u.role),"className"in u&&s(2,c=u.className),"$$scope"in u&&s(14,r=u.$$scope)},[o,i,c,t,a,h,n,f,b,p,v,$,j,B,r]}class bs extends ee{constructor(e){super(),te(this,e,Kt,Xt,X,{show:0,role:1,className:2})}}export{Lt as A,gs as D,ve as M,vs as S,ws as T,bs as U,hs as a,ps as b,_s as d,ds as g,ms as q};
//# sourceMappingURL=UserMenu.61a9fa14.js.map
