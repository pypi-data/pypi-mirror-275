<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cloudinary Video Player</title>
    <script src="./streamlit-component-lib.js"></script>
    <script src="./main.js"></script>
    <link rel="stylesheet" href="./style.css" />
    <link href="https://unpkg.com/cloudinary-video-player/dist/cld-video-player.min.css" rel="stylesheet">
    <link href="https://unpkg.com/cloudinary-video-player/dist/cld-video-player.min.css" rel="stylesheet">
    <script src="https://unpkg.com/cloudinary-core/cloudinary-core-shrinkwrap.min.js" type="text/javascript"></script>
    <script src="https://unpkg.com/cloudinary-video-player/dist/cld-video-player.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dashjs/2.6.3/dash.all.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/videojs-contrib-dash/2.9.2/videojs-dash.min.js" type="text/javascript"></script>

    <script type="text/javascript">      
      window.addEventListener("load", (event) => {
        console.log('Here is the event element')
        console.log(JSON.stringify(event.args))          
        var cld = cloudinary.Cloudinary.new(
          {cloud_name: args.cloud_name, secure: true}
        );
        var player = cld.videoPlayer('cld-player', {
          
            posterOptions: {
                transformation: {
                    start_offset: args.startAt || 0,
                }
            },
            aiHighlightsGraph: args.aiHighlightsGraph,
            skin: args.skin,
            fluid: args.responsive,
            controls: args.controls,
            muted: args.muted,
            showJumpControls: args.showJumpControls,
            pictureInPictureToggle: args.pictureInPictureToggle,
            autoplayMode: args.autoplayMode,
            autoplay: args.autoplay,
            loop: args.loop,
            locale: args.locale
        })
        
        if (args.showTitle) {
        var info = {
            title: args.title,
            subtitle: args.subtitle
        }
      }

        player.source({
            publicId: args.public_id,
            info: info || null
        })
        document.body.style='margin:0px;'
      });  
          
    </script>      
  </head>
  <body>    
    
    <video
        style="min-width:100vw;min-height:100vh;max-width:100vw;max-height:100vh"
        id="cld-player"
        controls
        class="cld-video-player"
    >
    </video>
    

  </body>
</html>
